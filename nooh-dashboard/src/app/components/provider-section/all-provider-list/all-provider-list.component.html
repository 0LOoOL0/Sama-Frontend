<span class="loader" id="loader" style="display: none;"> 
</span>

<div class="p-6 bg-gray-50 min-h-screen">
    <!-- Header -->

    <div class="mainhead w-full flex">

  

    <div class="2nd w-[70%]">
    
      <h1 class="text-xl font-semibold text-[#5E17EB]">All Providers Page</h1>

    <!-- Category Badges -->
    <div class="flex flex-wrap gap-4 mb-6 mt-14">
      <span *ngFor="let type of typeCounts" 
      class="px-4 py-2 rounded-full text-white"
      [ngClass]="{
      
        'bg-purple-800': type.type_en === 'Trainer',
        'bg-purple-400': type.type_en === 'Doctors',
        'bg-cyan-400': type.type_en === 'Accommodation',
        'bg-yellow-400': type.type_en === 'School and Training',
        'bg-indigo-500': type.type_en === 'Other',
        'bg-blue-500': type.type_en === 'Vet Clinic',
        'bg-red-500': type.type_en === 'Groomer',
        'bg-pink-400': type.type_en === 'PetShop',
      }">
  {{ type.type_en }} No. {{ type.count }}
</span>

    </div>
  
  
    <!-- Status Filters -->
    <div class="flex flex-wrap gap-4 mb-6">
      <span class="px-4 py-2 bg-blue-500 text-white rounded-full">Application No</span>
      <span class="px-4 py-2 bg-orange-400 text-white rounded-full">Waiting No</span>
      <span class="px-4 py-2 bg-yellow-300 text-white rounded-full">Preapproval No</span>
      <span class="px-4 py-2 bg-green-600 text-white rounded-full">Approved No</span>
    </div>
  </div>

  <div class="flex w-[30%] flex-col-reverse sm:flex-row sm:items-center sm:justify-between mb-4">
    <!-- Buttons Section -->
    <div class="flex flex-col sm:absolute sm:right-8 sm:space-y-2 space-y-4 mt-4 sm:mt-36">
      <!-- Add Provider Button -->
      <button class="bg-red-500 text-white px-4 py-2 rounded-lg hover:bg-red-600" routerLink="/add-new-provider">
        Add Provider
      </button>

      <!-- Rounded Text Buttons -->
      <div class="flex flex-col space-y-2">
        <button class="px-4 py-2 bg-gray-100 text-gray-800 rounded-full border border-gray-300 text-sm hover:bg-gray-200">
          Active No. 100
        </button>
        <button class="px-4 py-2 bg-gray-100 text-gray-800 rounded-full border border-gray-300 text-sm hover:bg-gray-200">
          NonActive No. 100
        </button>
        <button class="px-4 py-2 bg-gray-100 text-gray-800 rounded-full border border-gray-300 text-sm hover:bg-gray-200">
          Pending No. 100
        </button>
        <button class="px-4 py-2 bg-gray-100 text-gray-800 rounded-full border border-gray-300 text-sm hover:bg-gray-200">
          Renewal No. 100
        </button>
        <button class="px-4 py-2 bg-gray-100 text-gray-800 rounded-full border border-gray-300 text-sm hover:bg-gray-200">
          Expired No. 100
        </button>
      </div>
    </div>
  </div>
</div>

    <!-- Filter Inputs -->
    <div class="grid grid-cols-2 lg:grid-cols-4 gap-6 items-center mb-6 w-[80%]">

      
      <!-- Filter: From Date -->
<div>
  <label for="from-date" class="block text-sm font-medium text-gray-700 mb-1">Filter From:</label>
  <input 
    id="from-date" 
    type="date" 
    (change)="filterByDateRange($event)" 
    class="border border-gray-300 rounded-lg p-2 w-full text-sm focus:ring-purple-500 focus:border-purple-500"
  >
</div>

<!-- Filter: To Date -->
<div>
  <label for="to-date" class="block text-sm font-medium text-gray-700 mb-1">To:</label>
  <input 
    id="to-date" 
    type="date" 
    (change)="filterByDateRange($event)" 
    class="border border-gray-300 rounded-lg p-2 w-full text-sm focus:ring-blue-500 focus:border-blue-500"
  >
</div>

      
        <div>
          <label for="type-provider-1" class="block text-sm font-medium text-gray-700 mb-1">Type of Provider:</label>
          <select id="type-provider-1" class="border border-gray-300 rounded-lg p-2 w-full text-sm focus:ring-blue-500 focus:border-blue-500">
            <option>All</option>
            <option>Vet Clinic</option>
            <option>Grooming</option>
            <option>Shops</option>
          </select>
        </div>
      
        <!-- Filter: Type of Provider (Duplicate for example consistency) -->
        <div>
          <label for="type-provider-2" class="block text-sm font-medium text-gray-700 mb-1">Type of Provider:</label>
          <select id="type-provider-2" class="border border-gray-300 rounded-lg p-2 w-full text-sm focus:ring-blue-500 focus:border-blue-500">
            <option>All</option>
            <option>Vet Clinic</option>
            <option>Grooming</option>
            <option>Shops</option>
          </select>
        </div>
      
        <!-- Filter: City -->
        <div>
          <label for="city" class="block text-sm font-medium text-gray-700 mb-1">City:</label>
          <input id="city" type="text" placeholder="Enter City" (input)="filterByCity($event)" class="border border-gray-300 rounded-lg p-2 w-full text-sm focus:ring-blue-500 focus:border-purple-500">
        </div>
      
        <!-- Filter: Status -->
        <div>
          <label for="status" class="block text-sm font-medium text-gray-700 mb-1">Status:</label>
          <select id="status" class="border border-gray-300 rounded-lg p-2 w-full text-sm focus:ring-blue-500 focus:border-blue-500">
            <option>All</option>
            <option>Active</option>
            <option>Pending</option>
            <option>Completed</option>
          </select>
        </div>
      </div>
      
  
    <!-- Import/Export Buttons -->
    <div class="flex justify-between items-center mb-4">
        <!-- Left Side: Import and Export Buttons -->
        <!-- Hidden file input -->
<input
#fileInput
type="file"
accept=".csv"
style="display: none"
(change)="onFileImport($event)"
/>

<div class="flex space-x-2">
<button
  class="bg-green-500 text-white px-4 py-2 rounded-lg hover:bg-green-600"
  (click)="triggerFileInput()"
>
  Import
</button>
<button
  class="bg-green-500 text-white px-4 py-2 rounded-lg hover:bg-green-600"
  (click)="exportToCSV()"
>
  Export
</button>
</div>

        
        <!-- Right Side: Search Bar -->
        <div class="relative">
          <input 
            type="text" 
            placeholder="Search..." 
            class="border border-gray-300 rounded-lg py-2 pl-8 pr-4 w-64 text-sm focus:ring-blue-500 focus:border-blue-500"
          />
          <!-- Search Icon -->
         <img src="Image/search.png" alt="" class="absolute top-3.5 left-2.5 h-3.5">
        </div>
      </div>
      
  
    <!-- Table -->
    <div class="overflow-x-auto">
      <table class="min-w-full bg-white rounded-lg shadow-md">
        <thead class="blue-bg">
          <tr class="text-white">
            <th class="px-4 py-2 text-left">
              <input type="checkbox" class="form-checkbox h-4 w-4 text-blue-600 rounded focus:ring-blue-500">
            </th>
            <th class="px-4 py-2 text-left">Process</th>
            <th class="px-4 py-2 text-left">Status</th>
            <th class="px-4 py-2 text-left">Start Date</th>
            <th class="px-4 py-2 text-left">Type of Provider</th>
            <th class="px-4 py-2 text-left">Provider Name</th>
            <th class="px-4 py-2 text-left">Place</th>
            <th class="px-4 py-2 text-left">Contact</th>
            <th class="px-4 py-2 text-left">Email</th>
            <th class="px-4 py-2 text-left">Status</th>
            <th class="px-4 py-2 text-left">Actions</th>
          </tr>
        </thead>
    
        <tbody *ngIf="filteredProviders.length > 0; else noData">
          <tr class="border-t hover:bg-gray-50" *ngFor="let provider of filteredProviders">
            <td class="px-4 py-2 text-left">
              <input type="checkbox" class="form-checkbox h-4 w-4 text-blue-600 rounded focus:ring-blue-500" />
            </td>
            <td class="px-4 py-2">Application</td>
            <td class="px-4 py-2">
              <span class="px-2 py-1 text-blue-800 rounded-full bg-pink-50">Pending</span>
            </td>
            <td class="px-4 py-2">{{ provider.start_date ?? 'Data Missing' }}</td>
            <td class="px-4 py-2">{{ provider.gallery?.type_en ?? 'Data Missing' }}</td>
            <td class="px-4 py-2">{{ provider.provider_name_en ?? 'Data Missing' }}</td>
            <td class="px-4 py-2">{{ provider.city ?? 'Data Missing' }}</td>
            <td class="px-4 py-2">{{ provider.contact_no ?? 'Data Missing' }}</td>
            <td class="px-4 py-2">{{ provider.email ?? 'Data Missing' }}</td>
            <td class="py-2 px-4 text-center">
              <label class="relative inline-flex items-center cursor-pointer">
                <input
                  type="checkbox"
                  class="sr-only peer"
                  [checked]="provider.status === 'active'"
                  (change)="ControlProvider(provider.id)"
                  />
                <div
                  class="w-10 h-5 bg-red-500 rounded-full peer-checked:bg-green-500 peer-focus:ring-2 peer-focus:ring-offset-2 peer-focus:ring-blue-700 transition-colors duration-300"
                ></div>
                <span
                  class="w-3 h-3 bg-white rounded-full shadow-md transform peer-checked:translate-x-6 peer-checked:bg-green-100 absolute left-1 top-1 transition-transform duration-300"
                ></span>
              </label>
            </td>
            
            <td class="flex justify-around items-center h-16">
              <img src="biin.png" alt="" class="h-5 cursor-pointer" (click)="deleteProvider(provider.id)" />
              <img src="edit-pic.png" alt="" class="h-5 cursor-pointer" (click)="navigateToProfile(provider)" />
            </td>
          </tr>
        </tbody>
    
        <!-- Template for No Data -->
        <ng-template #noData>
          <tr>
            <td colspan="10" class="text-center py-4 text-gray-500">
              No data available
            </td>
          </tr>
        </ng-template>
      </table>
    </div>
    
  
  </div>

