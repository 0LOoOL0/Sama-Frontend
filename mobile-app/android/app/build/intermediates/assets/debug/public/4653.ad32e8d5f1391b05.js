"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[4653],{4653:(x,u,i)=>{i.r(u),i.d(u,{CouponPageModule:()=>F});var g=i(9351),m=i(7199),r=i(7473),d=i(4170),h=i(5841),o=i(315),C=i(4330),f=i(5822),P=i(1572),v=i(5110);function M(t,a){if(1&t&&(o.j41(0,"div",4)(1,"div",5)(2,"ion-thumbnail",0),o.nrm(3,"img",6),o.k0s()(),o.j41(4,"div",7)(5,"ion-label",8)(6,"h2",9),o.EFF(7),o.k0s(),o.j41(8,"div",10)(9,"p",11),o.EFF(10),o.k0s(),o.j41(11,"p",12),o.EFF(12),o.k0s()(),o.j41(13,"div",10)(14,"ion-button",13),o.EFF(15,"Buy"),o.k0s(),o.j41(16,"p",14),o.EFF(17),o.k0s()()()()()),2&t){const s=a.$implicit;o.R7$(3),o.Y8G("src",s.image,o.B4B),o.R7$(4),o.JRh(s.title),o.R7$(3),o.JRh(s.description),o.R7$(2),o.SpI(" ",s.price,""),o.R7$(5),o.JRh(s.expiration_date)}}const O=[{path:"",component:(()=>{var t;class a{constructor(n,e,l,c,p,y){this.couponService=n,this.authService=e,this.petInfoService=l,this.navCtrl=c,this.modalController=p,this.alertController=y,this.coupons=[],this.segment="coupons",this.pets=[],this.profile={},this.petOwnerId=0}ngOnInit(){var n=this;return(0,h.A)(function*(){try{const e=yield n.authService.fetchProfileData();n.profile=e,console.log("Profile data:",n.profile),n.petOwnerId=n.profile.id,yield n.fetchNotMembershipCoupons()}catch(e){console.error("Error initializing component:",e)}})()}onCategoryChange(n){console.log("Selected Category:",n.detail.value)}fetchNotMembershipCoupons(){var n=this;return(0,h.A)(function*(){if(n.coupons.length>0)console.log("Coupons already fetched:",n.coupons);else try{const e=yield n.couponService.getCouponUsagesByOwnerId(n.petOwnerId).toPromise();console.log("Fetched coupon usages:",e);const l=null==e?void 0:e.map(c=>c.coupon_id);console.log("Used Coupon IDs:",l),n.couponService.getMembershipCoupons().subscribe(c=>{console.log("Fetched membership coupons:",c),n.coupons=c.filter(p=>!(null!=l&&l.includes(p.id))),console.log("Available coupons after removing used ones:",n.coupons)},c=>{console.error("Error fetching membership coupons:",c)})}catch(e){console.error("Error fetching coupon usages:",e)}})()}}return(t=a).\u0275fac=function(n){return new(n||t)(o.rXU(C.O),o.rXU(f.u),o.rXU(P.d),o.rXU(v.q9),o.rXU(r.W3),o.rXU(r.hG))},t.\u0275cmp=o.VBU({type:t,selectors:[["app-coupon"]],decls:9,vars:1,consts:[["slot","start"],[1,"centered-title","titleFont"],[1,"ion-padding"],["class","coupon",4,"ngFor","ngForOf"],[1,"coupon"],[1,"ListIcon"],["alt","Coupon Image",3,"src"],[1,"ListDetails"],[1,"ion-text-wrap"],[1,"bodyFont"],[1,"inOneLine"],[1,"bodyFont","smallFont"],[1,"titleFont"],["expand","full","fill","clear",1,"FilledButtons","smallFont"],[1,"textGray","smallFont"]],template:function(n,e){1&n&&(o.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",0),o.nrm(3,"ion-back-button"),o.k0s(),o.j41(4,"ion-label",1),o.EFF(5,"Coupons"),o.k0s()()(),o.j41(6,"ion-content",2)(7,"ion-list"),o.DNE(8,M,18,5,"div",3),o.k0s()()),2&n&&(o.R7$(8),o.Y8G("ngForOf",e.coupons))},dependencies:[g.Sq,r.Jm,r.QW,r.W9,r.eU,r.he,r.nf,r.Zx,r.ai,r.el],styles:[".centered-title[_ngcontent-%COMP%]{position:fixed;top:30px;left:50%;transform:translate(-50%)}ion-buttons[_ngcontent-%COMP%]{margin-top:18px}ion-select[_ngcontent-%COMP%], ion-select-option[_ngcontent-%COMP%]{font-weight:600}  ion-select-popover{--background: white !important}  ion-select-popover ion-list{background-color:#fff!important}  ion-select-popover ion-list ion-item{--background: white !important;--color: black !important}  .select-interface-option{background-color:#fff!important;color:#000!important}ion-list[_ngcontent-%COMP%]{background-color:var(--background-color)}.coupon[_ngcontent-%COMP%]{background-color:var(--White);border-radius:16px;padding:10px;margin-bottom:10px;display:flex}.ListIcon[_ngcontent-%COMP%]{display:flex;align-items:center;margin-right:10px;border-right:2px dashed var(--GrayColor)}.ListIcon[_ngcontent-%COMP%]   ion-thumbnail[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:auto}.ListDetails[_ngcontent-%COMP%]{width:100%;margin-right:10px}.ListDetails[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-weight:600}.ListDetails[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-weight:400}.ListDetails[_ngcontent-%COMP%]   .inOneLine[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.ListDetails[_ngcontent-%COMP%]   .inOneLine[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-top:auto}.ListDetails[_ngcontent-%COMP%]   .inOneLine[_ngcontent-%COMP%]   .titleFont[_ngcontent-%COMP%]{color:var(--Main-Two)!important;font-weight:600;font-size:2rem!important}.ListDetails[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{height:4vh;width:55%;margin-bottom:0}@media screen and (max-width: 350px){ion-buttons[_ngcontent-%COMP%]{max-width:25%}ion-buttons[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin-right:10px}.ListDetails[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.6rem!important}}"]}),a})()}];let b=(()=>{var t;class a{}return(t=a).\u0275fac=function(n){return new(n||t)},t.\u0275mod=o.$C({type:t}),t.\u0275inj=o.G2t({imports:[d.iI.forChild(O),d.iI]}),a})(),F=(()=>{var t;class a{}return(t=a).\u0275fac=function(n){return new(n||t)},t.\u0275mod=o.$C({type:t}),t.\u0275inj=o.G2t({imports:[g.MD,m.YN,r.bv,b]}),a})()}}]);