"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[4843],{4843:(S,A,c)=>{c.r(A),c.d(A,{DrlistPageModule:()=>T});var u=c(9351),n=c(7199),g=c(7473),C=c(4170),f=c(5841),F=c(8580),e=c(315),_=c(878),y=c(496);y.A.defaults.withCredentials=!0;let l=(()=>{var o;class p{constructor(){this.apiUrl=`${_.c.apiUrl}/api`,y.A.interceptors.request.use(r=>{const i=localStorage.getItem("token");return i&&(r.headers.Authorization=`Bearer ${i}`),r},r=>Promise.reject(r))}getAllDoctors(){var r=this;return(0,f.A)(function*(){try{return(yield y.A.get(`${r.apiUrl}/doctor_info`)).data}catch(i){throw console.error("Error fetching doctors:",i),i}})()}getDoctorById(r){var i=this;return(0,f.A)(function*(){try{return(yield y.A.get(`${i.apiUrl}/doctor_info/${r}`)).data}catch(d){throw console.error(`Error fetching doctor with ID ${r}:`,d),d}})()}}return(o=p).\u0275fac=function(r){return new(r||o)},o.\u0275prov=e.jDH({token:o,factory:o.\u0275fac,providedIn:"root"}),p})();var t=c(5110),a=c(8525),h=c(5822),D=c(1301);const P=()=>[];function w(o,p){if(1&o){const s=e.RV6();e.j41(0,"ion-searchbar",14),e.mxI("ngModelChange",function(i){e.eBV(s);const d=e.XpG();return e.DH7(d.searchTerm,i)||(d.searchTerm=i),e.Njj(i)}),e.bIt("ionInput",function(i){e.eBV(s);const d=e.XpG();return e.Njj(d.onSearchInput(i))}),e.k0s()}if(2&o){const s=e.XpG();e.R50("ngModel",s.searchTerm)}}function R(o,p){if(1&o){const s=e.RV6();e.j41(0,"div",15)(1,"div",16)(2,"img",17),e.bIt("click",function(){const i=e.eBV(s).$implicit,d=e.XpG();return e.Njj(d.goToVetDetails(i.provider_id))}),e.k0s()(),e.j41(3,"div",18)(4,"div",19)(5,"ion-label",20),e.EFF(6),e.k0s()(),e.j41(7,"img",21),e.bIt("click",function(){const i=e.eBV(s).$implicit,d=e.XpG();return e.Njj(d.addToFavorites(i))}),e.k0s()(),e.j41(8,"ion-label",22),e.EFF(9),e.k0s()()}if(2&o){const s=p.$implicit;e.R7$(2),e.Y8G("src",s.image,e.B4B),e.R7$(4),e.SpI(" Dr. ",s.name," "),e.R7$(),e.Y8G("src",null!=s&&s.isFavorite?"assets/heartr.svg":"assets/icons/heart.svg",e.B4B),e.R7$(2),e.SpI(" ",s.medical_degree_and_specializtion," ")}}function I(o,p){if(1&o&&(e.j41(0,"ion-select-option",34),e.EFF(1),e.k0s()),2&o){const s=p.$implicit;e.Y8G("value",s),e.R7$(),e.JRh(s)}}function x(o,p){1&o&&e.nrm(0,"ion-icon",37)}function k(o,p){if(1&o){const s=e.RV6();e.j41(0,"ion-chip",4),e.bIt("click",function(){const i=e.eBV(s).$implicit,d=e.XpG(2);return e.Njj(d.selectReviewRating(i))}),e.j41(1,"div",35),e.DNE(2,x,1,0,"ion-icon",36),e.k0s(),e.j41(3,"span"),e.EFF(4," & up"),e.k0s()()}if(2&o){const s=p.$implicit;e.R7$(2),e.Y8G("ngForOf",e.lJ4(1,P).constructor(s))}}function O(o,p){if(1&o){const s=e.RV6();e.j41(0,"ion-header")(1,"ion-toolbar")(2,"div",23)(3,"ion-title",2),e.EFF(4,"Filter"),e.k0s(),e.j41(5,"ion-buttons",3)(6,"ion-button",24),e.bIt("click",function(){e.eBV(s);const i=e.XpG();return e.Njj(i.resetFilter())}),e.EFF(7,"Reset"),e.k0s(),e.j41(8,"ion-button",24),e.bIt("click",function(){e.eBV(s);const i=e.XpG();return e.Njj(i.dismissFilter())}),e.EFF(9,"Close"),e.k0s()()()()(),e.j41(10,"ion-content",7)(11,"ion-label",25),e.EFF(12,"Speciality"),e.k0s(),e.nrm(13,"br")(14,"br"),e.j41(15,"div",26)(16,"ion-select",27),e.mxI("ngModelChange",function(i){e.eBV(s);const d=e.XpG();return e.DH7(d.selectedSpeciality,i)||(d.selectedSpeciality=i),e.Njj(i)}),e.DNE(17,I,2,2,"ion-select-option",28),e.k0s()(),e.nrm(18,"br"),e.j41(19,"ion-label",29),e.EFF(20,"Reviews"),e.k0s(),e.j41(21,"div",30)(22,"div",31),e.DNE(23,k,5,2,"ion-chip",32),e.k0s()(),e.nrm(24,"br"),e.j41(25,"ion-button",33),e.bIt("click",function(){e.eBV(s);const i=e.XpG();return e.Njj(i.applyFilter())}),e.EFF(26,"Apply"),e.k0s()()}if(2&o){const s=e.XpG();e.R7$(16),e.R50("ngModel",s.selectedSpeciality),e.R7$(),e.Y8G("ngForOf",s.specialities),e.R7$(6),e.Y8G("ngForOf",s.reviewRatings)}}const E=[{path:"",component:(()=>{var o;class p{constructor(r,i,d,M,$,v){this.doctorService=r,this.navCtrl=i,this.providerService=d,this.authService=M,this.favService=$,this.toastController=v,this.viewType="grid",this.showFilterModal=!1,this.filterLayout="grid",this.selectedSpeciality=null,this.specialities=["Cardiologist","Dermatologist","Neurologist","Pediatrician"],this.reviewRatings=[1,2,3,4,5],this.selectedReviewRating=null,this.searchTerm="",this.doctors=[],this.loading=!0,this.filteredDoctors=[],this.error=null,this.type="doctors",this.providerName=null,this.isSearchVisible=!1}ngOnInit(){this.loadDoctors()}loadDoctors(){var r=this;return(0,f.A)(function*(){r.loading=!0,r.error=null;try{r.doctors=yield r.doctorService.getAllDoctors(),console.log("Doctors:",r.doctors);const i=yield r.providerService.getAllProviders2();console.log("Providers:",i);const d={};i.forEach(v=>{d[v.id]=v.name}),console.log("Provider Names Map:",d),r.doctors=r.doctors.map(v=>({...v,name:d[v.provider_id]||"Unknown Provider"})),console.log("Doctors with Provider Names:",r.doctors);const $=(yield r.authService.fetchProfileData()).id;r.favService.getFavsByPetOwnerId($).subscribe(v=>{const b=v.map(m=>m.provider_id);r.doctors.forEach(m=>{m.isFavorite=b.includes(m.provider_id)}),console.log("Doctors with Favorites:",r.doctors),r.filterDoctors()})}catch(i){r.error="Failed to load doctor data.",console.error(i)}finally{r.loading=!1}})()}openFilter(){this.showFilterModal=!0}openSearch(){this.isSearchVisible=!this.isSearchVisible}dismissFilter(){this.showFilterModal=!1}applyFilter(){this.viewType=this.filterLayout,this.dismissFilter(),this.filterDoctors()}resetFilter(){this.filterLayout="grid",this.selectedSpeciality=null,this.selectedReviewRating=null,this.searchTerm="",this.loadDoctors(),this.filterDoctors()}selectReviewRating(r){this.selectedReviewRating=r,this.filterDoctors()}filterDoctors(){this.filteredDoctors=""===this.searchTerm.trim()?this.doctors:this.doctors.filter(r=>{const i=!this.selectedSpeciality||r.medical_degree_and_specializtion===this.selectedSpeciality,d=(r.name||"").toLowerCase().includes(this.searchTerm.toLowerCase())||(r.medical_degree_and_specializtion||"").toLowerCase().includes(this.searchTerm.toLowerCase()),M=null===this.selectedReviewRating||void 0!==r.averageRating&&Math.round(r.averageRating)===this.selectedReviewRating;return i&&d&&M}),console.log("Filtered Doctors:",this.filteredDoctors)}onSearchInput(r){this.searchTerm=r.target.value,console.log("Search Term:",this.searchTerm),this.filterDoctors()}goToVetDetails(r){this.navCtrl.navigateForward(`/vetdetails/${this.type}/${r}`)}addToFavorites(r){var i=this;console.log("Provider ID being passed:",r.provider_id),this.authService.fetchProfileData().then(d=>{const M=d.id;this.favService.isProviderInFavorites(M,r.provider_id).subscribe($=>{$?this.favService.getFavsByPetOwnerId(M).subscribe(v=>{const b=v.find(m=>m.provider_id===r.provider_id);b&&void 0!==b.id&&this.favService.deleteFav(b.id).subscribe((0,f.A)(function*(){r.isFavorite=!1,console.log("Removed from favorites"),yield(0,F.P)(i.toastController,"Removed from favorites","danger")}),m=>{console.error("Error removing from favorites:",m)})}):this.favService.createFav({pet_owner_id:M,provider_id:r.provider_id}).subscribe((0,f.A)(function*(){r.isFavorite=!0,yield(0,F.P)(i.toastController,"Added to favorites","success"),console.log("Added to favorites",r)}),function(){var b=(0,f.A)(function*(m){console.error("Error adding to favorites:",m),yield(0,F.P)(i.toastController,"Error adding to favorites","danger")});return function(m){return b.apply(this,arguments)}}())})})}}return(o=p).\u0275fac=function(r){return new(r||o)(e.rXU(l),e.rXU(t.q9),e.rXU(a.$),e.rXU(h.u),e.rXU(D.L),e.rXU(g.K_))},o.\u0275cmp=e.VBU({type:o,selectors:[["app-drlist"]],decls:21,vars:3,consts:[["slot","start"],[1,"header-margin-Single-Line"],[1,"titleFont"],["slot","end"],[3,"click"],["src","/assets/icons/search.svg",1,"icon"],["src","assets/icons/filter.svg",1,"icon"],[1,"ion-padding"],[1,"ion-content-backup"],["debounce","300","placeholder","Search providers",3,"ngModel","ngModelChange","ionInput",4,"ngIf"],[1,"MakeItCenter"],[1,"MakeItAGride","gridContainer"],["class","singleCell","style","cursor: pointer;",4,"ngFor","ngForOf"],[1,"modal",3,"ionModalDidDismiss","isOpen"],["debounce","300","placeholder","Search providers",3,"ngModelChange","ionInput","ngModel"],[1,"singleCell",2,"cursor","pointer"],[1,"imgContainer"],["alt","Doctor Image",3,"click","src"],[1,"FlexSpaceInBetween"],[1,"titleContainer"],[1,"bodyFont","boldFont","vetClinicTitle"],["alt","Favorite Icon",1,"icon",3,"click","src"],[1,"bodyFont","smallFont","boldFont","specialityName"],[1,"filter-header"],[1,"bodyFont",3,"click"],[1,"bodyFont","speciality"],[1,"speciality-dropdown"],["placeholder","Select Speciality",1,"bodyFont",3,"ngModelChange","ngModel"],["class","bodyFont",3,"value",4,"ngFor","ngForOf"],[1,"bodyFont","review-label"],[1,"review"],[1,"review-options"],[3,"click",4,"ngFor","ngForOf"],["expand","block",1,"apply-button","bodyFont",3,"click"],[1,"bodyFont",3,"value"],[1,"stars"],["src","assets/icons/Star.svg","alt","star",4,"ngFor","ngForOf"],["src","assets/icons/Star.svg","alt","star"]],template:function(r,i){1&r&&(e.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",0),e.nrm(3,"ion-back-button"),e.k0s(),e.j41(4,"div",1)(5,"ion-label",2),e.EFF(6,"Doctors"),e.k0s()(),e.j41(7,"ion-buttons",3)(8,"ion-button",4),e.bIt("click",function(){return i.openSearch()}),e.nrm(9,"img",5),e.k0s(),e.j41(10,"ion-button",4),e.bIt("click",function(){return i.openFilter()}),e.nrm(11,"img",6),e.k0s()()()(),e.j41(12,"ion-content",7)(13,"div",8),e.DNE(14,w,1,1,"ion-searchbar",9),e.j41(15,"div",10)(16,"div")(17,"div",11),e.DNE(18,R,10,4,"div",12),e.k0s()()()(),e.j41(19,"ion-modal",13),e.bIt("ionModalDidDismiss",function(){return i.dismissFilter()}),e.DNE(20,O,27,3,"ng-template"),e.k0s()()),2&r&&(e.R7$(14),e.Y8G("ngIf",i.isSearchVisible),e.R7$(4),e.Y8G("ngForOf",i.filteredDoctors),e.R7$(),e.Y8G("isOpen",i.showFilterModal))},dependencies:[u.Sq,u.bT,n.BC,n.vS,g.Jm,g.QW,g.ZB,g.W9,g.eU,g.iq,g.he,g.S1,g.Nm,g.Ip,g.BC,g.ai,g.Sb,g.Je,g.Gw,g.el],styles:["ion-buttons[_ngcontent-%COMP%]{margin-top:20px}.icon[_ngcontent-%COMP%]{width:24px;height:auto}.ion-content-backup[_ngcontent-%COMP%]{padding:16px}.gridContainer[_ngcontent-%COMP%]{max-width:350px}.singleCell[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin:5px;padding:10px;border-radius:16px;background-color:var(--White)}.imgContainer[_ngcontent-%COMP%]{width:100%;height:50%;border-radius:16px;position:relative;overflow:hidden}.imgContainer[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;border-radius:16px;height:100%;object-fit:cover;object-position:center}.titleContainer[_ngcontent-%COMP%]{width:100%;margin-top:10px}.DrName[_ngcontent-%COMP%]{margin-bottom:3px}.specialityName[_ngcontent-%COMP%]{color:var(--Main-Two)!important}.grid-container[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);gap:10px}.list-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px}ion-card[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}ion-card-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}ion-card-title.grid-title[_ngcontent-%COMP%]{font-size:14px}ion-item[_ngcontent-%COMP%]{--padding-start: 0;--inner-padding-end: 0}ion-thumbnail[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:auto}ion-chip[selected][_ngcontent-%COMP%]{--background: var(--ion-color-primary);--color: #fff}.modal[_ngcontent-%COMP%]{--border-radius: 16px;--width: 100%;--height: 50%;position:flex;padding:0;margin:0}ion-content[_ngcontent-%COMP%]{--background: none;--padding-start: 0;--padding-end: 0}.filter-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:10px;border:none}.speciality-dropdown[_ngcontent-%COMP%]{--width: 80px;padding:5px;border-radius:16px;box-shadow:0 2px 5px #0000001a;margin-left:8px;margin-right:8px;border:1px solid #ddd}.speciality[_ngcontent-%COMP%], .review-label[_ngcontent-%COMP%]{padding:16px}.apply-button[_ngcontent-%COMP%]{--border-radius: 16px;--background: var(--Main-One);color:#fff!important;margin-left:8px;margin-right:8px;height:45px;font-size:large}.review[_ngcontent-%COMP%]{margin-left:8px;margin-right:8px}.review-options[_ngcontent-%COMP%]{display:flex;gap:10px;flex-wrap:wrap}ion-chip[_ngcontent-%COMP%]{display:flex;align-items:center;padding:5px 10px;border-radius:16px;background-color:var(--background-color)}ion-chip[_ngcontent-%COMP%]   .stars[_ngcontent-%COMP%]{display:flex}ion-chip[_ngcontent-%COMP%]   .stars[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:25px;height:25px;margin-right:2px}ion-chip[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-left:5px;font-size:14px;color:#666}"]}),p})()}];let U=(()=>{var o;class p{}return(o=p).\u0275fac=function(r){return new(r||o)},o.\u0275mod=e.$C({type:o}),o.\u0275inj=e.G2t({imports:[C.iI.forChild(E),C.iI]}),p})(),T=(()=>{var o;class p{}return(o=p).\u0275fac=function(r){return new(r||o)},o.\u0275mod=e.$C({type:o}),o.\u0275inj=e.G2t({imports:[u.MD,n.YN,g.bv,U]}),p})()},5822:(S,A,c)=>{c.d(A,{u:()=>F});var u=c(5841),n=c(496),g=c(878),C=c(315),f=c(6e3);n.A.defaults.withCredentials=!0;let F=(()=>{var e;class _{constructor(l){this.http=l,this.apiUrl=g.c.apiUrl}getCSRFToken(){return n.A.get(`${this.apiUrl}/sanctum/csrf-cookie`)}register(l){var t=this;return(0,u.A)(function*(){return yield t.getCSRFToken(),n.A.post(`${t.apiUrl}/api/register`,l).then(a=>(localStorage.setItem("token",a.data.token),a.data)).catch(a=>{throw console.error("Login error:",a),a})})()}checkEmail(l){return n.A.post(`${this.apiUrl}/api/check-email`,{email:l})}sendVerificationCode(l){return n.A.post(`${this.apiUrl}/api/send-verification-code`,{email:l})}verifyCode(l){return n.A.post(`${this.apiUrl}/api/verify-code`,l)}login(l){var t=this;return(0,u.A)(function*(){return yield t.getCSRFToken(),n.A.post(`${t.apiUrl}/api/login`,l).then(a=>(localStorage.setItem("token",a.data.token),a.data)).catch(a=>{throw console.error("Login error:",a),a})})()}logout(){const l=localStorage.getItem("token");return n.A.post(`${this.apiUrl}/api/logout`,{},{headers:{Authorization:`Bearer ${l}`}}).then(()=>{localStorage.removeItem("token")})}getProfile(){var l=this;return(0,u.A)(function*(){const t=localStorage.getItem("token");return(yield n.A.get(`${l.apiUrl}/api/petOwner/profile`,{headers:{Authorization:`Bearer ${t}`}})).data.data})()}fetchProfileData(){var l=this;return(0,u.A)(function*(){try{const t=yield l.getProfile();return console.log("Profile response:",t),t}catch(t){throw console.error("Error fetching profile:",t),t}})()}getPetOwnerData(l){const t=localStorage.getItem("token");return n.A.get(`${this.apiUrl}/api/pet_owner/${l}`,{headers:{Authorization:`Bearer ${t}`}})}fetchPetOwnerData(l){return console.log("th id in auth=====>",l),this.getPetOwnerData(l).then(t=>(console.log("pet owner data:",t),t.data.data)).catch(t=>{throw console.error("Error fetching pet owner:",t),t})}updateProfile(l,t){const a=localStorage.getItem("token");return n.A.put(`${this.apiUrl}/api/pet_owner/${t}`,l,{headers:{Authorization:`Bearer ${a}`}})}updateProfileImage(l,t){const a=localStorage.getItem("token");return n.A.post(`${this.apiUrl}/api/pet_owner/image/${t}`,l,{headers:{Authorization:`Bearer ${a}`}})}updatePass(l,t,a){var h=this;return(0,u.A)(function*(){const D=localStorage.getItem("token");try{return(yield n.A.put(`${h.apiUrl}/api/pet-owners/update-password`,{email:l,password:t,password_confirmation:a},{headers:{Authorization:`Bearer ${D}`}})).data}catch(P){throw console.error("Error updating password:",P),P}})()}}return(e=_).\u0275fac=function(l){return new(l||e)(C.KVO(f.Qq))},e.\u0275prov=C.jDH({token:e,factory:e.\u0275fac,providedIn:"root"}),_})()},8525:(S,A,c)=>{c.d(A,{$:()=>e});var u=c(5841),n=c(496),g=c(878),C=c(5109),f=c(6200),F=c(315);n.A.defaults.withCredentials=!0;let e=(()=>{var _;class y{constructor(){this.apiUrl=`${g.c.apiUrl}/api`,n.A.interceptors.request.use(t=>{const a=localStorage.getItem("token");return a&&(t.headers.Authorization=`Bearer ${a}`),t},t=>Promise.reject(t))}getAllProviders(){return n.A.get(`${this.apiUrl}/providers`)}getProviderById(t){return n.A.get(`${this.apiUrl}/providers/${t}`)}getProviderById2(t){return(0,C.H)(n.A.get(`${this.apiUrl}/providers/${t}`)).pipe((0,f.T)(a=>a.data))}createProvider(t){return n.A.post(`${this.apiUrl}/providers`,t)}getAllProviders2(){var t=this;return(0,u.A)(function*(){return n.A.get(`${t.apiUrl}/providers`).then(a=>a.data)})()}updateProvider(t,a){return n.A.put(`${this.apiUrl}/providers/${t}`,a)}deleteProvider(t){return n.A.delete(`${this.apiUrl}/providers/${t}`)}getServicesByProviderId(t){return n.A.get(`${this.apiUrl}/providers/${t}/services`)}getProductsByProviderId(t){return n.A.get(`${this.apiUrl}/providers/${t}/products`)}getVeterinariansByProviderId(t){return n.A.get(`${this.apiUrl}/providers/${t}/veterinarians`)}getVeterianById(t){return n.A.get(`${this.apiUrl}/veterinarians/${t}`)}getServiceById(t){return n.A.get(`${this.apiUrl}/services/${t}`)}getProductById(t){return n.A.get(`${this.apiUrl}/products/${t}`)}getServiceReviewsByServiceId(t){return n.A.get(`${this.apiUrl}/services/${t}/reviews`)}getPetOwnerById(t){return n.A.get(`${this.apiUrl}/pet_owners/${t}`)}getProductReviewsByProductId(t){return n.A.get(`${this.apiUrl}/products/${t}/reviews`)}getProviderByName(t){return(0,C.H)(n.A.get(`${this.apiUrl}/providers/name/${t}`))}addReview(t){var a=this;return(0,u.A)(function*(){try{console.log("Review data before sending:",t);const h=yield n.A.post(`${a.apiUrl}/reviews`,t);return console.log("Server response:",h.data),h.data}catch(h){throw console.error("Error adding review:",h),h}})()}getAverageRatingByProviderId(t){var a=this;return(0,u.A)(function*(){try{const D=(yield a.getServicesByProviderId(t)).data;let P=0,w=0;for(const I of D)(yield a.getServiceReviewsByServiceId(I.id)).data.forEach(O=>{w+=O.rate,P++});return P>0?w/P:0}catch(h){throw console.error("Error calculating average rating:",h),h}})()}getAverageRatingByProductId(t){var a=this;return(0,u.A)(function*(){try{const D=(yield n.A.get(`${a.apiUrl}/products/${t}/reviews`)).data;return 0===D.length?null:D.reduce((w,R)=>w+R.rate,0)/D.length}catch(h){throw console.error("Error fetching reviews:",h),h}})()}}return(_=y).\u0275fac=function(t){return new(t||_)},_.\u0275prov=F.jDH({token:_,factory:_.\u0275fac,providedIn:"root"}),y})()}}]);