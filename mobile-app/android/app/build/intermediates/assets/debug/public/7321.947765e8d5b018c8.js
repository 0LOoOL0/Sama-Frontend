"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[7321],{9702:(_,m,i)=>{i.r(m),i.d(m,{NewpasswordPageModule:()=>r});var w=i(9351),s=i(7199),l=i(7473),g=i(4170),f=i(5841),e=i(315),u=i(5822);const y=[{path:"",component:(()=>{var t;class p{constructor(a,n,d){this.authService=a,this.router=n,this.alertController=d,this.password="",this.confirmPassword="",this.showPassword=!1,this.showConfirmPassword=!1}ngOnInit(){}togglePasswordVisibility(){this.showPassword=!this.showPassword}toggleConfirmPasswordVisibility(){this.showConfirmPassword=!this.showConfirmPassword}updatePassword(){var a=this;return(0,f.A)(function*(){if(a.password!==a.confirmPassword)return void(yield a.showAlert("Passwords Not Matching","The password and its confirmation must be the same."));const n=localStorage.getItem("email");n?a.authService.updatePass(n,a.password,a.confirmPassword).then(d=>{console.log("Password updated successfully:",d.message),a.showAlert("Password Updated Successfully","Please login with your new password."),a.router.navigate(["/"])}).catch(d=>{console.error("Failed to update password:",d),alert("Failed to update password. Please try again.")}):yield a.showAlert("Email Not Found","Your email is lost try enter your email again.")})()}showAlert(a,n){var d=this;return(0,f.A)(function*(){yield(yield d.alertController.create({header:a,message:n,buttons:["OK"]})).present()})()}}return(t=p).\u0275fac=function(a){return new(a||t)(e.rXU(u.u),e.rXU(g.Ix),e.rXU(l.hG))},t.\u0275cmp=e.VBU({type:t,selectors:[["app-newpassword"]],decls:26,vars:6,consts:[["slot","start"],[1,"header-margin"],[1,"titleFont"],[1,"textGray","bodyFont"],[1,"ion-padding"],[1,"bodyFont","SmallMargin"],[1,"roundedInput"],["fill","solid","placeholder","Enter your password",1,"bodyFont","textGray",3,"ngModelChange","type","ngModel"],["slot","end",3,"click","name"],["fill","solid","placeholder","Enter your new password",1,"bodyFont","textGray",3,"ngModelChange","type","ngModel"],["expand","full","fill","clear",1,"FilledButtons",3,"click"]],template:function(a,n){1&a&&(e.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",0),e.nrm(3,"ion-back-button"),e.k0s(),e.j41(4,"div",1)(5,"ion-label",2),e.EFF(6,"New Password"),e.k0s(),e.j41(7,"p",3),e.EFF(8,"Please provide the following credentials."),e.k0s()()()(),e.j41(9,"ion-content",4)(10,"div",5),e.nrm(11,"br"),e.j41(12,"ion-label"),e.EFF(13,"Password"),e.k0s(),e.j41(14,"ion-item",6)(15,"ion-input",7),e.mxI("ngModelChange",function(h){return e.DH7(n.password,h)||(n.password=h),h}),e.k0s(),e.j41(16,"ion-icon",8),e.bIt("click",function(){return n.togglePasswordVisibility()}),e.k0s()(),e.nrm(17,"br"),e.j41(18,"ion-label"),e.EFF(19,"Confirm Password"),e.k0s(),e.j41(20,"ion-item",6)(21,"ion-input",9),e.mxI("ngModelChange",function(h){return e.DH7(n.confirmPassword,h)||(n.confirmPassword=h),h}),e.k0s(),e.j41(22,"ion-icon",8),e.bIt("click",function(){return n.toggleConfirmPasswordVisibility()}),e.k0s()()(),e.nrm(23,"br"),e.j41(24,"ion-button",10),e.bIt("click",function(){return n.updatePassword()}),e.EFF(25," Update passwords "),e.k0s()()),2&a&&(e.R7$(15),e.Y8G("type",n.showPassword?"text":"password"),e.R50("ngModel",n.password),e.R7$(),e.Y8G("name",n.showPassword?"eye-off-outline":"eye-outline"),e.R7$(5),e.Y8G("type",n.showConfirmPassword?"text":"password"),e.R50("ngModel",n.confirmPassword),e.R7$(),e.Y8G("name",n.showConfirmPassword?"eye-off-outline":"eye-outline"))},dependencies:[s.BC,s.vS,l.Jm,l.QW,l.W9,l.eU,l.iq,l.$w,l.uz,l.he,l.ai,l.Gw,l.el],styles:["p[_ngcontent-%COMP%]{padding-top:2px;margin:5px 32px 0 0;width:100%}ion-item[_ngcontent-%COMP%]{margin-top:10px}.SmallMargin[_ngcontent-%COMP%]{margin-bottom:15px}.SmallMargin[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{margin-left:16px;font-weight:600}"]}),p})()}];let o=(()=>{var t;class p{}return(t=p).\u0275fac=function(a){return new(a||t)},t.\u0275mod=e.$C({type:t}),t.\u0275inj=e.G2t({imports:[g.iI.forChild(y),g.iI]}),p})(),r=(()=>{var t;class p{}return(t=p).\u0275fac=function(a){return new(a||t)},t.\u0275mod=e.$C({type:t}),t.\u0275inj=e.G2t({imports:[w.MD,s.YN,l.bv,o]}),p})()},5822:(_,m,i)=>{i.d(m,{u:()=>e});var w=i(5841),s=i(496),l=i(878),g=i(315),f=i(6e3);s.A.defaults.withCredentials=!0;let e=(()=>{var u;class P{constructor(o){this.http=o,this.apiUrl=l.c.apiUrl}getCSRFToken(){return s.A.get(`${this.apiUrl}/sanctum/csrf-cookie`)}register(o){var r=this;return(0,w.A)(function*(){return yield r.getCSRFToken(),s.A.post(`${r.apiUrl}/api/register`,o).then(t=>(localStorage.setItem("token",t.data.token),t.data)).catch(t=>{throw console.error("Login error:",t),t})})()}checkEmail(o){return s.A.post(`${this.apiUrl}/api/check-email`,{email:o})}sendVerificationCode(o){return s.A.post(`${this.apiUrl}/api/send-verification-code`,{email:o})}verifyCode(o){return s.A.post(`${this.apiUrl}/api/verify-code`,o)}login(o){var r=this;return(0,w.A)(function*(){return yield r.getCSRFToken(),s.A.post(`${r.apiUrl}/api/login`,o).then(t=>(localStorage.setItem("token",t.data.token),t.data)).catch(t=>{throw console.error("Login error:",t),t})})()}logout(){const o=localStorage.getItem("token");return s.A.post(`${this.apiUrl}/api/logout`,{},{headers:{Authorization:`Bearer ${o}`}}).then(()=>{localStorage.removeItem("token")})}getProfile(){var o=this;return(0,w.A)(function*(){const r=localStorage.getItem("token");return(yield s.A.get(`${o.apiUrl}/api/petOwner/profile`,{headers:{Authorization:`Bearer ${r}`}})).data.data})()}fetchProfileData(){var o=this;return(0,w.A)(function*(){try{const r=yield o.getProfile();return console.log("Profile response:",r),r}catch(r){throw console.error("Error fetching profile:",r),r}})()}getPetOwnerData(o){const r=localStorage.getItem("token");return s.A.get(`${this.apiUrl}/api/pet_owner/${o}`,{headers:{Authorization:`Bearer ${r}`}})}fetchPetOwnerData(o){return console.log("th id in auth=====>",o),this.getPetOwnerData(o).then(r=>(console.log("pet owner data:",r),r.data.data)).catch(r=>{throw console.error("Error fetching pet owner:",r),r})}updateProfile(o,r){const t=localStorage.getItem("token");return s.A.put(`${this.apiUrl}/api/pet_owner/${r}`,o,{headers:{Authorization:`Bearer ${t}`}})}updateProfileImage(o,r){const t=localStorage.getItem("token");return s.A.post(`${this.apiUrl}/api/pet_owner/image/${r}`,o,{headers:{Authorization:`Bearer ${t}`}})}updatePass(o,r,t){var p=this;return(0,w.A)(function*(){const c=localStorage.getItem("token");try{return(yield s.A.put(`${p.apiUrl}/api/pet-owners/update-password`,{email:o,password:r,password_confirmation:t},{headers:{Authorization:`Bearer ${c}`}})).data}catch(a){throw console.error("Error updating password:",a),a}})()}}return(u=P).\u0275fac=function(o){return new(o||u)(g.KVO(f.Qq))},u.\u0275prov=g.jDH({token:u,factory:u.\u0275fac,providedIn:"root"}),P})()}}]);