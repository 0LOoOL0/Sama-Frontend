"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[8871],{8871:($,p,s)=>{s.r(p),s.d(p,{DrprofilePageModule:()=>f});var v=s(9351),n=s(7199),l=s(7473),c=s(4170),r=s(315),h=s(8525);const d=[{path:"",component:(()=>{var e;class i{constructor(a,t){this.activatedRoute=a,this.providerService=t}ngOnInit(){this.veterinarianId=+this.activatedRoute.snapshot.paramMap.get("id"),this.veterinarianId&&this.loadVeterinarians(this.veterinarianId)}loadVeterinarians(a){this.providerService.getVeterianById(a).then(t=>{this.veterinarian=Array.isArray(t.data)?t.data[0]:t.data}).catch(t=>{console.error("Error fetching veterinarian details:",t)})}}return(e=i).\u0275fac=function(a){return new(a||e)(r.rXU(c.nX),r.rXU(h.$))},e.\u0275cmp=r.VBU({type:e,selectors:[["app-drprofile"]],decls:31,vars:6,consts:[["slot","start"],[1,"header-margin-Single-Line"],[1,"titleFont"],[1,"ion-padding"],[1,"profile-container"],[1,"profile-image"],["alt","Doctor Profile Image",3,"src"],[1,"bodyFont","boldFont"],[1,"bodyFont"],[1,"info-container"],[1,"info-item"],[1,"bodyFont","info-box"],[1,"bio-container"]],template:function(a,t){1&a&&(r.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",0),r.nrm(3,"ion-back-button"),r.k0s(),r.j41(4,"div",1)(5,"ion-title",2),r.EFF(6,"Doctor's Biography"),r.k0s()()()(),r.j41(7,"ion-content",3)(8,"div",4)(9,"ion-avatar",5),r.nrm(10,"img",6),r.k0s(),r.j41(11,"h2",7),r.EFF(12),r.k0s(),r.j41(13,"p",8),r.EFF(14),r.k0s()(),r.j41(15,"div",9)(16,"div",10)(17,"p",7),r.EFF(18,"Education"),r.k0s(),r.j41(19,"p",11),r.EFF(20),r.k0s()(),r.j41(21,"div",10)(22,"p",7),r.EFF(23,"Years of experience"),r.k0s(),r.j41(24,"p",11),r.EFF(25),r.k0s()()(),r.j41(26,"h3",7),r.EFF(27,"Bio"),r.k0s(),r.j41(28,"div",12)(29,"p",8),r.EFF(30),r.k0s()()()),2&a&&(r.R7$(10),r.FS9("src",null==t.veterinarian?null:t.veterinarian.picture,r.B4B),r.R7$(2),r.SpI("Dr. ",null==t.veterinarian?null:t.veterinarian.name,""),r.R7$(2),r.JRh(null==t.veterinarian?null:t.veterinarian.specialization),r.R7$(6),r.JRh(null==t.veterinarian?null:t.veterinarian.education),r.R7$(5),r.JRh(null==t.veterinarian?null:t.veterinarian.years_of_experience),r.R7$(5),r.SpI(" ",null==t.veterinarian?null:t.veterinarian.bio," "))},dependencies:[l.mC,l.QW,l.W9,l.eU,l.BC,l.ai,l.el],styles:["ion-buttons[_ngcontent-%COMP%]{margin-top:20px}.profile-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;text-align:center;padding:20px 0}.profile-image[_ngcontent-%COMP%]{box-shadow:-10px 10px 20px #0000001a;width:120px;height:120px;border-radius:50%;overflow:hidden;margin-bottom:10px}.info-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:5px}.info-item[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between}.info-item[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-right:5px}.info-item[_ngcontent-%COMP%]   .info-box[_ngcontent-%COMP%], .bio-container[_ngcontent-%COMP%]{padding:10px;background-color:#fff;border-radius:16px}h2[_ngcontent-%COMP%]{font-size:24px;margin-bottom:5px}p[_ngcontent-%COMP%]{font-size:16px;margin:5px 0}h3[_ngcontent-%COMP%]{font-size:18px;margin-bottom:10px}"]}),i})()}];let g=(()=>{var e;class i{}return(e=i).\u0275fac=function(a){return new(a||e)},e.\u0275mod=r.$C({type:e}),e.\u0275inj=r.G2t({imports:[c.iI.forChild(d),c.iI]}),i})(),f=(()=>{var e;class i{}return(e=i).\u0275fac=function(a){return new(a||e)},e.\u0275mod=r.$C({type:e}),e.\u0275inj=r.G2t({imports:[v.MD,n.YN,l.bv,g]}),i})()},8525:($,p,s)=>{s.d(p,{$:()=>P});var v=s(5841),n=s(496),l=s(878),c=s(5109),r=s(6200),h=s(315);n.A.defaults.withCredentials=!0;let P=(()=>{var d;class g{constructor(){this.apiUrl=`${l.c.apiUrl}/api`,n.A.interceptors.request.use(e=>{const i=localStorage.getItem("token");return i&&(e.headers.Authorization=`Bearer ${i}`),e},e=>Promise.reject(e))}getAllProviders(){return n.A.get(`${this.apiUrl}/providers`)}getProviderById(e){return n.A.get(`${this.apiUrl}/providers/${e}`)}getProviderById2(e){return(0,c.H)(n.A.get(`${this.apiUrl}/providers/${e}`)).pipe((0,r.T)(i=>i.data))}createProvider(e){return n.A.post(`${this.apiUrl}/providers`,e)}getAllProviders2(){var e=this;return(0,v.A)(function*(){return n.A.get(`${e.apiUrl}/providers`).then(i=>i.data)})()}updateProvider(e,i){return n.A.put(`${this.apiUrl}/providers/${e}`,i)}deleteProvider(e){return n.A.delete(`${this.apiUrl}/providers/${e}`)}getServicesByProviderId(e){return n.A.get(`${this.apiUrl}/providers/${e}/services`)}getProductsByProviderId(e){return n.A.get(`${this.apiUrl}/providers/${e}/products`)}getVeterinariansByProviderId(e){return n.A.get(`${this.apiUrl}/providers/${e}/veterinarians`)}getVeterianById(e){return n.A.get(`${this.apiUrl}/veterinarians/${e}`)}getServiceById(e){return n.A.get(`${this.apiUrl}/services/${e}`)}getProductById(e){return n.A.get(`${this.apiUrl}/products/${e}`)}getServiceReviewsByServiceId(e){return n.A.get(`${this.apiUrl}/services/${e}/reviews`)}getPetOwnerById(e){return n.A.get(`${this.apiUrl}/pet_owners/${e}`)}getProductReviewsByProductId(e){return n.A.get(`${this.apiUrl}/products/${e}/reviews`)}getProviderByName(e){return(0,c.H)(n.A.get(`${this.apiUrl}/providers/name/${e}`))}addReview(e){var i=this;return(0,v.A)(function*(){try{console.log("Review data before sending:",e);const o=yield n.A.post(`${i.apiUrl}/reviews`,e);return console.log("Server response:",o.data),o.data}catch(o){throw console.error("Error adding review:",o),o}})()}getAverageRatingByProviderId(e){var i=this;return(0,v.A)(function*(){try{const a=(yield i.getServicesByProviderId(e)).data;let t=0,u=0;for(const y of a)(yield i.getServiceReviewsByServiceId(y.id)).data.forEach(R=>{u+=R.rate,t++});return t>0?u/t:0}catch(o){throw console.error("Error calculating average rating:",o),o}})()}getAverageRatingByProductId(e){var i=this;return(0,v.A)(function*(){try{const a=(yield n.A.get(`${i.apiUrl}/products/${e}/reviews`)).data;return 0===a.length?null:a.reduce((u,m)=>u+m.rate,0)/a.length}catch(o){throw console.error("Error fetching reviews:",o),o}})()}}return(d=g).\u0275fac=function(e){return new(e||d)},d.\u0275prov=h.jDH({token:d,factory:d.\u0275fac,providedIn:"root"}),g})()}}]);