"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[5458],{5822:(A,g,l)=>{l.d(g,{u:()=>e});var h=l(5841),n=l(496),s=l(878),f=l(315),p=l(6e3);n.A.defaults.withCredentials=!0;let e=(()=>{var u;class y{constructor(r){this.http=r,this.apiUrl=s.c.apiUrl}getCSRFToken(){return n.A.get(`${this.apiUrl}/sanctum/csrf-cookie`)}register(r){var o=this;return(0,h.A)(function*(){return yield o.getCSRFToken(),n.A.post(`${o.apiUrl}/api/register`,r).then(t=>(localStorage.setItem("token",t.data.token),t.data)).catch(t=>{throw console.error("Login error:",t),t})})()}checkEmail(r){return n.A.post(`${this.apiUrl}/api/check-email`,{email:r})}sendVerificationCode(r){return n.A.post(`${this.apiUrl}/api/send-verification-code`,{email:r})}verifyCode(r){return n.A.post(`${this.apiUrl}/api/verify-code`,r)}login(r){var o=this;return(0,h.A)(function*(){return yield o.getCSRFToken(),n.A.post(`${o.apiUrl}/api/login`,r).then(t=>(localStorage.setItem("token",t.data.token),t.data)).catch(t=>{throw console.error("Login error:",t),t})})()}logout(){const r=localStorage.getItem("token");return n.A.post(`${this.apiUrl}/api/logout`,{},{headers:{Authorization:`Bearer ${r}`}}).then(()=>{localStorage.removeItem("token")})}getProfile(){var r=this;return(0,h.A)(function*(){const o=localStorage.getItem("token");return(yield n.A.get(`${r.apiUrl}/api/petOwner/profile`,{headers:{Authorization:`Bearer ${o}`}})).data.data})()}fetchProfileData(){var r=this;return(0,h.A)(function*(){try{const o=yield r.getProfile();return console.log("Profile response:",o),o}catch(o){throw console.error("Error fetching profile:",o),o}})()}getPetOwnerData(r){const o=localStorage.getItem("token");return n.A.get(`${this.apiUrl}/api/pet_owner/${r}`,{headers:{Authorization:`Bearer ${o}`}})}fetchPetOwnerData(r){return console.log("th id in auth=====>",r),this.getPetOwnerData(r).then(o=>(console.log("pet owner data:",o),o.data.data)).catch(o=>{throw console.error("Error fetching pet owner:",o),o})}updateProfile(r,o){const t=localStorage.getItem("token");return n.A.put(`${this.apiUrl}/api/pet_owner/${o}`,r,{headers:{Authorization:`Bearer ${t}`}})}updateProfileImage(r,o){const t=localStorage.getItem("token");return n.A.post(`${this.apiUrl}/api/pet_owner/image/${o}`,r,{headers:{Authorization:`Bearer ${t}`}})}updatePass(r,o,t){var c=this;return(0,h.A)(function*(){const d=localStorage.getItem("token");try{return(yield n.A.put(`${c.apiUrl}/api/pet-owners/update-password`,{email:r,password:o,password_confirmation:t},{headers:{Authorization:`Bearer ${d}`}})).data}catch(i){throw console.error("Error updating password:",i),i}})()}}return(u=y).\u0275fac=function(r){return new(r||u)(f.KVO(p.Qq))},u.\u0275prov=f.jDH({token:u,factory:u.\u0275fac,providedIn:"root"}),y})()},5458:(A,g,l)=>{l.r(g),l.d(g,{VerifyEmailPageModule:()=>o});var h=l(9351),n=l(7199),s=l(7473),f=l(4170),p=l(5841),e=l(315),u=l(5822);const v=[{path:"",component:(()=>{var t;class c{constructor(i,a,m,E,P){this.formBuilder=i,this.router=a,this.activatedRoute=m,this.authService=E,this.alertController=P}ngOnInit(){this.type=this.activatedRoute.snapshot.paramMap.get("type"),this.verifyForm=this.formBuilder.group({verificationCode:["",[n.k0.required,n.k0.minLength(6),n.k0.maxLength(6)]]})}verify(){var i=this;return(0,p.A)(function*(){if(!i.verifyForm.invalid)try{const a=localStorage.getItem("email"),m=yield i.authService.verifyCode({...i.verifyForm.value,email:a});console.log(m.data),"register"===i.type?i.router.navigate(["/profile-setup"]):"forgotpass"===i.type&&i.router.navigate(["/newpassword"])}catch(a){console.error(a.response.data),yield i.showAlert("Verification Failed","The verification code is invalid or has expired.")}})()}resendCode(){var i=this;return(0,p.A)(function*(){try{const a=localStorage.getItem("email");a&&(yield i.authService.sendVerificationCode(a),yield i.showAlert("Code Resent","A new verification code has been sent to your email."))}catch(a){console.error(a.response.data),yield i.showAlert("Error","There was an issue sending the verification code. Please try again.")}})()}showAlert(i,a){var m=this;return(0,p.A)(function*(){yield(yield m.alertController.create({header:i,message:a,buttons:["OK"]})).present()})()}}return(t=c).\u0275fac=function(i){return new(i||t)(e.rXU(n.ok),e.rXU(f.Ix),e.rXU(f.nX),e.rXU(u.u),e.rXU(s.hG))},t.\u0275cmp=e.VBU({type:t,selectors:[["app-verify-email"]],decls:21,vars:2,consts:[["slot","start"],[1,"header-margin"],[1,"titleFont"],[1,"ion-padding"],[3,"ngSubmit","formGroup"],[1,"bodyFont","SmallMargin"],[1,"roundedInput"],["fill","solid","placeholder","Enter Verification Code","type","number","formControlName","verificationCode","required","",1,"bodyFont","textGray"],["expand","full","fill","clear","type","submit",1,"FilledButtons",3,"disabled"],["expand","full","fill","clear",1,"FilledButtons",3,"click"]],template:function(i,a){1&i&&(e.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",0),e.nrm(3,"ion-back-button"),e.k0s(),e.j41(4,"div",1)(5,"ion-label",2),e.EFF(6,"Verify your email"),e.k0s()()()(),e.nrm(7,"br"),e.j41(8,"ion-content",3)(9,"form",4),e.bIt("ngSubmit",function(){return a.verify()}),e.j41(10,"div",5)(11,"ion-label"),e.EFF(12,"Verification Code"),e.k0s(),e.j41(13,"ion-item",6),e.nrm(14,"ion-input",7),e.k0s()(),e.nrm(15,"br"),e.j41(16,"ion-button",8),e.EFF(17,"Verify"),e.k0s()(),e.nrm(18,"br"),e.j41(19,"ion-button",9),e.bIt("click",function(){return a.resendCode()}),e.EFF(20,"Resend Code"),e.k0s()()),2&i&&(e.R7$(9),e.Y8G("formGroup",a.verifyForm),e.R7$(7),e.Y8G("disabled",a.verifyForm.invalid))},dependencies:[n.qT,n.BC,n.cb,n.YS,s.Jm,s.QW,s.W9,s.eU,s.$w,s.uz,s.he,s.ai,s.su,s.el,n.j4,n.JD],styles:["ion-item[_ngcontent-%COMP%]{margin-top:10px}.SmallMargin[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{margin-left:16px;font-weight:600}"]}),c})()}];let r=(()=>{var t;class c{}return(t=c).\u0275fac=function(i){return new(i||t)},t.\u0275mod=e.$C({type:t}),t.\u0275inj=e.G2t({imports:[f.iI.forChild(v),f.iI]}),c})(),o=(()=>{var t;class c{}return(t=c).\u0275fac=function(i){return new(i||t)},t.\u0275mod=e.$C({type:t}),t.\u0275inj=e.G2t({imports:[h.MD,n.YN,s.bv,r,n.X1]}),c})()}}]);