"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[8673],{8673:(w,m,c)=>{c.r(m),c.d(m,{NotificationPageModule:()=>k});var p=c(9351),y=c(7199),d=c(7473),u=c(4170),h=c(5841),t=c(315),P=c(8525),F=c(990),M=c(5110),O=c(5822),x=c(1572);function N(n,r){if(1&n&&(t.j41(0,"ion-card",8)(1,"ion-card-content")(2,"ion-label",9),t.EFF(3),t.k0s(),t.j41(4,"p"),t.qSk(),t.j41(5,"svg",10),t.nrm(6,"path",11),t.k0s(),t.EFF(7),t.k0s()()()),2&n){const i=r.$implicit;t.R7$(3),t.JRh(i.title),t.R7$(4),t.Lme(" ",i.date," | ",i.time," ")}}function b(n,r){1&n&&(t.j41(0,"ion-card",8)(1,"ion-card-content")(2,"ion-text"),t.EFF(3,"No events today"),t.k0s()()())}function C(n,r){if(1&n&&(t.j41(0,"ion-card")(1,"ion-card-content")(2,"ion-label",9),t.EFF(3),t.k0s(),t.nrm(4,"br"),t.j41(5,"p"),t.qSk(),t.j41(6,"svg",10),t.nrm(7,"path",11),t.k0s(),t.EFF(8),t.k0s()()()),2&n){const i=r.$implicit;t.R7$(3),t.JRh(i.title),t.R7$(5),t.Lme(" ",i.date," | ",i.time," ")}}function D(n,r){if(1&n&&(t.j41(0,"div",8)(1,"ion-label",5),t.EFF(2),t.k0s(),t.DNE(3,C,9,3,"ion-card",12),t.k0s()),2&n){const i=r.$implicit,e=t.XpG();t.R7$(2),t.JRh(e.formatDate(i.date)),t.R7$(),t.Y8G("ngForOf",i.events)}}const $=[{path:"",component:(()=>{var n;class r{constructor(e,o,a,s,l,g,f){this.activatedRoute=e,this.providerService=o,this.reminderService=a,this.navCtrl=s,this.toastController=l,this.authService=g,this.petInfoService=f,this.groupedEvents=[],this.todayEvents=[],this.today=(new Date).toISOString().split("T")[0],this.petOwnerId=0,this.petEvents=[],this.timeSlots=["09:00","09:30","10:00","10:30","11:00","11:30","03:00","03:30","04:00","04:30","05:00","05:30"]}ngOnInit(){var e=this;return(0,h.A)(function*(){try{const o=yield e.authService.getProfile();e.petOwnerId=o.id,e.fetchRemindersByOwnerId(e.petOwnerId)}catch(o){console.error("Error fetching profile data:",o)}})()}fetchRemindersByPetId(e){var o=this;return(0,h.A)(function*(){try{const a=yield o.reminderService.getRemindersByPetId(e);o.petEvents=a.data,o.groupEventsByDate(),console.log("Grouped Events:",o.petEvents)}catch(a){console.error("Error fetching reminders:",a)}})()}groupEventsByDate(){var e;const o=new Map,a=new Date;this.petEvents.forEach(s=>{const l=new Date(s.date),[g,f,E]=s.time.split(":").map(Number);if(l.setHours(g,f,E),console.log("Processing event:",s,"Event Date and Time:",l,"Current Date and Time:",a),l.getTime()-a.getTime()<=54e5){const v=l.toISOString().split("T")[0];o.has(v)||o.set(v,[]),o.get(v).push(s)}else console.log("Event is more than 1.5 hours ahead, skipping:",s)}),this.groupedEvents=Array.from(o,([s,l])=>({date:s,events:l})),console.log("Grouped Events:",this.groupedEvents),this.todayEvents=(null===(e=this.groupedEvents.find(s=>s.date===this.today))||void 0===e?void 0:e.events)||[],console.log("Today's Events:",this.todayEvents)}fetchRemindersByOwnerId(e){var o=this;return(0,h.A)(function*(){try{const a=yield o.reminderService.getRemindersByOwnerId(e);o.petEvents=a.data,o.groupEventsByDate(),console.log("Grouped Events:",o.petEvents)}catch(a){console.error("Error fetching reminders:",a)}})()}formatDate(e){const[o,a,s]=e.split("-").map(Number),l=new Date(o,a-1,s);return`${this.getDayWithSuffix(s)} ${l.toLocaleDateString("en-GB",{month:"long",year:"numeric"})}`}getDayWithSuffix(e){if(e>=11&&e<=13)return`${e}th`;switch(e%10){case 1:return`${e}st`;case 2:return`${e}nd`;case 3:return`${e}rd`;default:return`${e}th`}}}return(n=r).\u0275fac=function(e){return new(e||n)(t.rXU(u.nX),t.rXU(P.$),t.rXU(F.s),t.rXU(M.q9),t.rXU(d.K_),t.rXU(O.u),t.rXU(x.d))},n.\u0275cmp=t.VBU({type:n,selectors:[["app-notification"]],decls:14,vars:3,consts:[["slot","start"],["defaultHref","/"],[1,"centered-title","titleFont"],[1,"ion-padding","bodyFont"],[1,"group-titel"],[1,"date","boldFont","bodyFont"],["class","content",4,"ngFor","ngForOf"],["class","content",4,"ngIf"],[1,"content"],[1,"boldFont","bodyFont"],["width","19","height","18","viewBox","0 0 19 18","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M12.5 2.25V5.25M6.5 2.25V5.25M3.5 8.25H15.5M5 3.75H14C14.8284 3.75 15.5 4.42157 15.5 5.25V14.25C15.5 15.0784 14.8284 15.75 14 15.75H5C4.17157 15.75 3.5 15.0784 3.5 14.25V5.25C3.5 4.42157 4.17157 3.75 5 3.75Z","stroke","#B3BECD","stroke-width","1.5","stroke-linecap","round","stroke-linejoin","round"],[4,"ngFor","ngForOf"]],template:function(e,o){1&e&&(t.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",0),t.nrm(3,"ion-back-button",1),t.k0s(),t.j41(4,"ion-label",2),t.EFF(5,"Notification"),t.k0s()()(),t.j41(6,"ion-content",3)(7,"div",4)(8,"ion-label",5),t.EFF(9,"Today"),t.k0s(),t.DNE(10,N,8,3,"ion-card",6)(11,b,4,0,"ion-card",7),t.k0s(),t.j41(12,"div",4),t.DNE(13,D,4,2,"div",6),t.k0s()()),2&e&&(t.R7$(10),t.Y8G("ngForOf",o.todayEvents),t.R7$(),t.Y8G("ngIf",0===o.todayEvents.length),t.R7$(2),t.Y8G("ngForOf",o.groupedEvents))},dependencies:[p.Sq,p.bT,d.QW,d.b_,d.I9,d.W9,d.eU,d.he,d.IO,d.ai,d.el],styles:[".centered-title[_ngcontent-%COMP%]{position:fixed;top:10px;left:50%;transform:translate(-50%)}ion-card[_ngcontent-%COMP%]{border-radius:16px;box-shadow:0 4px 6px #0000001a;margin:8px 0;--background: var(--White)}ion-card[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{--border-color: #e0e0e0;margin:5px;padding:1px;border-radius:16px;box-shadow:0 2px 4px #0000001a,0 4px 8px #0000001a}ion-list[_ngcontent-%COMP%]{--background:var( --background-color)}ion-card-content[_ngcontent-%COMP%]{display:flex;--background: var(--White);flex-direction:column;--ion-item-border-width: 0;--ion-item-border-color: transparent}ion-card-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{display:flex;align-items:center;color:var(--ion-color-medium);--ion-item-border-width: 0;--ion-item-border-color: transparent}ion-card-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   .group-titel[_ngcontent-%COMP%]{--background:var( --background-color);font-weight:700;margin:15px 16px 16px}.date[_ngcontent-%COMP%]{margin-left:5px}"]}),r})()}];let R=(()=>{var n;class r{}return(n=r).\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.$C({type:n}),n.\u0275inj=t.G2t({imports:[u.iI.forChild($),u.iI]}),r})(),k=(()=>{var n;class r{}return(n=r).\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.$C({type:n}),n.\u0275inj=t.G2t({imports:[p.MD,y.YN,d.bv,R]}),r})()}}]);