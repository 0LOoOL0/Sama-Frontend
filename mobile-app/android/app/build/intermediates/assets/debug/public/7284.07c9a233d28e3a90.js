"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[7284],{7284:(k,f,l)=>{l.r(f),l.d(f,{CreateYourAccountPageModule:()=>n});var h=l(9351),a=l(7199),s=l(7473),p=l(4170),m=l(5841),e=l(315),g=l(5822);const A=[{path:"",component:(()=>{var t;class u{constructor(o,i,c,C){this.formBuilder=o,this.router=i,this.authService=c,this.alertController=C,this.emailChecking=!1}ngOnInit(){var o=this;this.registerForm=this.formBuilder.group({email:["",[a.k0.required,a.k0.email]],password:["",[a.k0.required,a.k0.minLength(8)]]}),this.registerForm.get("email").valueChanges.subscribe(function(){var i=(0,m.A)(function*(c){o.registerForm.get("email").valid&&(o.emailChecking=!0,yield o.checkEmail(c),o.emailChecking=!1)});return function(c){return i.apply(this,arguments)}}())}checkEmail(o){var i=this;return(0,m.A)(function*(){try{(yield i.authService.checkEmail(o)).data.exists&&(yield i.showAlert("Email Already Registered","The email address is already registered. Please use a different email or login."),i.registerForm.get("email").setErrors({emailExists:!0}))}catch(c){console.error(c.response.data)}})()}showAlert(o,i){var c=this;return(0,m.A)(function*(){yield(yield c.alertController.create({header:o,message:i,buttons:["OK"]})).present()})()}register(){var o=this;return(0,m.A)(function*(){for(;o.emailChecking;)yield new Promise(i=>setTimeout(i,100));if(!o.registerForm.invalid)try{yield o.authService.getCSRFToken();const{email:i,password:c}=o.registerForm.value;localStorage.setItem("email",i),localStorage.setItem("password",c),yield o.authService.sendVerificationCode(i),o.router.navigate(["/verify-email","register"])}catch(i){console.error(i.response.data)}})()}}return(t=u).\u0275fac=function(o){return new(o||t)(e.rXU(a.ok),e.rXU(p.Ix),e.rXU(g.u),e.rXU(s.hG))},t.\u0275cmp=e.VBU({type:t,selectors:[["app-create-your-account"]],decls:42,vars:2,consts:[["slot","start"],[1,"header-margin"],[1,"titleFont"],[1,"textGray","bodyFont"],[1,"ion-padding"],[3,"ngSubmit","formGroup"],[1,"bodyFont","SmallMargin"],[1,"roundedInput"],["fill","solid","placeholder","Enter your email","type","email","formControlName","email","required","",1,"bodyFont","textGray"],["fill","solid","placeholder","Enter your password","type","password","formControlName","password","required","",1,"bodyFont","textGray"],["expand","full","fill","clear","type","submit",1,"FilledButtons",3,"disabled"],["routerLink","/",1,"logIn"],[1,"logInButtons"],["expand","full","fill","clear","id","Facebook"],["slot","icon-only","src","assets/icons/facebook.svg"],["expand","full","fill","clear","id","Google"],["slot","icon-only","src","assets/icons/google.svg"],["expand","full","fill","clear","id","Apple"],["slot","icon-only","src","assets/icons/apple.svg"]],template:function(o,i){1&o&&(e.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",0),e.nrm(3,"ion-back-button"),e.k0s(),e.j41(4,"div",1)(5,"ion-label",2),e.EFF(6,"Create your account"),e.k0s(),e.j41(7,"p",3),e.EFF(8,"Please provide the following credentials."),e.k0s()()()(),e.nrm(9,"br"),e.j41(10,"ion-content",4)(11,"form",5),e.bIt("ngSubmit",function(){return i.register()}),e.j41(12,"div",6)(13,"ion-label"),e.EFF(14,"Email"),e.k0s(),e.j41(15,"ion-item",7),e.nrm(16,"ion-input",8),e.k0s(),e.nrm(17,"br"),e.j41(18,"ion-label"),e.EFF(19,"Password"),e.k0s(),e.j41(20,"ion-item",7),e.nrm(21,"ion-input",9),e.k0s(),e.nrm(22,"br")(23,"br"),e.k0s(),e.j41(24,"ion-button",10),e.EFF(25," Create Account "),e.k0s()(),e.j41(26,"ion-label",3),e.EFF(27," Already have an account? "),e.j41(28,"span",11),e.EFF(29,"Login Now"),e.k0s()(),e.j41(30,"div",12),e.nrm(31,"br")(32,"br"),e.j41(33,"ion-button",13),e.nrm(34,"ion-icon",14),e.EFF(35," Sign up with Facebook "),e.k0s(),e.j41(36,"ion-button",15),e.nrm(37,"ion-icon",16),e.EFF(38," Sign up with google "),e.k0s(),e.j41(39,"ion-button",17),e.nrm(40,"ion-icon",18),e.EFF(41," Sign up with apple "),e.k0s()()()),2&o&&(e.R7$(11),e.Y8G("formGroup",i.registerForm),e.R7$(13),e.Y8G("disabled",i.registerForm.invalid))},dependencies:[a.qT,a.BC,a.cb,a.YS,s.Jm,s.QW,s.W9,s.eU,s.iq,s.$w,s.uz,s.he,s.ai,s.Gw,s.el,s.N7,p.Wk,a.j4,a.JD],styles:["p[_ngcontent-%COMP%]{padding-top:2px;margin:5px 32px 0 0;width:100%}ion-item[_ngcontent-%COMP%]{margin-top:10px}.SmallMargin[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{margin-left:16px;font-weight:600}.logIn[_ngcontent-%COMP%]{color:var(--Main-One);font-weight:600}.logInButtons[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;width:100%}.logInButtons[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{width:90%;border-radius:16px}.logInButtons[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{margin-right:10px}#Facebook[_ngcontent-%COMP%]{background-color:#3975ea;color:var(--white)}#Google[_ngcontent-%COMP%]{background-color:#fffffe;color:var(--Black)}#Apple[_ngcontent-%COMP%]{background-color:var(--Black);color:#fffffe}"]}),u})()}];let r=(()=>{var t;class u{}return(t=u).\u0275fac=function(o){return new(o||t)},t.\u0275mod=e.$C({type:t}),t.\u0275inj=e.G2t({imports:[p.iI.forChild(A),p.iI]}),u})(),n=(()=>{var t;class u{}return(t=u).\u0275fac=function(o){return new(o||t)},t.\u0275mod=e.$C({type:t}),t.\u0275inj=e.G2t({imports:[h.MD,a.YN,s.bv,r,a.X1]}),u})()},5822:(k,f,l)=>{l.d(f,{u:()=>e});var h=l(5841),a=l(496),s=l(878),p=l(315),m=l(6e3);a.A.defaults.withCredentials=!0;let e=(()=>{var g;class v{constructor(r){this.http=r,this.apiUrl=s.c.apiUrl}getCSRFToken(){return a.A.get(`${this.apiUrl}/sanctum/csrf-cookie`)}register(r){var n=this;return(0,h.A)(function*(){return yield n.getCSRFToken(),a.A.post(`${n.apiUrl}/api/register`,r).then(t=>(localStorage.setItem("token",t.data.token),t.data)).catch(t=>{throw console.error("Login error:",t),t})})()}checkEmail(r){return a.A.post(`${this.apiUrl}/api/check-email`,{email:r})}sendVerificationCode(r){return a.A.post(`${this.apiUrl}/api/send-verification-code`,{email:r})}verifyCode(r){return a.A.post(`${this.apiUrl}/api/verify-code`,r)}login(r){var n=this;return(0,h.A)(function*(){return yield n.getCSRFToken(),a.A.post(`${n.apiUrl}/api/login`,r).then(t=>(localStorage.setItem("token",t.data.token),t.data)).catch(t=>{throw console.error("Login error:",t),t})})()}logout(){const r=localStorage.getItem("token");return a.A.post(`${this.apiUrl}/api/logout`,{},{headers:{Authorization:`Bearer ${r}`}}).then(()=>{localStorage.removeItem("token")})}getProfile(){var r=this;return(0,h.A)(function*(){const n=localStorage.getItem("token");return(yield a.A.get(`${r.apiUrl}/api/petOwner/profile`,{headers:{Authorization:`Bearer ${n}`}})).data.data})()}fetchProfileData(){var r=this;return(0,h.A)(function*(){try{const n=yield r.getProfile();return console.log("Profile response:",n),n}catch(n){throw console.error("Error fetching profile:",n),n}})()}getPetOwnerData(r){const n=localStorage.getItem("token");return a.A.get(`${this.apiUrl}/api/pet_owner/${r}`,{headers:{Authorization:`Bearer ${n}`}})}fetchPetOwnerData(r){return console.log("th id in auth=====>",r),this.getPetOwnerData(r).then(n=>(console.log("pet owner data:",n),n.data.data)).catch(n=>{throw console.error("Error fetching pet owner:",n),n})}updateProfile(r,n){const t=localStorage.getItem("token");return a.A.put(`${this.apiUrl}/api/pet_owner/${n}`,r,{headers:{Authorization:`Bearer ${t}`}})}updateProfileImage(r,n){const t=localStorage.getItem("token");return a.A.post(`${this.apiUrl}/api/pet_owner/image/${n}`,r,{headers:{Authorization:`Bearer ${t}`}})}updatePass(r,n,t){var u=this;return(0,h.A)(function*(){const d=localStorage.getItem("token");try{return(yield a.A.put(`${u.apiUrl}/api/pet-owners/update-password`,{email:r,password:n,password_confirmation:t},{headers:{Authorization:`Bearer ${d}`}})).data}catch(o){throw console.error("Error updating password:",o),o}})()}}return(g=v).\u0275fac=function(r){return new(r||g)(p.KVO(m.Qq))},g.\u0275prov=p.jDH({token:g,factory:g.\u0275fac,providedIn:"root"}),v})()}}]);