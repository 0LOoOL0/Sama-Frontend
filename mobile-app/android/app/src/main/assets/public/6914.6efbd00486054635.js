"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[6914],{6914:(y,v,i)=>{i.r(v),i.d(v,{ForgotpassPageModule:()=>a});var m=i(9351),n=i(7199),l=i(7473),p=i(4170),f=i(5841),e=i(315),d=i(5822);const P=[{path:"",component:(()=>{var t;class c{constructor(o,s,h,u){this.formBuilder=o,this.router=s,this.authService=h,this.alertController=u,this.emailChecking=!1}ngOnInit(){this.emailForm=this.formBuilder.group({email:["",[n.k0.required]]})}checkEmail(o){var s=this;return(0,f.A)(function*(){try{(yield s.authService.checkEmail(o)).data.exists||(yield s.showAlert("User Not Found","The email address is not registered. Please check the email."),s.emailForm.get("email").setErrors({userNotFound:!0}))}catch(h){yield s.showAlert("User Not Found","The email address is not registered. Please check the email."),s.emailForm.get("email").setErrors({userNotFound:!0}),console.error(h.response.data)}})()}showAlert(o,s){var h=this;return(0,f.A)(function*(){yield(yield h.alertController.create({header:o,message:s,buttons:["OK"]})).present()})()}OTP(){var o=this;return(0,f.A)(function*(){if(o.emailForm.invalid)return;const{email:s}=o.emailForm.value;for(o.emailChecking=!0,yield o.checkEmail(s),o.emailChecking=!1;o.emailChecking;)yield new Promise(u=>setTimeout(u,100));if(!o.emailForm.invalid)try{yield o.authService.getCSRFToken();const{email:u}=o.emailForm.value;localStorage.setItem("email",u),yield o.authService.sendVerificationCode(u),o.router.navigate(["/verify-email","forgotpass"])}catch(u){console.error(u.response.data)}})()}}return(t=c).\u0275fac=function(o){return new(o||t)(e.rXU(n.ok),e.rXU(p.Ix),e.rXU(d.u),e.rXU(l.hG))},t.\u0275cmp=e.VBU({type:t,selectors:[["app-forgotpass"]],decls:20,vars:2,consts:[["slot","start"],[1,"header-margin"],[1,"titleFont"],[1,"textGray","bodyFont"],[1,"ion-padding"],[3,"ngSubmit","formGroup"],[1,"bodyFont","SmallMargin"],[1,"roundedInput"],["fill","solid","type","email","placeholder","Enter your email","formControlName","email",1,"bodyFont","textGray"],["expand","full","fill","clear","type","submit",1,"FilledButtons",3,"disabled"]],template:function(o,s){1&o&&(e.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",0),e.nrm(3,"ion-back-button"),e.k0s(),e.j41(4,"div",1)(5,"ion-label",2),e.EFF(6,"Forgot Password"),e.k0s(),e.j41(7,"p",3),e.EFF(8,"Please provide the following information."),e.k0s()()()(),e.j41(9,"ion-content",4)(10,"form",5),e.bIt("ngSubmit",function(){return s.OTP()}),e.j41(11,"div",6),e.nrm(12,"br"),e.j41(13,"ion-label"),e.EFF(14,"Email"),e.k0s(),e.j41(15,"ion-item",7),e.nrm(16,"ion-input",8),e.k0s()(),e.nrm(17,"br"),e.j41(18,"ion-button",9),e.EFF(19," Send OTP "),e.k0s()()()),2&o&&(e.R7$(10),e.Y8G("formGroup",s.emailForm),e.R7$(8),e.Y8G("disabled",s.emailForm.invalid))},dependencies:[n.qT,n.BC,n.cb,l.Jm,l.QW,l.W9,l.eU,l.$w,l.uz,l.he,l.ai,l.Gw,l.el,n.j4,n.JD],styles:["p[_ngcontent-%COMP%]{padding-top:2px;margin:5px 32px 0 0;width:100%}ion-item[_ngcontent-%COMP%]{margin-top:10px}.SmallMargin[_ngcontent-%COMP%]{margin-bottom:15px}.SmallMargin[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{margin-left:16px;font-weight:600}"]}),c})()}];let r=(()=>{var t;class c{}return(t=c).\u0275fac=function(o){return new(o||t)},t.\u0275mod=e.$C({type:t}),t.\u0275inj=e.G2t({imports:[p.iI.forChild(P),p.iI]}),c})(),a=(()=>{var t;class c{}return(t=c).\u0275fac=function(o){return new(o||t)},t.\u0275mod=e.$C({type:t}),t.\u0275inj=e.G2t({imports:[m.MD,n.YN,l.bv,r,n.X1]}),c})()},5822:(y,v,i)=>{i.d(v,{u:()=>e});var m=i(5841),n=i(496),l=i(878),p=i(315),f=i(6e3);n.A.defaults.withCredentials=!0;let e=(()=>{var d;class F{constructor(r){this.http=r,this.apiUrl=l.c.apiUrl}getCSRFToken(){return n.A.get(`${this.apiUrl}/sanctum/csrf-cookie`)}register(r){var a=this;return(0,m.A)(function*(){return yield a.getCSRFToken(),n.A.post(`${a.apiUrl}/api/register`,r).then(t=>(localStorage.setItem("token",t.data.token),t.data)).catch(t=>{throw console.error("Login error:",t),t})})()}checkEmail(r){return n.A.post(`${this.apiUrl}/api/check-email`,{email:r})}sendVerificationCode(r){return n.A.post(`${this.apiUrl}/api/send-verification-code`,{email:r})}verifyCode(r){return n.A.post(`${this.apiUrl}/api/verify-code`,r)}login(r){var a=this;return(0,m.A)(function*(){return yield a.getCSRFToken(),n.A.post(`${a.apiUrl}/api/login`,r).then(t=>(localStorage.setItem("token",t.data.token),t.data)).catch(t=>{throw console.error("Login error:",t),t})})()}logout(){const r=localStorage.getItem("token");return n.A.post(`${this.apiUrl}/api/logout`,{},{headers:{Authorization:`Bearer ${r}`}}).then(()=>{localStorage.removeItem("token")})}getProfile(){var r=this;return(0,m.A)(function*(){const a=localStorage.getItem("token");return(yield n.A.get(`${r.apiUrl}/api/petOwner/profile`,{headers:{Authorization:`Bearer ${a}`}})).data.data})()}fetchProfileData(){var r=this;return(0,m.A)(function*(){try{const a=yield r.getProfile();return console.log("Profile response:",a),a}catch(a){throw console.error("Error fetching profile:",a),a}})()}getPetOwnerData(r){const a=localStorage.getItem("token");return n.A.get(`${this.apiUrl}/api/pet_owner/${r}`,{headers:{Authorization:`Bearer ${a}`}})}fetchPetOwnerData(r){return console.log("th id in auth=====>",r),this.getPetOwnerData(r).then(a=>(console.log("pet owner data:",a),a.data.data)).catch(a=>{throw console.error("Error fetching pet owner:",a),a})}updateProfile(r,a){const t=localStorage.getItem("token");return n.A.put(`${this.apiUrl}/api/pet_owner/${a}`,r,{headers:{Authorization:`Bearer ${t}`}})}updateProfileImage(r,a){const t=localStorage.getItem("token");return n.A.post(`${this.apiUrl}/api/pet_owner/image/${a}`,r,{headers:{Authorization:`Bearer ${t}`}})}updatePass(r,a,t){var c=this;return(0,m.A)(function*(){const g=localStorage.getItem("token");try{return(yield n.A.put(`${c.apiUrl}/api/pet-owners/update-password`,{email:r,password:a,password_confirmation:t},{headers:{Authorization:`Bearer ${g}`}})).data}catch(o){throw console.error("Error updating password:",o),o}})()}}return(d=F).\u0275fac=function(r){return new(r||d)(p.KVO(f.Qq))},d.\u0275prov=p.jDH({token:d,factory:d.\u0275fac,providedIn:"root"}),F})()}}]);