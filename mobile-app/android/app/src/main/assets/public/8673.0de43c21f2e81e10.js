"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[8673],{8673:(C,p,c)=>{c.r(p),c.d(p,{NotificationPageModule:()=>S});var u=c(9351),y=c(7199),d=c(7473),m=c(4170),h=c(5841),t=c(315),F=c(8525),P=c(990),N=c(5110),b=c(5822),$=c(1572);function D(n,r){1&n&&(t.j41(0,"ion-card")(1,"ion-card-content")(2,"ion-label",6),t.EFF(3,"No events today"),t.k0s()()())}function R(n,r){if(1&n&&(t.j41(0,"ion-card")(1,"ion-card-content")(2,"ion-label",7),t.EFF(3),t.k0s(),t.nrm(4,"br"),t.j41(5,"div",8),t.nrm(6,"img",9),t.j41(7,"ion-label",10),t.EFF(8),t.k0s()()()()),2&n){const i=r.$implicit;t.R7$(3),t.JRh(i.title),t.R7$(5),t.Lme("",i.date," | ",i.time,"")}}function I(n,r){if(1&n&&(t.j41(0,"ion-card")(1,"ion-card-content")(2,"ion-label",7),t.EFF(3),t.k0s(),t.nrm(4,"br"),t.j41(5,"div",8),t.nrm(6,"img",9),t.j41(7,"ion-label",10),t.EFF(8),t.k0s()()()()),2&n){const i=r.$implicit;t.R7$(3),t.JRh(i.title),t.R7$(5),t.Lme("",i.date," | ",i.time,"")}}function M(n,r){if(1&n&&(t.j41(0,"div"),t.nrm(1,"br"),t.j41(2,"ion-label",3),t.EFF(3),t.k0s(),t.DNE(4,I,9,3,"ion-card",5),t.k0s()),2&n){const i=r.$implicit,e=t.XpG();t.R7$(3),t.JRh(e.formatDate(i.date)),t.R7$(),t.Y8G("ngForOf",i.events)}}const O=[{path:"",component:(()=>{var n;class r{constructor(e,o,a,s,l,f,g){this.activatedRoute=e,this.providerService=o,this.reminderService=a,this.navCtrl=s,this.toastController=l,this.authService=f,this.petInfoService=g,this.groupedEvents=[],this.todayEvents=[],this.today=(new Date).toISOString().split("T")[0],this.petOwnerId=0,this.petEvents=[],this.timeSlots=["09:00","09:30","10:00","10:30","11:00","11:30","03:00","03:30","04:00","04:30","05:00","05:30"]}ngOnInit(){var e=this;return(0,h.A)(function*(){try{const o=yield e.authService.getProfile();e.petOwnerId=o.id,e.fetchRemindersByOwnerId(e.petOwnerId)}catch(o){console.error("Error fetching profile data:",o)}})()}fetchRemindersByPetId(e){var o=this;return(0,h.A)(function*(){try{const a=yield o.reminderService.getRemindersByPetId(e);o.petEvents=a.data,o.groupEventsByDate(),console.log("Grouped Events:",o.petEvents)}catch(a){console.error("Error fetching reminders:",a)}})()}groupEventsByDate(){var e;const o=new Map,a=new Date;this.petEvents.forEach(s=>{const l=new Date(s.date),[f,g,E]=s.time.split(":").map(Number);if(l.setHours(f,g,E),console.log("Processing event:",s,"Event Date and Time:",l,"Current Date and Time:",a),l.getTime()-a.getTime()<=54e5){const v=l.toISOString().split("T")[0];o.has(v)||o.set(v,[]),o.get(v).push(s)}else console.log("Event is more than 1.5 hours ahead, skipping:",s)}),this.groupedEvents=Array.from(o,([s,l])=>({date:s,events:l})),console.log("Grouped Events:",this.groupedEvents),this.todayEvents=(null===(e=this.groupedEvents.find(s=>s.date===this.today))||void 0===e?void 0:e.events)||[],console.log("Today's Events:",this.todayEvents)}fetchRemindersByOwnerId(e){var o=this;return(0,h.A)(function*(){try{const a=yield o.reminderService.getRemindersByOwnerId(e);o.petEvents=a.data,o.groupEventsByDate(),console.log("Grouped Events:",o.petEvents)}catch(a){console.error("Error fetching reminders:",a)}})()}formatDate(e){const[o,a,s]=e.split("-").map(Number),l=new Date(o,a-1,s);return`${this.getDayWithSuffix(s)} ${l.toLocaleDateString("en-GB",{month:"long",year:"numeric"})}`}getDayWithSuffix(e){if(e>=11&&e<=13)return`${e}th`;switch(e%10){case 1:return`${e}st`;case 2:return`${e}nd`;case 3:return`${e}rd`;default:return`${e}th`}}}return(n=r).\u0275fac=function(e){return new(e||n)(t.rXU(m.nX),t.rXU(F.$),t.rXU(P.s),t.rXU(N.q9),t.rXU(d.K_),t.rXU(b.u),t.rXU($.d))},n.\u0275cmp=t.VBU({type:n,selectors:[["app-notification"]],decls:12,vars:3,consts:[["slot","start"],[1,"centered-title","titleFont"],[1,"ion-padding","bodyFont"],[1,"blackTitleFont"],[4,"ngIf"],[4,"ngFor","ngForOf"],[1,"bodyFont"],[1,"boldFont","bodyFont"],[1,"MakeItFlex"],["src","assets/icons/calendar.svg",1,"icon"],[1,"bodyFont","textGray"]],template:function(e,o){1&e&&(t.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",0),t.nrm(3,"ion-back-button"),t.k0s(),t.j41(4,"ion-label",1),t.EFF(5,"Notification"),t.k0s()()(),t.j41(6,"ion-content",2)(7,"ion-label",3),t.EFF(8,"Today"),t.k0s(),t.DNE(9,D,4,0,"ion-card",4)(10,R,9,3,"ion-card",5)(11,M,5,2,"div",5),t.k0s()),2&e&&(t.R7$(9),t.Y8G("ngIf",0===o.todayEvents.length),t.R7$(),t.Y8G("ngForOf",o.todayEvents),t.R7$(),t.Y8G("ngForOf",o.groupedEvents))},dependencies:[u.Sq,u.bT,d.QW,d.b_,d.I9,d.W9,d.eU,d.he,d.ai,d.el],styles:[".centered-title[_ngcontent-%COMP%]{position:fixed;top:30px;left:50%;transform:translate(-50%)}ion-buttons[_ngcontent-%COMP%]{margin-top:18px}ion-card[_ngcontent-%COMP%]{border-radius:16px;box-shadow:0 4px 6px #0000001a;margin:5px 0 10px;--background: var(--White)}.icon[_ngcontent-%COMP%]{width:24px;height:24px;margin-right:10px}ion-card-content[_ngcontent-%COMP%]{display:flex;--background: var(--White);flex-direction:column;--ion-item-border-width: 0;--ion-item-border-color: transparent}"]}),r})()}];let x=(()=>{var n;class r{}return(n=r).\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.$C({type:n}),n.\u0275inj=t.G2t({imports:[m.iI.forChild(O),m.iI]}),r})(),S=(()=>{var n;class r{}return(n=r).\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.$C({type:n}),n.\u0275inj=t.G2t({imports:[u.MD,y.YN,d.bv,x]}),r})()}}]);