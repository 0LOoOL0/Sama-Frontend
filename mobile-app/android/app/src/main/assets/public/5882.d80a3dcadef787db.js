"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[5882],{5882:(O,M,c)=>{c.r(M),c.d(M,{AddPetDocPageModule:()=>U});var u=c(9351),p=c(7199),g=c(7473),P=c(4170),v=c(5841),t=c(315),f=c(5822),_=c(1572);const I=()=>[.5,.75,1];function a(i,m){1&i&&(t.j41(0,"p")(1,"ion-label"),t.EFF(2,"Documents"),t.k0s(),t.nrm(3,"br"),t.EFF(4," Keep your pet\u2019s records handy by uploading them for quick retrieval no matter your location! "),t.nrm(5,"br"),t.EFF(6," (Supported file formats: PNG, JPEG only.) "),t.k0s())}function e(i,m){if(1&i){const s=t.RV6();t.j41(0,"ion-list")(1,"ion-label",14),t.EFF(2),t.k0s(),t.j41(3,"div",15)(4,"div",16)(5,"div",17)(6,"ion-thumbnail",0),t.nrm(7,"img",18),t.k0s()(),t.j41(8,"div",19)(9,"ion-label",20),t.EFF(10),t.k0s()()(),t.j41(11,"ion-thumbnail",0)(12,"img",21),t.bIt("click",function(){const n=t.eBV(s).$implicit,d=t.XpG(2);return t.Njj(d.downloadDoc(n.uploadedFile))}),t.k0s()()(),t.j41(13,"div",22)(14,"div",23)(15,"ion-thumbnail",24),t.bIt("click",function(){const n=t.eBV(s).index,d=t.XpG(2);return t.Njj(d.setEditOpen(!0,n))}),t.nrm(16,"img",25),t.k0s(),t.j41(17,"ion-thumbnail",24),t.bIt("click",function(){const n=t.eBV(s).index,d=t.XpG(2);return t.Njj(d.deleteDoc(n))}),t.nrm(18,"img",26),t.k0s()()()()}if(2&i){const s=m.$implicit;t.R7$(2),t.SpI(" ",s.documentTitle," "),t.R7$(8),t.SpI(" ",null==s.uploadedFile?null:s.uploadedFile.name," ")}}function o(i,m){if(1&i&&(t.j41(0,"div",12),t.DNE(1,e,19,2,"ion-list",13),t.k0s()),2&i){const s=t.XpG();t.R7$(),t.Y8G("ngForOf",s.List)}}function l(i,m){if(1&i&&(t.j41(0,"ion-label",32),t.EFF(1),t.k0s()),2&i){const s=t.XpG(2);t.R7$(),t.SpI(" ",s.errorMessage," ")}}function k(i,m){if(1&i){const s=t.RV6();t.j41(0,"ion-content",3)(1,"ion-label",5),t.EFF(2,"Document Title"),t.k0s(),t.j41(3,"ion-item",27)(4,"ion-input",28),t.mxI("ngModelChange",function(n){t.eBV(s);const d=t.XpG();return t.DH7(d.input.documentTitle,n)||(d.input.documentTitle=n),t.Njj(n)}),t.k0s()(),t.nrm(5,"br"),t.j41(6,"ion-label",5),t.EFF(7,"Upload Document"),t.k0s(),t.j41(8,"ion-item",27)(9,"div",29)(10,"ion-input"),t.EFF(11,' type="file" accept="image/*" (change)="handleFileInput($event)" '),t.k0s(),t.j41(12,"ion-label",30),t.EFF(13," Upload your document + "),t.k0s()()(),t.nrm(14,"br"),t.j41(15,"ion-button",10),t.bIt("click",function(){t.eBV(s);const n=t.XpG();return t.Njj(n.addDoc())}),t.EFF(16," + Add "),t.k0s(),t.DNE(17,l,2,1,"ion-label",31),t.k0s()}if(2&i){const s=t.XpG();t.R7$(4),t.R50("ngModel",s.input.documentTitle),t.R7$(13),t.Y8G("ngIf",s.errorMessage)}}function $(i,m){if(1&i&&(t.j41(0,"ion-label",32),t.EFF(1),t.k0s()),2&i){const s=t.XpG(2);t.R7$(),t.SpI(" ",s.errorMessage," ")}}function b(i,m){if(1&i){const s=t.RV6();t.j41(0,"ion-content",3)(1,"ion-label",5),t.EFF(2,"Edit Document Title"),t.k0s(),t.j41(3,"ion-item",27)(4,"ion-input",28),t.mxI("ngModelChange",function(n){t.eBV(s);const d=t.XpG();return t.DH7(d.input.documentTitle,n)||(d.input.documentTitle=n),t.Njj(n)}),t.k0s()(),t.nrm(5,"br"),t.j41(6,"ion-button",10),t.bIt("click",function(){t.eBV(s);const n=t.XpG();return t.Njj(n.saveEdit())}),t.EFF(7," Save "),t.k0s(),t.DNE(8,$,2,1,"ion-label",31),t.k0s()}if(2&i){const s=t.XpG();t.R7$(4),t.R50("ngModel",s.input.documentTitle),t.R7$(4),t.Y8G("ngIf",s.errorMessage)}}const E=[{path:"",component:(()=>{var i;class m{constructor(r,n,d){this.router=r,this.auth=n,this.petService=d,this.isModalOpen=!1,this.editModalOpen=!1,this.editIndex=null,this.List=[],this.input={documentTitle:"",uploadedFile:null},this.errorMessage=null,this.loadUserProfile()}loadUserProfile(){var r=this;return(0,v.A)(function*(){try{r.user=yield r.auth.fetchProfileData(),console.log("user====>",r.user)}catch(n){console.error("Error loading user profile:",n)}})()}ngOnInit(){}addDoc(){this.input.documentTitle&&this.input.uploadedFile?(this.List.push({...this.input}),this.clearInfo(),this.isModalOpen=!1,this.errorMessage=null):this.errorMessage="Both document title and file are required."}setOpen(r){this.isModalOpen=r}setEditOpen(r,n=null){this.editModalOpen=r,this.editIndex=n,null!==n?this.input={...this.List[n]}:this.clearInfo()}saveEdit(){null!==this.editIndex&&(this.input.documentTitle?(this.List[this.editIndex]={...this.input},this.clearInfo(),this.editModalOpen=!1,this.errorMessage=null):this.errorMessage="Document title is required.")}clearInfo(){this.input={documentTitle:"",uploadedFile:null},this.errorMessage=null}downloadDoc(r){if(r){const n=URL.createObjectURL(r),d=document.createElement("a");d.href=n,d.download=r.name,d.click(),URL.revokeObjectURL(n)}else this.errorMessage="File not available for download."}deleteDoc(r){this.List.splice(r,1)}handleFileInput(r){const n=r.target;this.input.uploadedFile=n.files&&n.files.length>0?n.files[0]:null}hasUploadedDocs(){return this.List.length>0}getButtonLabel(){return this.hasUploadedDocs()?"Next":"Skip"}getButtonColor(){return this.hasUploadedDocs()?"FilledButtons":"OutlinedButtons"}navigateNext(){var r=this;return(0,v.A)(function*(){try{const n=new FormData;r.List.length>0&&r.List.forEach((h,A)=>{h.uploadedFile&&(n.append(`documents[${A}][documentTitle]`,h.documentTitle),n.append(`documents[${A}][uploadedFile]`,h.uploadedFile),console.log(`Document ${A} Title: ${h.documentTitle}`),console.log(`Document ${A} File:`,h.uploadedFile))});const d=localStorage.getItem("pet Info"),D=localStorage.getItem("petImageFile"),y=localStorage.getItem("petImageFileBase64");if(d){const h=JSON.parse(d);if(y&&D){const B=`data:image/jpeg;base64,${y}`,F=yield(yield fetch(B)).blob(),w=new File([F],D,{type:F.type});n.append("image",w)}n.append("name",h.petName),n.append("age",h.age.toString()),n.append("weight",h.weight.toString()),n.append("height",h.height.toString()),n.append("pet_type",h.petType),n.append("breed",h.breed),n.append("color",h.color),n.append("is_vaccinated",h.vaccinated),n.append("is_microchipped",h.microchipped),n.append("is_neutered",h.neutered),n.append("is_lost",h.is_lost?"1":"0"),n.append("allow_adoption",h.allow_adoption?"1":"0"),n.append("pet_owner_id",r.user.id.toString());const A=yield r.petService.addPet(n);if(console.log("Full response:",A),!A||!A.data)throw new Error("Unexpected response format");console.log("response=========>",A.data),r.router.navigate(["./mypet"])}else console.log("there is no pet info in the storage")}catch(n){console.error("Error:",n)}})()}}return(i=m).\u0275fac=function(r){return new(r||i)(t.rXU(P.Ix),t.rXU(f.u),t.rXU(_.d))},i.\u0275cmp=t.VBU({type:i,selectors:[["app-add-pet-doc"]],decls:22,vars:13,consts:[["slot","start"],[1,"header-margin-Single-Line"],[1,"titleFont"],[1,"ion-padding"],[1,"empty-state"],[1,"bodyFont"],[4,"ngIf"],["class","container",4,"ngIf"],[3,"isOpen","initialBreakpoint","breakpoints"],[1,"left"],["expand","full","fill","clear",1,"FilledButtons","smallButton",3,"click"],["expand","full","fill","clear",3,"click"],[1,"container"],[4,"ngFor","ngForOf"],["id","title",1,"bodyFont"],[1,"document","FlexSpaceInBetween"],[1,"MakeItFlex","notFullWidth"],[1,"start"],["src","assets/icons/file.svg","alt","Document Image"],[1,"middle"],[1,"bodyFont","textGray"],["src","assets/icons/download.svg",3,"click"],[1,"bottomIcons"],[1,"smaller"],["slot","start",3,"click"],["src","assets/icons/edit.svg"],["src","assets/icons/trash.svg"],[1,"roundedInput"],["fill","solid","placeholder","Type here","type","text",1,"bodyFont","textGray",3,"ngModelChange","ngModel"],[1,"yellow"],[1,"bodyFont","lightFont","smallFont"],["class","error-message",4,"ngIf"],[1,"error-message"]],template:function(r,n){1&r&&(t.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",0),t.nrm(3,"ion-back-button"),t.k0s(),t.j41(4,"div",1)(5,"ion-label",2),t.EFF(6,"Add Pet Documents"),t.k0s()()()(),t.j41(7,"ion-content",3)(8,"div",4)(9,"div",5),t.DNE(10,a,7,0,"p",6),t.k0s(),t.DNE(11,o,2,1,"div",7),t.k0s(),t.j41(12,"ion-modal",8),t.DNE(13,k,18,2,"ng-template"),t.k0s(),t.j41(14,"ion-modal",8),t.DNE(15,b,9,2,"ng-template"),t.k0s()(),t.j41(16,"div",3)(17,"div",9)(18,"ion-button",10),t.bIt("click",function(){return n.setOpen(!0)}),t.EFF(19," + Add "),t.k0s()(),t.j41(20,"ion-button",11),t.bIt("click",function(){return n.navigateNext()}),t.EFF(21),t.k0s()()),2&r&&(t.R7$(10),t.Y8G("ngIf",0===n.List.length),t.R7$(),t.Y8G("ngIf",n.List.length>0),t.R7$(),t.Y8G("isOpen",n.isModalOpen)("initialBreakpoint",.5)("breakpoints",t.lJ4(11,I)),t.R7$(2),t.Y8G("isOpen",n.editModalOpen)("initialBreakpoint",.5)("breakpoints",t.lJ4(12,I)),t.R7$(6),t.HbH(n.getButtonColor()),t.R7$(),t.SpI(" ",n.getButtonLabel()," "))},dependencies:[u.Sq,u.bT,p.BC,p.vS,g.Jm,g.QW,g.W9,g.eU,g.$w,g.uz,g.he,g.nf,g.Zx,g.ai,g.Sb,g.Gw,g.el],styles:["ion-buttons[_ngcontent-%COMP%]{margin-top:20px}.empty-state[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;width:100%;flex-direction:column}ion-label[_ngcontent-%COMP%]{font-weight:600}.left[_ngcontent-%COMP%]{display:flex;justify-content:flex-end}.smallButton[_ngcontent-%COMP%]{width:50%}ion-modal[_ngcontent-%COMP%]{--border-radius: 16px}ion-modal[_ngcontent-%COMP%]   .yellow[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;position:relative;background-color:var(--Accent-One);border-radius:25px;margin:5px;width:100%;height:70%}ion-modal[_ngcontent-%COMP%]   .yellow[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{position:absolute;opacity:0%;width:100%;z-index:2}ion-modal[_ngcontent-%COMP%]   .yellow[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{position:absolute;z-index:1}ion-item[_ngcontent-%COMP%]{margin-top:10px}.container[_ngcontent-%COMP%]{width:100%}.container[_ngcontent-%COMP%]   .document[_ngcontent-%COMP%]{display:flex;align-items:center;width:100%;background-color:var(--White);border-radius:50px;margin-top:10px;border:7px solid var(--GrayColor)}.container[_ngcontent-%COMP%]   .notFullWidth[_ngcontent-%COMP%]{width:90%}.container[_ngcontent-%COMP%]   .start[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}.container[_ngcontent-%COMP%]   .middle[_ngcontent-%COMP%]{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;display:flex;align-items:center}.container[_ngcontent-%COMP%]   .objects[_ngcontent-%COMP%]{display:flex;justify-content:space-between}ion-list[_ngcontent-%COMP%]{background-color:var(--background-color)!important;width:100%!important}#title[_ngcontent-%COMP%]{margin-left:16px}ion-thumbnail[_ngcontent-%COMP%]{display:flex;justify-content:space-around;align-items:center}ion-thumbnail[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:50%;height:auto}.bottomIcons[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}.start[_ngcontent-%COMP%]{display:flex;align-items:center}.start[_ngcontent-%COMP%]   .bodyFont[_ngcontent-%COMP%]{font-weight:600;margin-left:5px}.smaller[_ngcontent-%COMP%]{display:flex;justify-content:space-between;width:80%}.error[_ngcontent-%COMP%]{text-align:center}.error[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{color:var(--Main-Two)!important}"]}),m})()}];let C=(()=>{var i;class m{}return(i=m).\u0275fac=function(r){return new(r||i)},i.\u0275mod=t.$C({type:i}),i.\u0275inj=t.G2t({imports:[P.iI.forChild(E),P.iI]}),m})(),U=(()=>{var i;class m{}return(i=m).\u0275fac=function(r){return new(r||i)},i.\u0275mod=t.$C({type:i}),i.\u0275inj=t.G2t({imports:[u.MD,p.YN,g.bv,C]}),m})()},5822:(O,M,c)=>{c.d(M,{u:()=>t});var u=c(5841),p=c(496),g=c(878),P=c(315),v=c(6e3);p.A.defaults.withCredentials=!0;let t=(()=>{var f;class _{constructor(a){this.http=a,this.apiUrl=g.c.apiUrl}getCSRFToken(){return p.A.get(`${this.apiUrl}/sanctum/csrf-cookie`)}register(a){var e=this;return(0,u.A)(function*(){return yield e.getCSRFToken(),p.A.post(`${e.apiUrl}/api/register`,a).then(o=>(localStorage.setItem("token",o.data.token),o.data)).catch(o=>{throw console.error("Login error:",o),o})})()}checkEmail(a){return p.A.post(`${this.apiUrl}/api/check-email`,{email:a})}sendVerificationCode(a){return p.A.post(`${this.apiUrl}/api/send-verification-code`,{email:a})}verifyCode(a){return p.A.post(`${this.apiUrl}/api/verify-code`,a)}login(a){var e=this;return(0,u.A)(function*(){return yield e.getCSRFToken(),p.A.post(`${e.apiUrl}/api/login`,a).then(o=>(localStorage.setItem("token",o.data.token),o.data)).catch(o=>{throw console.error("Login error:",o),o})})()}logout(){const a=localStorage.getItem("token");return p.A.post(`${this.apiUrl}/api/logout`,{},{headers:{Authorization:`Bearer ${a}`}}).then(()=>{localStorage.removeItem("token")})}getProfile(){var a=this;return(0,u.A)(function*(){const e=localStorage.getItem("token");return(yield p.A.get(`${a.apiUrl}/api/petOwner/profile`,{headers:{Authorization:`Bearer ${e}`}})).data.data})()}fetchProfileData(){var a=this;return(0,u.A)(function*(){try{const e=yield a.getProfile();return console.log("Profile response:",e),e}catch(e){throw console.error("Error fetching profile:",e),e}})()}getPetOwnerData(a){const e=localStorage.getItem("token");return p.A.get(`${this.apiUrl}/api/pet_owner/${a}`,{headers:{Authorization:`Bearer ${e}`}})}fetchPetOwnerData(a){return console.log("th id in auth=====>",a),this.getPetOwnerData(a).then(e=>(console.log("pet owner data:",e),e.data.data)).catch(e=>{throw console.error("Error fetching pet owner:",e),e})}updateProfile(a,e){const o=localStorage.getItem("token");return p.A.put(`${this.apiUrl}/api/pet_owner/${e}`,a,{headers:{Authorization:`Bearer ${o}`}})}updateProfileImage(a,e){const o=localStorage.getItem("token");return p.A.post(`${this.apiUrl}/api/pet_owner/image/${e}`,a,{headers:{Authorization:`Bearer ${o}`}})}updatePass(a,e,o){var l=this;return(0,u.A)(function*(){const k=localStorage.getItem("token");try{return(yield p.A.put(`${l.apiUrl}/api/pet-owners/update-password`,{email:a,password:e,password_confirmation:o},{headers:{Authorization:`Bearer ${k}`}})).data}catch($){throw console.error("Error updating password:",$),$}})()}}return(f=_).\u0275fac=function(a){return new(a||f)(P.KVO(v.Qq))},f.\u0275prov=P.jDH({token:f,factory:f.\u0275fac,providedIn:"root"}),_})()},1572:(O,M,c)=>{c.d(M,{d:()=>f});var u=c(496),p=c(5109),g=c(878),P=c(315),v=c(6e3),t=c(4003);let f=(()=>{var _;class I{constructor(e,o){this.http=e,this.storage=o,this.apiUrl=g.c.apiUrl,this.petId=null}addPet(e){for(const[l,k]of e.entries())console.log(`${l}: ${k}`);const o=localStorage.getItem("token");return u.A.post(`${this.apiUrl}/api/pet/store`,e,{headers:{Authorization:`Bearer ${o}`,"Content-Type":"multipart/form-data"}})}getPets(){const e=localStorage.getItem("token");return u.A.get(`${this.apiUrl}/api/petOwner/pets`,{headers:{Authorization:`Bearer ${e}`}})}getPetsByOwnerId(e){const o=localStorage.getItem("token");return(0,p.H)(u.A.get(`${this.apiUrl}/api/pet_owners/${e}/pets`,{headers:{Authorization:`Bearer ${o}`}}).then(l=>(console.log("Pets by Owner ID response:",l),l.data.data)).catch(l=>{throw console.error("Error fetching pets by owner ID:",l),l}))}getPetById(e){const o=localStorage.getItem("token");return(0,p.H)(u.A.get(`${this.apiUrl}/api/pet/${e}`,{headers:{Authorization:`Bearer ${o}`}}).then(l=>(console.log("Pet response:",l),l.data.data)).catch(l=>{throw console.error("Error fetching pet:",l),l}))}getAllPets(){const e=localStorage.getItem("token");return u.A.get(`${this.apiUrl}/api/pets`,{headers:{Authorization:`Bearer ${e}`}})}fetchAllPets(){return this.getAllPets().then(e=>(console.log("All Pets response:",e),e.data.data)).catch(e=>{throw console.error("Error fetching all pets:",e),e})}fetchPets(){return this.getPets().then(e=>(console.log("Pets response:",e),e.data.data)).catch(e=>{throw console.error("Error fetching pets:",e),e})}getPet(e){return this.http.get(`${this.apiUrl}/api/pet/${e}`)}storePet(e){return this.http.post(`${this.apiUrl}/api/pet`,e)}updatePet(e,o){console.log("pet in pet-info.service====>",o);const l=localStorage.getItem("token");return u.A.post(`${this.apiUrl}/api/pet/update/${e}`,o,{headers:{Authorization:`Bearer ${l}`,"Content-Type":"multipart/form-data"}})}updateLostStatus(e,o){const l=localStorage.getItem("token");return this.http.post(`${this.apiUrl}/api/pet/update-lost-status/${e}`,{is_lost:o?1:0},{headers:{Authorization:`Bearer ${l}`}})}updateAdoptionStatus(e,o){const l=localStorage.getItem("token");return this.http.post(`${this.apiUrl}/api/pet/update-adoption-status/${e}`,{allow_adoption:o?1:0},{headers:{Authorization:`Bearer ${l}`}})}updateMatingStatus(e,o){const l=localStorage.getItem("token"),$={is_neutered:o.toLowerCase()};return this.http.post(`${this.apiUrl}/api/pet/update-mating-status/${e}`,$,{headers:{Authorization:`Bearer ${l}`}})}deleteImage(e){const o=localStorage.getItem("token");return this.http.post(`${this.apiUrl}/api/pet/delete-image/${e}`,{},{headers:{Authorization:`Bearer ${o}`}})}updateImage(e,o){const l=localStorage.getItem("token");return this.http.post(`${this.apiUrl}/api/pet/update-image/${e}`,o,{headers:{Authorization:`Bearer ${l}`}})}deletePet(e){const o=localStorage.getItem("token");return this.http.delete(`${this.apiUrl}/api/pet/${e}`,{headers:{Authorization:`Bearer ${o}`}})}setPetId(e){this.petId=e}getPetId(){return this.petId}markPetAsLost(e){return this.http.post(`${this.apiUrl}/api/pet/lost/${e}`,{})}markPetAsFound(e){return this.http.post(`${this.apiUrl}/api/pet/found/${e}`,{})}getOwnerIdByEmail(e){return this.http.get(`${this.apiUrl}/api/petOwners/byEmail`,{params:{email:e}})}updatePetOwner(e,o){return this.http.put(`${this.apiUrl}/api/pets/${e}`,{pet_owner_id:o})}addDocument(e,o){const l=localStorage.getItem("token");return u.A.post(`${this.apiUrl}/api/pet/${e}/documents`,o,{headers:{Authorization:`Bearer ${l}`,"Content-Type":"multipart/form-data"}})}uploadImage(e){return this.storage.ref(e).getDownloadURL().toPromise()}addLostPetByFounder(e){const o=localStorage.getItem("token");return u.A.post(`${this.apiUrl}/api/addLostPetByFounder`,e,{headers:{Authorization:`Bearer ${o}`,"Content-Type":"multipart/form-data"}})}fetchAllLostPets(){const e=localStorage.getItem("token");return this.http.get(`${this.apiUrl}/api/allLostPets`,{headers:{Authorization:`Bearer ${e}`}})}showLostPetByFounder(e){const o=localStorage.getItem("token");return this.http.get(`${this.apiUrl}/api/showLostPetByFounder/${e}`,{headers:{Authorization:`Bearer ${o}`}})}deleteLostPetByFounder(e){const o=localStorage.getItem("token");return this.http.delete(`${this.apiUrl}/api/deleteLostPetByFounder/${e}`,{headers:{Authorization:`Bearer ${o}`}})}}return(_=I).\u0275fac=function(e){return new(e||_)(P.KVO(v.Qq),P.KVO(t.ap))},_.\u0275prov=P.jDH({token:_,factory:_.\u0275fac,providedIn:"root"}),I})()}}]);