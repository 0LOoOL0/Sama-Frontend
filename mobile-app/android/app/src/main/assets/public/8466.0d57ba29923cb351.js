"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[8466],{8466:(b,y,s)=>{s.r(y),s.d(y,{LostformPageModule:()=>f});var p=s(9351),r=s(7199),c=s(7473),m=s(4170),$=s(5841),_=s(496),t=s(315),h=s(5822),k=s(1572);function n(i,P){if(1&i&&(t.j41(0,"ion-select-option",30),t.EFF(1),t.k0s()),2&i){const v=P.$implicit;t.Y8G("value",v.value),t.R7$(),t.SpI(" ",v.display," ")}}const o=[{path:"",component:(()=>{var i;class P{constructor(l,d,u,F,g){this.alertController=l,this.authService=d,this.petInfoService=u,this.router=F,this.formBuilder=g,this.petImagePreview=null,this.selectedFile=null,this.petTypes=[{value:"Dog",display:"Dog"},{value:"Cat",display:"Cat"},{value:"Bird",display:"Bird"},{value:"Rabbit",display:"Rabbit"},{value:"Hamster",display:"Hamster"},{value:"Fish",display:"Fish"}],this.lostPetForm=this.formBuilder.group({name:["",[r.k0.required,r.k0.maxLength(32)]],pet_type:["",r.k0.required],breed:["",r.k0.required],color:["",r.k0.required],gender:["",r.k0.required],description:["",r.k0.required,r.k0.maxLength(255)],location:["",r.k0.required],role:["",r.k0.required]})}ngOnInit(){}onFileSelected(l){const d=l.target.files[0];if(d){this.selectedFile=d;const u=new FileReader;u.onload=()=>{this.petImagePreview=u.result,this.lostPetForm.updateValueAndValidity()},u.readAsDataURL(d)}}submitForm(){var l=this;return(0,$.A)(function*(){if(console.log("Form data before submission:",l.lostPetForm.value),!l.lostPetForm.invalid)try{const F=(yield l.authService.fetchProfileData()).id,g=new FormData;Object.keys(l.lostPetForm.controls).forEach(I=>{var A;g.append(I,null===(A=l.lostPetForm.get(I))||void 0===A?void 0:A.value)}),g.append("pet_owner_id",F),l.selectedFile&&g.append("image",l.selectedFile),g.forEach((I,A)=>{console.log(`${A}: ${I}`)});const C=yield l.petInfoService.addLostPetByFounder(g);console.log("Lost pet added successfully:",C),yield(yield l.alertController.create({cssClass:"success-popup",header:"Posted successfully",message:"The lost pet has been reported successfully.",buttons:["OK"]})).present(),l.router.navigate(["/adoptionlist"])}catch(u){var d;_.A.isAxiosError(u)?422===(null===(d=u.response)||void 0===d?void 0:d.status)?console.error("Validation errors:",u.response.data.errors):console.error("Axios error details:",u.toJSON()):console.error("General error:",u)}})()}}return(i=P).\u0275fac=function(l){return new(l||i)(t.rXU(c.hG),t.rXU(h.u),t.rXU(k.d),t.rXU(m.Ix),t.rXU(r.ok))},i.\u0275cmp=t.VBU({type:i,selectors:[["app-lostform"]],decls:70,vars:4,consts:[["fileInput",""],["slot","start"],[1,"header-margin-Single-Line"],[1,"title"],[1,"titleFont"],["src","assets/icons/trash.svg"],[1,"ion-padding"],[1,"center-content"],[1,"round-picture-container"],[1,"round-image",3,"src"],["type","file","hidden","",3,"change"],[1,"camera-container",3,"click"],["src","assets/icons/pencil.svg","alt","pencil",1,"file-button"],["enctype","multipart/form-data",3,"ngSubmit","formGroup"],[1,"bodyFont"],[1,"roundedInput"],["formControlName","name","type","text","placeholder","Pet Name",1,"bodyFont"],["formControlName","pet_type","placeholder","Select Type","interface","popover",1,"bodyFont"],["class","bodyFont",3,"value",4,"ngFor","ngForOf"],["formControlName","breed","type","text","placeholder","Breed",1,"bodyFont"],["formControlName","color","type","text","placeholder","Color",1,"bodyFont"],["formControlName","gender","placeholder","Select Gender","interface","popover",1,"bodyFont"],["value","m",1,"bodyFont"],["value","f",1,"bodyFont"],["formControlName","role","placeholder","Select role","interface","popover",1,"bodyFont"],["value","Founder",1,"bodyFont"],["value","Owner",1,"bodyFont"],["formControlName","location","placeholder","location",1,"bodyFont"],["formControlName","description","placeholder","Description",1,"bodyFont"],["expand","block","type","submit","fill","clear",1,"FilledButtons",3,"disabled"],[1,"bodyFont",3,"value"]],template:function(l,d){if(1&l){const u=t.RV6();t.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",1),t.nrm(3,"ion-back-button"),t.k0s(),t.j41(4,"div",2)(5,"div",3)(6,"ion-label",4),t.EFF(7,"Lost Pet Form"),t.k0s(),t.j41(8,"ion-thumbnail"),t.nrm(9,"img",5),t.k0s()()()()(),t.j41(10,"ion-content",6)(11,"div",7)(12,"div",8),t.nrm(13,"img",9),t.j41(14,"input",10,0),t.bIt("change",function(g){return t.eBV(u),t.Njj(d.onFileSelected(g))}),t.k0s(),t.j41(16,"div",11),t.bIt("click",function(){t.eBV(u);const g=t.sdS(15);return t.Njj(g.click())}),t.nrm(17,"img",12),t.k0s()()(),t.j41(18,"form",13),t.bIt("ngSubmit",function(){return t.eBV(u),t.Njj(d.submitForm())}),t.j41(19,"ion-label",14),t.EFF(20,"Pet Name"),t.k0s(),t.j41(21,"ion-item",15),t.nrm(22,"ion-input",16),t.k0s(),t.nrm(23,"br"),t.j41(24,"ion-label",14),t.EFF(25,"Pet Type"),t.k0s(),t.j41(26,"ion-item",15)(27,"ion-select",17),t.DNE(28,n,2,2,"ion-select-option",18),t.k0s()(),t.nrm(29,"br"),t.j41(30,"ion-label",14),t.EFF(31,"Breed"),t.k0s(),t.j41(32,"ion-item",15),t.nrm(33,"ion-input",19),t.k0s(),t.nrm(34,"br"),t.j41(35,"ion-label",14),t.EFF(36,"Color"),t.k0s(),t.j41(37,"ion-item",15),t.nrm(38,"ion-input",20),t.k0s(),t.nrm(39,"br"),t.j41(40,"ion-label",14),t.EFF(41,"Gender"),t.k0s(),t.j41(42,"ion-item",15)(43,"ion-select",21)(44,"ion-select-option",22),t.EFF(45,"Male"),t.k0s(),t.j41(46,"ion-select-option",23),t.EFF(47,"Female"),t.k0s()()(),t.nrm(48,"br"),t.j41(49,"ion-label",14),t.EFF(50,"I'am the pet"),t.k0s(),t.j41(51,"ion-item",15)(52,"ion-select",24)(53,"ion-select-option",25),t.EFF(54,"Founder"),t.k0s(),t.j41(55,"ion-select-option",26),t.EFF(56,"Owner"),t.k0s()()(),t.nrm(57,"br"),t.j41(58,"ion-label",14),t.EFF(59,"where you found/lost it"),t.k0s(),t.j41(60,"ion-item",15),t.nrm(61,"ion-textarea",27),t.k0s(),t.nrm(62,"br"),t.j41(63,"ion-label",14),t.EFF(64,"Description"),t.k0s(),t.j41(65,"ion-item",15),t.nrm(66,"ion-textarea",28),t.k0s(),t.nrm(67,"br"),t.j41(68,"ion-button",29),t.EFF(69," Post "),t.k0s()()()}2&l&&(t.R7$(13),t.Y8G("src",d.petImagePreview||"assets/mypet.svg",t.B4B),t.R7$(5),t.Y8G("formGroup",d.lostPetForm),t.R7$(10),t.Y8G("ngForOf",d.petTypes),t.R7$(40),t.Y8G("disabled",d.lostPetForm.invalid))},dependencies:[p.Sq,r.qT,r.BC,r.cb,c.Jm,c.QW,c.W9,c.eU,c.$w,c.uz,c.he,c.Nm,c.Ip,c.nc,c.Zx,c.ai,c.Je,c.Gw,c.el,r.j4,r.JD],styles:["ion-buttons[_ngcontent-%COMP%]{margin-top:20px}.title[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}ion-thumbnail[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}ion-thumbnail[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:50%;height:auto}ion-item[_ngcontent-%COMP%]{margin-top:10px}ion-label[_ngcontent-%COMP%]{font-weight:600;margin-left:16px}.photo-container[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-bottom:20px}.profile-image[_ngcontent-%COMP%]{width:100px;height:100px;border-radius:50%;overflow:hidden}.options[_ngcontent-%COMP%]{display:flex;justify-content:space-evenly;align-items:center}.round-picture-container[_ngcontent-%COMP%]{position:relative;display:flex;justify-content:center;align-items:center;width:100px;height:100px}.round-picture-container[_ngcontent-%COMP%]   .round-image[_ngcontent-%COMP%]{width:100%;height:100%;border-radius:50%;object-fit:cover}.file-button[_ngcontent-%COMP%]{width:80%;height:80%;object-fit:contain}.center-content[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}.camera-container[_ngcontent-%COMP%]{position:absolute;bottom:0;right:1px;width:35px;height:35px;display:flex;justify-content:center;align-items:center;background-color:var(--Main-One);border-radius:50%}ion-radio-group[_ngcontent-%COMP%]   .bodyFont[_ngcontent-%COMP%]{font-weight:400}ion-radio-group[_ngcontent-%COMP%]   ion-radio[_ngcontent-%COMP%]{--color: var(--GrayColor);--color-checked: var(--Main-Two)}  ion-select-popover{--background: white !important}  ion-select-popover ion-list{background-color:#fff!important}  ion-select-popover ion-list ion-item{--background: white !important;--color: black !important}  .select-interface-option{background-color:#fff!important;color:#000!important}"]}),P})()}];let a=(()=>{var i;class P{}return(i=P).\u0275fac=function(l){return new(l||i)},i.\u0275mod=t.$C({type:i}),i.\u0275inj=t.G2t({imports:[m.iI.forChild(o),m.iI]}),P})(),f=(()=>{var i;class P{}return(i=P).\u0275fac=function(l){return new(l||i)},i.\u0275mod=t.$C({type:i}),i.\u0275inj=t.G2t({imports:[p.MD,r.YN,c.bv,a,r.X1]}),P})()},5822:(b,y,s)=>{s.d(y,{u:()=>_});var p=s(5841),r=s(496),c=s(878),m=s(315),$=s(6e3);r.A.defaults.withCredentials=!0;let _=(()=>{var t;class h{constructor(n){this.http=n,this.apiUrl=c.c.apiUrl}getCSRFToken(){return r.A.get(`${this.apiUrl}/sanctum/csrf-cookie`)}register(n){var e=this;return(0,p.A)(function*(){return yield e.getCSRFToken(),r.A.post(`${e.apiUrl}/api/register`,n).then(o=>(localStorage.setItem("token",o.data.token),o.data)).catch(o=>{throw console.error("Login error:",o),o})})()}checkEmail(n){return r.A.post(`${this.apiUrl}/api/check-email`,{email:n})}sendVerificationCode(n){return r.A.post(`${this.apiUrl}/api/send-verification-code`,{email:n})}verifyCode(n){return r.A.post(`${this.apiUrl}/api/verify-code`,n)}login(n){var e=this;return(0,p.A)(function*(){return yield e.getCSRFToken(),r.A.post(`${e.apiUrl}/api/login`,n).then(o=>(localStorage.setItem("token",o.data.token),o.data)).catch(o=>{throw console.error("Login error:",o),o})})()}logout(){const n=localStorage.getItem("token");return r.A.post(`${this.apiUrl}/api/logout`,{},{headers:{Authorization:`Bearer ${n}`}}).then(()=>{localStorage.removeItem("token")})}getProfile(){var n=this;return(0,p.A)(function*(){const e=localStorage.getItem("token");return(yield r.A.get(`${n.apiUrl}/api/petOwner/profile`,{headers:{Authorization:`Bearer ${e}`}})).data.data})()}fetchProfileData(){var n=this;return(0,p.A)(function*(){try{const e=yield n.getProfile();return console.log("Profile response:",e),e}catch(e){throw console.error("Error fetching profile:",e),e}})()}getPetOwnerData(n){const e=localStorage.getItem("token");return r.A.get(`${this.apiUrl}/api/pet_owner/${n}`,{headers:{Authorization:`Bearer ${e}`}})}fetchPetOwnerData(n){return console.log("th id in auth=====>",n),this.getPetOwnerData(n).then(e=>(console.log("pet owner data:",e),e.data.data)).catch(e=>{throw console.error("Error fetching pet owner:",e),e})}updateProfile(n,e){const o=localStorage.getItem("token");return r.A.put(`${this.apiUrl}/api/pet_owner/${e}`,n,{headers:{Authorization:`Bearer ${o}`}})}updateProfileImage(n,e){const o=localStorage.getItem("token");return r.A.post(`${this.apiUrl}/api/pet_owner/image/${e}`,n,{headers:{Authorization:`Bearer ${o}`}})}updatePass(n,e,o){var a=this;return(0,p.A)(function*(){const f=localStorage.getItem("token");try{return(yield r.A.put(`${a.apiUrl}/api/pet-owners/update-password`,{email:n,password:e,password_confirmation:o},{headers:{Authorization:`Bearer ${f}`}})).data}catch(i){throw console.error("Error updating password:",i),i}})()}}return(t=h).\u0275fac=function(n){return new(n||t)(m.KVO($.Qq))},t.\u0275prov=m.jDH({token:t,factory:t.\u0275fac,providedIn:"root"}),h})()},1572:(b,y,s)=>{s.d(y,{d:()=>t});var p=s(496),r=s(5109),c=s(878),m=s(315),$=s(6e3),_=s(4003);let t=(()=>{var h;class k{constructor(e,o){this.http=e,this.storage=o,this.apiUrl=c.c.apiUrl,this.petId=null}addPet(e){for(const[a,f]of e.entries())console.log(`${a}: ${f}`);const o=localStorage.getItem("token");return p.A.post(`${this.apiUrl}/api/pet/store`,e,{headers:{Authorization:`Bearer ${o}`,"Content-Type":"multipart/form-data"}})}getPets(){const e=localStorage.getItem("token");return p.A.get(`${this.apiUrl}/api/petOwner/pets`,{headers:{Authorization:`Bearer ${e}`}})}getPetsByOwnerId(e){const o=localStorage.getItem("token");return(0,r.H)(p.A.get(`${this.apiUrl}/api/pet_owners/${e}/pets`,{headers:{Authorization:`Bearer ${o}`}}).then(a=>(console.log("Pets by Owner ID response:",a),a.data.data)).catch(a=>{throw console.error("Error fetching pets by owner ID:",a),a}))}getPetById(e){const o=localStorage.getItem("token");return(0,r.H)(p.A.get(`${this.apiUrl}/api/pet/${e}`,{headers:{Authorization:`Bearer ${o}`}}).then(a=>(console.log("Pet response:",a),a.data.data)).catch(a=>{throw console.error("Error fetching pet:",a),a}))}getAllPets(){const e=localStorage.getItem("token");return p.A.get(`${this.apiUrl}/api/pets`,{headers:{Authorization:`Bearer ${e}`}})}fetchAllPets(){return this.getAllPets().then(e=>(console.log("All Pets response:",e),e.data.data)).catch(e=>{throw console.error("Error fetching all pets:",e),e})}fetchPets(){return this.getPets().then(e=>(console.log("Pets response:",e),e.data.data)).catch(e=>{throw console.error("Error fetching pets:",e),e})}getPet(e){return this.http.get(`${this.apiUrl}/api/pet/${e}`)}storePet(e){return this.http.post(`${this.apiUrl}/api/pet`,e)}updatePet(e,o){console.log("pet in pet-info.service====>",o);const a=localStorage.getItem("token");return p.A.post(`${this.apiUrl}/api/pet/update/${e}`,o,{headers:{Authorization:`Bearer ${a}`,"Content-Type":"multipart/form-data"}})}updateLostStatus(e,o){const a=localStorage.getItem("token");return this.http.post(`${this.apiUrl}/api/pet/update-lost-status/${e}`,{is_lost:o?1:0},{headers:{Authorization:`Bearer ${a}`}})}updateAdoptionStatus(e,o){const a=localStorage.getItem("token");return this.http.post(`${this.apiUrl}/api/pet/update-adoption-status/${e}`,{allow_adoption:o?1:0},{headers:{Authorization:`Bearer ${a}`}})}updateMatingStatus(e,o){const a=localStorage.getItem("token"),i={is_neutered:o.toLowerCase()};return this.http.post(`${this.apiUrl}/api/pet/update-mating-status/${e}`,i,{headers:{Authorization:`Bearer ${a}`}})}deleteImage(e){const o=localStorage.getItem("token");return this.http.post(`${this.apiUrl}/api/pet/delete-image/${e}`,{},{headers:{Authorization:`Bearer ${o}`}})}updateImage(e,o){const a=localStorage.getItem("token");return this.http.post(`${this.apiUrl}/api/pet/update-image/${e}`,o,{headers:{Authorization:`Bearer ${a}`}})}deletePet(e){const o=localStorage.getItem("token");return this.http.delete(`${this.apiUrl}/api/pet/${e}`,{headers:{Authorization:`Bearer ${o}`}})}setPetId(e){this.petId=e}getPetId(){return this.petId}markPetAsLost(e){return this.http.post(`${this.apiUrl}/api/pet/lost/${e}`,{})}markPetAsFound(e){return this.http.post(`${this.apiUrl}/api/pet/found/${e}`,{})}getOwnerIdByEmail(e){return this.http.get(`${this.apiUrl}/api/petOwners/byEmail`,{params:{email:e}})}updatePetOwner(e,o){return this.http.put(`${this.apiUrl}/api/pets/${e}`,{pet_owner_id:o})}addDocument(e,o){const a=localStorage.getItem("token");return p.A.post(`${this.apiUrl}/api/pet/${e}/documents`,o,{headers:{Authorization:`Bearer ${a}`,"Content-Type":"multipart/form-data"}})}uploadImage(e){return this.storage.ref(e).getDownloadURL().toPromise()}addLostPetByFounder(e){const o=localStorage.getItem("token");return p.A.post(`${this.apiUrl}/api/addLostPetByFounder`,e,{headers:{Authorization:`Bearer ${o}`,"Content-Type":"multipart/form-data"}})}fetchAllLostPets(){const e=localStorage.getItem("token");return this.http.get(`${this.apiUrl}/api/allLostPets`,{headers:{Authorization:`Bearer ${e}`}})}showLostPetByFounder(e){const o=localStorage.getItem("token");return this.http.get(`${this.apiUrl}/api/showLostPetByFounder/${e}`,{headers:{Authorization:`Bearer ${o}`}})}deleteLostPetByFounder(e){const o=localStorage.getItem("token");return this.http.delete(`${this.apiUrl}/api/deleteLostPetByFounder/${e}`,{headers:{Authorization:`Bearer ${o}`}})}}return(h=k).\u0275fac=function(e){return new(e||h)(m.KVO($.Qq),m.KVO(_.ap))},h.\u0275prov=m.jDH({token:h,factory:h.\u0275fac,providedIn:"root"}),k})()}}]);