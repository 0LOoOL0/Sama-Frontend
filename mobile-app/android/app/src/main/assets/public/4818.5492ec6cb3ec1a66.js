"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[4818],{4818:(A,R,d)=>{d.r(R),d.d(R,{SamaPetStorePageModule:()=>N});var m=d(9351),s=d(7199),p=d(7473),S=d(4170),b=d(5841),M=d(8580),e=d(315),y=d(1851),I=d(8525),l=d(5822),t=d(1301),c=d(8454);const _=()=>[0,1],F=()=>[];function C(a,g){if(1&a){const n=e.RV6();e.j41(0,"ion-toolbar",18)(1,"ion-searchbar",19),e.mxI("ngModelChange",function(r){e.eBV(n);const o=e.XpG();return e.DH7(o.searchTerm,r)||(o.searchTerm=r),e.Njj(r)}),e.bIt("ionInput",function(){e.eBV(n);const r=e.XpG();return e.Njj(r.searchProducts())}),e.k0s()()}if(2&a){const n=e.XpG();e.R7$(),e.R50("ngModel",n.searchTerm)}}function O(a,g){if(1&a){const n=e.RV6();e.j41(0,"div",9),e.bIt("click",function(){e.eBV(n);const r=e.XpG().$implicit,o=e.XpG();return e.Njj(o.addToFavorites(r))}),e.nrm(1,"img",34),e.k0s()}}function k(a,g){if(1&a){const n=e.RV6();e.j41(0,"div",9),e.bIt("click",function(){e.eBV(n);const r=e.XpG().$implicit,o=e.XpG();return e.Njj(o.addToFavorites(r))}),e.nrm(1,"img",35),e.k0s()}}function x(a,g){if(1&a&&(e.j41(0,"ion-label",36),e.EFF(1),e.k0s()),2&a){const n=e.XpG().$implicit;e.R7$(),e.SpI("x",n.quantity,"")}}function T(a,g){if(1&a){const n=e.RV6();e.j41(0,"div",20)(1,"div",21),e.bIt("click",function(){const r=e.eBV(n).$implicit,o=e.XpG();return e.Njj(o.navigateToDetails(r))}),e.nrm(2,"img",22),e.k0s(),e.j41(3,"div",23)(4,"div",24)(5,"div",25)(6,"ion-label",26),e.EFF(7),e.k0s()(),e.j41(8,"div",27)(9,"ion-label",28),e.EFF(10),e.k0s(),e.nrm(11,"br"),e.j41(12,"ion-label",29),e.EFF(13),e.k0s()()(),e.j41(14,"div",30),e.DNE(15,O,2,0,"div",31)(16,k,2,0,"div",31),e.j41(17,"div",9),e.bIt("click",function(){const r=e.eBV(n).$implicit,o=e.XpG();return e.Njj(o.addToCart(r))}),e.nrm(18,"img",32),e.DNE(19,x,2,1,"ion-label",33),e.k0s()()()()}if(2&a){const n=g.$implicit;e.R7$(2),e.FS9("alt",n.name),e.Y8G("src",n.images[0],e.B4B),e.R7$(5),e.JRh(n.name),e.R7$(3),e.SpI("",n.old_price," BD"),e.R7$(3),e.SpI("",n.new_price," BD"),e.R7$(2),e.Y8G("ngIf",!n.isFavorite),e.R7$(),e.Y8G("ngIf",n.isFavorite),e.R7$(3),e.Y8G("ngIf",n.isInCart)}}function E(a,g){if(1&a){const n=e.RV6();e.j41(0,"ion-chip",59),e.bIt("click",function(){const r=e.eBV(n).$implicit,o=e.XpG(2);return e.Njj(o.selectPetType(r))}),e.j41(1,"ion-label",60),e.EFF(2),e.k0s()()}if(2&a){const n=g.$implicit,i=e.XpG(2);e.Y8G("color",i.selectedPetType===n?"primary":"light"),e.R7$(2),e.JRh(n)}}function $(a,g){1&a&&e.nrm(0,"ion-icon",65)}function B(a,g){if(1&a){const n=e.RV6();e.j41(0,"ion-chip",61),e.bIt("click",function(){const r=e.eBV(n).$implicit,o=e.XpG(2);return e.Njj(o.selectReviewRating(r))}),e.j41(1,"div",62),e.DNE(2,$,1,0,"ion-icon",63),e.k0s(),e.j41(3,"span",64),e.EFF(4," & up"),e.k0s()()}if(2&a){const n=g.$implicit;e.R7$(2),e.Y8G("ngForOf",e.lJ4(1,F).constructor(n))}}function U(a,g){if(1&a){const n=e.RV6();e.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-title",5),e.EFF(3,"Filter"),e.k0s(),e.j41(4,"ion-buttons",6)(5,"ion-button",37),e.bIt("click",function(){e.eBV(n);const r=e.XpG();return e.Njj(r.resetFilter())}),e.EFF(6,"Reset"),e.k0s(),e.j41(7,"ion-button",37),e.bIt("click",function(){e.eBV(n);const r=e.XpG();return e.Njj(r.dismissFilter())}),e.EFF(8,"Close"),e.k0s()()()(),e.j41(9,"ion-content",38)(10,"ion-item",39)(11,"ion-label",40),e.EFF(12,"Price"),e.k0s(),e.nrm(13,"br"),e.j41(14,"div",41)(15,"ion-select",42),e.mxI("ngModelChange",function(r){e.eBV(n);const o=e.XpG();return e.DH7(o.priceOrder,r)||(o.priceOrder=r),e.Njj(r)}),e.j41(16,"ion-select-option",43),e.EFF(17,"Lowest to Highest"),e.k0s(),e.j41(18,"ion-select-option",44),e.EFF(19,"Highest to Lowest"),e.k0s()()()(),e.j41(20,"ion-item",45)(21,"div",46)(22,"div",47)(23,"ion-input",48),e.mxI("ngModelChange",function(r){e.eBV(n);const o=e.XpG();return e.DH7(o.priceRange.lower,r)||(o.priceRange.lower=r),e.Njj(r)}),e.k0s(),e.j41(24,"span",49),e.EFF(25,"BHD"),e.k0s()(),e.EFF(26," to "),e.j41(27,"div",47)(28,"ion-input",50),e.mxI("ngModelChange",function(r){e.eBV(n);const o=e.XpG();return e.DH7(o.priceRange.upper,r)||(o.priceRange.upper=r),e.Njj(r)}),e.k0s(),e.j41(29,"span",49),e.EFF(30,"BHD"),e.k0s()()()(),e.nrm(31,"br"),e.j41(32,"ion-label",51),e.EFF(33,"Pet Type"),e.k0s(),e.j41(34,"div",52),e.DNE(35,E,3,2,"ion-chip",53),e.k0s(),e.nrm(36,"br"),e.j41(37,"ion-label",54),e.EFF(38,"Reviews"),e.k0s(),e.j41(39,"div",55)(40,"div",56),e.DNE(41,B,5,2,"ion-chip",57),e.k0s()(),e.nrm(42,"br"),e.j41(43,"ion-button",58),e.bIt("click",function(){e.eBV(n);const r=e.XpG();return e.Njj(r.applyFilter())}),e.EFF(44,"Apply"),e.k0s()()}if(2&a){const n=e.XpG();e.R7$(15),e.R50("ngModel",n.priceOrder),e.R7$(8),e.R50("ngModel",n.priceRange.lower),e.R7$(5),e.R50("ngModel",n.priceRange.upper),e.R7$(7),e.Y8G("ngForOf",n.petTypes),e.R7$(6),e.Y8G("ngForOf",n.reviewRatings)}}const D=[{path:"",component:(()=>{var a;class g{constructor(i,r,o,u,P,v,h,f){this.productService=i,this.providerService=r,this.authService=o,this.favService=u,this.cartService=P,this.toastController=v,this.router=h,this.activatedRoute=f,this.products=[],this.viewType="grid",this.showFilterModal=!1,this.filterLayout="grid",this.selectedPetType=null,this.petTypes=["Dogs","Cats","Birds","Fish","Hamster","Guinea Pig","Rabbit"],this.reviewRatings=[1,2,3,4,5],this.selectedReviewRating=null,this.searchTerm="",this.type="",this.priceOrder="lowest",this.priceRange={lower:0,upper:1e3},this.isSearchVisible=!1,this.providerId=null}ngOnInit(){this.loadProducts()}loadProducts(){var i=this;this.type=this.activatedRoute.snapshot.paramMap.get("type"),this.providerService.getProviderByName("Sama Pet Store").subscribe(function(){var o=(0,b.A)(function*(u){i.productService.getProductsByProvider(u.data.id).subscribe(function(){var v=(0,b.A)(function*(h){"collar"===i.type&&(h=h.filter(f=>"collar"===f.name.toLowerCase())),i.products=yield Promise.all(h.map(function(){var f=(0,b.A)(function*(w){var j;return"string"==typeof w.images&&(w.images=JSON.parse(w.images)),w.isFavorite=!1,w.isInCart=!1,w.averageRating=null!==(j=yield i.providerService.getAverageRatingByProductId(w.id))&&void 0!==j?j:void 0,w});return function(w){return f.apply(this,arguments)}}())),i.updateProductStatus()});return function(h){return v.apply(this,arguments)}}(),v=>{console.error("Error fetching products by provider ID:",v)})});return function(u){return o.apply(this,arguments)}}(),o=>{console.error("Error fetching provider by name:",o)})}updateProductStatus(){this.authService.fetchProfileData().then(i=>{const r=i.id;this.favService.getFavsByPetOwnerId(r).subscribe(o=>{this.products.forEach(u=>{u.isFavorite=o.some(P=>P.product_id===u.id)})}),this.cartService.getCartsByPetOwnerId(r).subscribe(o=>{this.products.forEach(u=>{u.isInCart=o.some(P=>P.product_id===u.id)})})})}addToFavorites(i){var r=this;this.authService.fetchProfileData().then(o=>{const u=o.id;this.favService.isProductInFavorites(u,i.id).subscribe(P=>{P?this.favService.getFavsByPetOwnerId(u).subscribe(v=>{const h=v.find(f=>f.product_id===i.id);h&&void 0!==h.id&&this.favService.deleteFav(h.id).subscribe((0,b.A)(function*(){i.isFavorite=!1,yield(0,M.P)(r.toastController,"Item removed from favorites","danger")}),f=>{console.error("Error removing from favorites:",f)})}):this.favService.createFav({pet_owner_id:u,product_id:i.id}).subscribe((0,b.A)(function*(){i.isFavorite=!0,yield(0,M.P)(r.toastController,"Item added to favorites","success")}),h=>{console.error("Error adding to favorites:",h)})})})}addToCart(i){var r=this;this.authService.fetchProfileData().then(o=>{const u=o.id;this.cartService.isProductInCart(u,i.id).subscribe(P=>{P?this.cartService.getCartsByPetOwnerId(u).subscribe(v=>{const h=v.find(f=>f.product_id===i.id);h&&void 0!==h.id&&(h.quantity+=1,this.cartService.updateCart(h.id,h).subscribe((0,b.A)(function*(){yield(0,M.P)(r.toastController,"Quantity updated","success")}),f=>{console.error("Error updating cart quantity:",f)}))}):this.cartService.createCart({id:0,pet_owner_id:u,product_id:i.id,quantity:1}).subscribe((0,b.A)(function*(){i.isInCart=!0,yield(0,M.P)(r.toastController,"Item added to cart","success")}),h=>{console.error("Error adding to cart:",h)})})})}openSearch(){this.isSearchVisible=!this.isSearchVisible}searchProducts(){this.filterProducts()}openFilter(){this.showFilterModal=!0}dismissFilter(){this.showFilterModal=!1}applyFilter(){this.viewType=this.filterLayout,this.dismissFilter(),this.filterProducts()}resetFilter(){this.filterLayout="grid",this.selectedPetType=null,this.selectedReviewRating=null,this.searchTerm="",this.priceOrder="lowest",this.priceRange={lower:0,upper:1e3},this.loadProducts()}filterProducts(){let i=this.products.filter(r=>{const o=!this.selectedPetType||r.pet_type.includes(this.selectedPetType),u=!this.searchTerm||r.name.toLowerCase().includes(this.searchTerm.toLowerCase()),P=r.new_price>=this.priceRange.lower&&r.new_price<=this.priceRange.upper,v=null===this.selectedReviewRating||void 0!==r.averageRating&&Math.round(r.averageRating)>=this.selectedReviewRating;return o&&u&&P&&v});i.sort((r,o)=>"lowest"===this.priceOrder?r.new_price-o.new_price:o.new_price-r.new_price),this.products=i}selectReviewRating(i){this.selectedReviewRating=i,console.log(`Selected rating: ${i}`),this.filterProducts()}filterProductsByRating(i){console.log(`Filtering products with rating ${i} or higher.`)}selectPetType(i){this.selectedPetType=this.selectedPetType===i?null:i,this.filterProducts()}navigateToDetails(i){this.router.navigate(["/product-details",i.id])}}return(a=g).\u0275fac=function(i){return new(i||a)(e.rXU(y.b),e.rXU(I.$),e.rXU(l.u),e.rXU(t.L),e.rXU(c.m),e.rXU(p.K_),e.rXU(S.Ix),e.rXU(S.nX))},a.\u0275cmp=e.VBU({type:a,selectors:[["app-sama-pet-store"]],decls:28,vars:6,consts:[[1,"headerImgContainer"],[1,"headerImg"],["src","assets/collerframe.svg","alt","Pet Collars Banner"],["slot","start"],[1,"header-margin-Single-Line"],[1,"titleFont"],["slot","end"],["routerLink","/sama-pet-store/collar"],["routerLink","/coupon"],[3,"click"],["src","/assets/icons/search.svg",1,"icon"],["src","assets/icons/filter.svg",1,"icon"],[1,"ion-padding"],["class","search-bar",4,"ngIf"],[1,"MakeItCenter"],[1,"MakeItAGride","gridContainer"],["class","singleCell",4,"ngFor","ngForOf"],[1,"bodyFont","modal",3,"ionModalDidDismiss","isOpen","initialBreakpoint","breakpoints"],[1,"search-bar"],["debounce","0",3,"ngModelChange","ionInput","ngModel"],[1,"singleCell"],[1,"imgContainer",3,"click"],[3,"src","alt"],[1,"FlexSpaceInBetween","textContainer"],[1,"titleAndPriceContainer"],[1,"titleContainer","break-word"],[1,"bodyFont","boldFont"],[1,"prices"],["id","old",1,"bodyFont","textGray","boldFont","smallFont","location"],["id","new",1,"bodyFont","boldFont","smallFont","location"],[1,"MakeItFlex"],[3,"click",4,"ngIf"],["id","add","src","/assets/icons/plus-filled.svg",1,"icon"],["class","quantity-label",4,"ngIf"],["src","/assets/heart.svg",1,"icon"],["src","/assets/heartr.svg",1,"icon"],[1,"quantity-label"],[1,"bodyFont",3,"click"],[1,"content-container"],[1,"price"],[1,"bodyFont","price-label"],[1,"price-select"],[3,"ngModelChange","ngModel"],["value","lowest",1,"bodyFont","price"],["value","highest",1,"bodyFont","price"],[1,"price-range"],[1,"price-container"],[1,"input-wrapper"],["placeholder","0","type","number","min","0",1,"price-input",3,"ngModelChange","ngModel"],[1,"currency","bodyFont"],["placeholder","1000","type","number","min","0",1,"price-input",3,"ngModelChange","ngModel"],[1,"bodyFont","type-label"],[1,"pet-type-chips"],["class","button-container pet-types",3,"color","click",4,"ngFor","ngForOf"],[1,"bodyFont","review-label"],[1,"review"],[1,"review-options"],["class","rev-chip",3,"click",4,"ngFor","ngForOf"],["expand","block",1,"apply-button","bodyFont",3,"click"],[1,"button-container","pet-types",3,"click","color"],[1,"bodyFont","pet-types"],[1,"rev-chip",3,"click"],[1,"stars"],["name","star","slot","start","src","assets/icons/Star.svg","class","img",4,"ngFor","ngForOf"],[1,"bodyFont"],["name","star","slot","start","src","assets/icons/Star.svg",1,"img"]],template:function(i,r){1&i&&(e.j41(0,"ion-app")(1,"ion-header",0)(2,"div",1),e.nrm(3,"img",2),e.k0s()(),e.j41(4,"ion-header")(5,"ion-toolbar")(6,"ion-buttons",3),e.nrm(7,"ion-back-button"),e.k0s(),e.j41(8,"div",4)(9,"ion-label",5),e.EFF(10,"Sama Pet Store"),e.k0s()(),e.j41(11,"ion-buttons",6)(12,"ion-button",7),e.EFF(13," collars "),e.k0s(),e.j41(14,"ion-button",8),e.EFF(15," coupons "),e.k0s(),e.j41(16,"ion-button",9),e.bIt("click",function(){return r.openSearch()}),e.nrm(17,"img",10),e.k0s(),e.j41(18,"ion-button",9),e.bIt("click",function(){return r.openFilter()}),e.nrm(19,"img",11),e.k0s()()()(),e.j41(20,"ion-content",12),e.DNE(21,C,2,1,"ion-toolbar",13),e.j41(22,"div",14)(23,"div")(24,"div",15),e.DNE(25,T,20,8,"div",16),e.k0s()()()(),e.j41(26,"ion-modal",17),e.bIt("ionModalDidDismiss",function(){return r.dismissFilter()}),e.DNE(27,U,45,5,"ng-template"),e.k0s()()),2&i&&(e.R7$(21),e.Y8G("ngIf",r.isSearchVisible),e.R7$(4),e.Y8G("ngForOf",r.products),e.R7$(),e.Y8G("isOpen",r.showFilterModal)("initialBreakpoint",1)("breakpoints",e.lJ4(5,_)))},dependencies:[m.Sq,m.bT,s.BC,s.vS,p.U1,p.Jm,p.QW,p.ZB,p.W9,p.eU,p.iq,p.$w,p.uz,p.he,p.S1,p.Nm,p.Ip,p.BC,p.ai,p.Sb,p.su,p.Je,p.Gw,p.el,p.N7,p.T6,S.Wk],styles:[".headerImgContainer[_ngcontent-%COMP%]{height:30%;max-height:246px}.headerImg[_ngcontent-%COMP%]{width:100%;height:100%;overflow:hidden}.headerImg[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:auto}.icon[_ngcontent-%COMP%]{width:24px;height:auto}.header-margin-Single-Line[_ngcontent-%COMP%]{margin-top:0}.ion-padding[_ngcontent-%COMP%]{--padding-top: 0px}.gridContainer[_ngcontent-%COMP%]{max-width:350px}.singleCell[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin:5px;padding:10px;border-radius:16px;background-color:var(--White)}.imgContainer[_ngcontent-%COMP%]{width:100%;height:50%;border-radius:16px;position:relative;overflow:hidden}.imgContainer[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;border-radius:16px;height:100%;object-fit:cover;object-position:center}.textContainer[_ngcontent-%COMP%]{height:45%}.titleAndPriceContainer[_ngcontent-%COMP%]{margin-top:10px;width:60%;display:flex;flex-direction:column}.titleContainer[_ngcontent-%COMP%]{width:100%}.prices[_ngcontent-%COMP%]{margin-top:auto}.break-word[_ngcontent-%COMP%]{word-break:break-word;overflow-wrap:break-word;white-space:normal}#add[_ngcontent-%COMP%]{margin-left:3px}#old[_ngcontent-%COMP%]{text-decoration:line-through}#new[_ngcontent-%COMP%]{color:var(--Main-One)!important}@media screen and (max-width: 380px){.textContainer[_ngcontent-%COMP%]{height:auto}}ion-content[_ngcontent-%COMP%]{--background: none}ion-item[_ngcontent-%COMP%]{border:none;--background: transparent;--ion-item-border-width: 0;--ion-item-border-color: transparent}.modal[_ngcontent-%COMP%]{--border-radius: 16px;--width: 100%;--height: 60%;position:flex}",".price-range[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;border-radius:16px;--ion-item-border-width: 0;--ion-item-border-color: transparent}.price-container[_ngcontent-%COMP%]{display:flex;align-items:center}.input-wrapper[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center}.price-input[_ngcontent-%COMP%]{margin:0 5px;border:1px solid #ccc;padding:5px;border-radius:16px;text-align:center}.currency[_ngcontent-%COMP%]{margin:0 5px;position:absolute;right:10px}.pet-type-chips[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:left}.pet-types[_ngcontent-%COMP%]{background-color:var(--background-color);border:none;padding:4px;border-radius:16px;width:45;height:35px;margin:10px 10px 5px}.review[_ngcontent-%COMP%]{margin-left:8px;margin-right:8px}.review-options[_ngcontent-%COMP%]{display:flex;gap:10px;flex-wrap:wrap;margin-top:10px}ion-chip[_ngcontent-%COMP%]   .rev-chip[_ngcontent-%COMP%]{display:flex;align-items:center;padding:5px 10px;border-radius:16px;background-color:var(--background-color)}ion-chip[_ngcontent-%COMP%]   .rev-chip[_ngcontent-%COMP%]   .stars[_ngcontent-%COMP%]{display:flex}ion-chip[_ngcontent-%COMP%]   .rev-chip[_ngcontent-%COMP%]   .stars[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:25px;height:25px;margin-right:2px}ion-chip[_ngcontent-%COMP%]   .rev-chip[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-left:5px;font-size:14px;color:var(--background-color)}.review-label[_ngcontent-%COMP%], .type-label[_ngcontent-%COMP%], .price-label[_ngcontent-%COMP%]{padding:16px;margin-bottom:12px}.apply-button[_ngcontent-%COMP%]{--border-radius: 16px;--background: var(--Main-One);color:#fff!important;margin-left:8px;margin-right:8px;height:45px;font-size:large;margin-bottom:10px}"]}),g})()}];let G=(()=>{var a;class g{}return(a=g).\u0275fac=function(i){return new(i||a)},a.\u0275mod=e.$C({type:a}),a.\u0275inj=e.G2t({imports:[S.iI.forChild(D),S.iI]}),g})(),N=(()=>{var a;class g{}return(a=g).\u0275fac=function(i){return new(i||a)},a.\u0275mod=e.$C({type:a}),a.\u0275inj=e.G2t({imports:[m.MD,s.YN,p.bv,G]}),g})()},5822:(A,R,d)=>{d.d(R,{u:()=>M});var m=d(5841),s=d(496),p=d(878),S=d(315),b=d(6e3);s.A.defaults.withCredentials=!0;let M=(()=>{var e;class y{constructor(l){this.http=l,this.apiUrl=p.c.apiUrl}getCSRFToken(){return s.A.get(`${this.apiUrl}/sanctum/csrf-cookie`)}register(l){var t=this;return(0,m.A)(function*(){return yield t.getCSRFToken(),s.A.post(`${t.apiUrl}/api/register`,l).then(c=>(localStorage.setItem("token",c.data.token),c.data)).catch(c=>{throw console.error("Login error:",c),c})})()}checkEmail(l){return s.A.post(`${this.apiUrl}/api/check-email`,{email:l})}sendVerificationCode(l){return s.A.post(`${this.apiUrl}/api/send-verification-code`,{email:l})}verifyCode(l){return s.A.post(`${this.apiUrl}/api/verify-code`,l)}login(l){var t=this;return(0,m.A)(function*(){return yield t.getCSRFToken(),s.A.post(`${t.apiUrl}/api/login`,l).then(c=>(localStorage.setItem("token",c.data.token),c.data)).catch(c=>{throw console.error("Login error:",c),c})})()}logout(){const l=localStorage.getItem("token");return s.A.post(`${this.apiUrl}/api/logout`,{},{headers:{Authorization:`Bearer ${l}`}}).then(()=>{localStorage.removeItem("token")})}getProfile(){var l=this;return(0,m.A)(function*(){const t=localStorage.getItem("token");return(yield s.A.get(`${l.apiUrl}/api/petOwner/profile`,{headers:{Authorization:`Bearer ${t}`}})).data.data})()}fetchProfileData(){var l=this;return(0,m.A)(function*(){try{const t=yield l.getProfile();return console.log("Profile response:",t),t}catch(t){throw console.error("Error fetching profile:",t),t}})()}getPetOwnerData(l){const t=localStorage.getItem("token");return s.A.get(`${this.apiUrl}/api/pet_owner/${l}`,{headers:{Authorization:`Bearer ${t}`}})}fetchPetOwnerData(l){return console.log("th id in auth=====>",l),this.getPetOwnerData(l).then(t=>(console.log("pet owner data:",t),t.data.data)).catch(t=>{throw console.error("Error fetching pet owner:",t),t})}updateProfile(l,t){const c=localStorage.getItem("token");return s.A.put(`${this.apiUrl}/api/pet_owner/${t}`,l,{headers:{Authorization:`Bearer ${c}`}})}updateProfileImage(l,t){const c=localStorage.getItem("token");return s.A.post(`${this.apiUrl}/api/pet_owner/image/${t}`,l,{headers:{Authorization:`Bearer ${c}`}})}updatePass(l,t,c){var _=this;return(0,m.A)(function*(){const F=localStorage.getItem("token");try{return(yield s.A.put(`${_.apiUrl}/api/pet-owners/update-password`,{email:l,password:t,password_confirmation:c},{headers:{Authorization:`Bearer ${F}`}})).data}catch(C){throw console.error("Error updating password:",C),C}})()}}return(e=y).\u0275fac=function(l){return new(l||e)(S.KVO(b.Qq))},e.\u0275prov=S.jDH({token:e,factory:e.\u0275fac,providedIn:"root"}),y})()},8525:(A,R,d)=>{d.d(R,{$:()=>e});var m=d(5841),s=d(496),p=d(878),S=d(5109),b=d(6200),M=d(315);s.A.defaults.withCredentials=!0;let e=(()=>{var y;class I{constructor(){this.apiUrl=`${p.c.apiUrl}/api`,s.A.interceptors.request.use(t=>{const c=localStorage.getItem("token");return c&&(t.headers.Authorization=`Bearer ${c}`),t},t=>Promise.reject(t))}getAllProviders(){return s.A.get(`${this.apiUrl}/providers`)}getProviderById(t){return s.A.get(`${this.apiUrl}/providers/${t}`)}getProviderById2(t){return(0,S.H)(s.A.get(`${this.apiUrl}/providers/${t}`)).pipe((0,b.T)(c=>c.data))}createProvider(t){return s.A.post(`${this.apiUrl}/providers`,t)}getAllProviders2(){var t=this;return(0,m.A)(function*(){return s.A.get(`${t.apiUrl}/providers`).then(c=>c.data)})()}updateProvider(t,c){return s.A.put(`${this.apiUrl}/providers/${t}`,c)}deleteProvider(t){return s.A.delete(`${this.apiUrl}/providers/${t}`)}getServicesByProviderId(t){return s.A.get(`${this.apiUrl}/providers/${t}/services`)}getProductsByProviderId(t){return s.A.get(`${this.apiUrl}/providers/${t}/products`)}getVeterinariansByProviderId(t){return s.A.get(`${this.apiUrl}/providers/${t}/veterinarians`)}getVeterianById(t){return s.A.get(`${this.apiUrl}/veterinarians/${t}`)}getServiceById(t){return s.A.get(`${this.apiUrl}/services/${t}`)}getProductById(t){return s.A.get(`${this.apiUrl}/products/${t}`)}getServiceReviewsByServiceId(t){return s.A.get(`${this.apiUrl}/services/${t}/reviews`)}getPetOwnerById(t){return s.A.get(`${this.apiUrl}/pet_owners/${t}`)}getProductReviewsByProductId(t){return s.A.get(`${this.apiUrl}/products/${t}/reviews`)}getProviderByName(t){return(0,S.H)(s.A.get(`${this.apiUrl}/providers/name/${t}`))}addReview(t){var c=this;return(0,m.A)(function*(){try{console.log("Review data before sending:",t);const _=yield s.A.post(`${c.apiUrl}/reviews`,t);return console.log("Server response:",_.data),_.data}catch(_){throw console.error("Error adding review:",_),_}})()}getAverageRatingByProviderId(t){var c=this;return(0,m.A)(function*(){try{const F=(yield c.getServicesByProviderId(t)).data;let C=0,O=0;for(const x of F)(yield c.getServiceReviewsByServiceId(x.id)).data.forEach($=>{O+=$.rate,C++});return C>0?O/C:0}catch(_){throw console.error("Error calculating average rating:",_),_}})()}getAverageRatingByProductId(t){var c=this;return(0,m.A)(function*(){try{const F=(yield s.A.get(`${c.apiUrl}/products/${t}/reviews`)).data;return 0===F.length?null:F.reduce((O,k)=>O+k.rate,0)/F.length}catch(_){throw console.error("Error fetching reviews:",_),_}})()}}return(y=I).\u0275fac=function(t){return new(t||y)},y.\u0275prov=M.jDH({token:y,factory:y.\u0275fac,providedIn:"root"}),I})()}}]);