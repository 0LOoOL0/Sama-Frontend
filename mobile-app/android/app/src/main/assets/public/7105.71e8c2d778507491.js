(self.webpackChunkapp=self.webpackChunkapp||[]).push([[7105],{7105:(k,s,l)=>{"use strict";l.r(s),l.d(s,{QRCardPageModule:()=>F});var r=l(9351),n=l(7199),e=l(7473),o=l(4170),i=l(5841),c=l(8184),u=l(9842),a=l(1016),g=l(6200),t=l(315),A=l(4330),C=l(5822),m=l(1572),_=l(5110);const O=()=>[0,.5,1];function j(f,L){if(1&f){const w=t.RV6();t.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),t.EFF(3,"Enter Redeem Code"),t.k0s(),t.j41(4,"ion-buttons",21)(5,"ion-button",22),t.bIt("click",function(){t.eBV(w);const h=t.XpG();return t.Njj(h.closeRedeemModal())}),t.EFF(6,"Close"),t.k0s()()()(),t.j41(7,"ion-content")(8,"ion-item")(9,"ion-label",23),t.EFF(10,"Enter Code"),t.k0s(),t.j41(11,"ion-input",14),t.mxI("ngModelChange",function(h){t.eBV(w);const T=t.XpG();return t.DH7(T.redeemCode,h)||(T.redeemCode=h),t.Njj(h)}),t.k0s()(),t.j41(12,"ion-button",24),t.bIt("click",function(){t.eBV(w);const h=t.XpG();return t.Njj(h.submitRedeemCode())}),t.EFF(13,"Submit"),t.k0s()()}if(2&f){const w=t.XpG();t.R7$(11),t.R50("ngModel",w.redeemCode)}}function R(f,L){if(1&f&&(t.j41(0,"div",25)(1,"ion-label",26),t.EFF(2),t.k0s(),t.j41(3,"ion-label",27),t.EFF(4,"Country: Bahrain "),t.k0s(),t.j41(5,"ion-label",27),t.EFF(6),t.k0s(),t.j41(7,"ion-label",27),t.EFF(8,"Valid date: TBA years"),t.k0s(),t.j41(9,"ion-label",27),t.EFF(10),t.k0s()()),2&f){const w=t.XpG();t.R7$(2),t.SpI("Breed: ",null==w.selectedPet?null:w.selectedPet.name,""),t.R7$(4),t.SpI("Gender: ",null==w.selectedPet?null:w.selectedPet.gender,""),t.R7$(4),t.SpI("Owner's name: ",null==w.profile?null:w.profile.first_name,"")}}function N(f,L){if(1&f&&t.nrm(0,"img",30),2&f){const w=t.XpG(2);t.Y8G("src",w.qrCodeUrl,t.B4B)}}function B(f,L){if(1&f&&(t.j41(0,"div",28),t.DNE(1,N,1,1,"img",29),t.k0s()),2&f){const w=t.XpG();t.R7$(),t.Y8G("ngIf",w.qrCodeUrl)}}function E(f,L){1&f&&t.nrm(0,"img",31)}function U(f,L){if(1&f&&t.nrm(0,"img",32),2&f){const w=t.XpG();t.FS9("alt",w.selectedPet.name),t.Y8G("src",w.selectedPet.image?w.selectedPet.image:"assets/mypet.svg",t.B4B)}}function x(f,L){if(1&f&&(t.j41(0,"ion-select-option",33)(1,"div",34),t.EFF(2),t.k0s()()),2&f){const w=L.$implicit;t.Y8G("value",w.id),t.R7$(2),t.SpI(" ",w.name," ")}}function y(f,L){if(1&f){const w=t.RV6();t.j41(0,"div",39)(1,"div",40)(2,"ion-thumbnail",41),t.nrm(3,"img",42),t.k0s()(),t.j41(4,"div",43)(5,"ion-label",44)(6,"h2",45),t.EFF(7),t.k0s(),t.j41(8,"div",46)(9,"p",47),t.EFF(10),t.k0s()(),t.j41(11,"div",46)(12,"ion-button",48),t.bIt("click",function(){const h=t.eBV(w).$implicit,T=t.XpG(2);return t.Njj(T.openRedeemModal(h.id))}),t.EFF(13,"REDEEM"),t.k0s(),t.j41(14,"p",49),t.EFF(15),t.k0s()()()()()}if(2&f){const w=L.$implicit;t.R7$(3),t.Y8G("src",null==w?null:w.image,t.B4B),t.R7$(4),t.JRh(w.title),t.R7$(3),t.JRh(w.description),t.R7$(5),t.JRh(w.expiration_date)}}function I(f,L){if(1&f&&(t.j41(0,"div",39)(1,"div",40)(2,"ion-thumbnail",41),t.nrm(3,"img",42),t.k0s()(),t.j41(4,"div",43)(5,"ion-label",44)(6,"h2",45),t.EFF(7),t.k0s(),t.j41(8,"div",46)(9,"p",47),t.EFF(10),t.k0s()(),t.j41(11,"div",46)(12,"ion-button",50),t.EFF(13,"REDEEM"),t.k0s(),t.j41(14,"p",49),t.EFF(15),t.k0s()()()()()),2&f){const w=L.$implicit;t.R7$(3),t.Y8G("src",null==w.coupon?null:w.coupon.image,t.B4B),t.R7$(4),t.JRh(null==w.coupon?null:w.coupon.title),t.R7$(3),t.JRh(null==w.coupon?null:w.coupon.description),t.R7$(5),t.JRh(null==w.coupon?null:w.coupon.expiration_date)}}function P(f,L){if(1&f&&(t.j41(0,"div")(1,"div",35)(2,"ion-button",36),t.EFF(3,"BUY MORE COUPONS"),t.k0s()(),t.j41(4,"ion-list")(5,"ion-label",26),t.EFF(6,"Owned"),t.k0s(),t.nrm(7,"br")(8,"br"),t.DNE(9,y,16,4,"div",37),t.k0s(),t.nrm(10,"br"),t.j41(11,"ion-list",38)(12,"ion-label",26),t.EFF(13,"Used"),t.k0s(),t.nrm(14,"br")(15,"br"),t.DNE(16,I,16,4,"div",37),t.k0s()()),2&f){const w=t.XpG();t.R7$(9),t.Y8G("ngForOf",w.coupons),t.R7$(7),t.Y8G("ngForOf",w.usedCoupons)}}function p(f,L){if(1&f&&t.nrm(0,"img",30),2&f){const w=t.XpG(2);t.Y8G("src",w.qrCodeUrl,t.B4B)}}function v(f,L){if(1&f&&(t.j41(0,"div",51)(1,"div",52)(2,"div",53),t.nrm(3,"img",54),t.k0s(),t.DNE(4,p,1,1,"img",29),t.j41(5,"div",55),t.nrm(6,"img",56),t.k0s()(),t.j41(7,"ion-label",57),t.EFF(8,"Present QR code to vendor"),t.k0s(),t.nrm(9,"br"),t.k0s()),2&f){const w=t.XpG();t.R7$(),t.FS9("title",w.qrCodeUrl),t.R7$(3),t.Y8G("ngIf",w.qrCodeUrl)}}const M=[{path:"",component:(()=>{var f;class L{constructor(d,h,T,D,z,V){this.couponService=d,this.authService=h,this.petInfoService=T,this.navCtrl=D,this.modalController=z,this.alertController=V,this.segment="coupons",this.pets=[],this.profile={},this.petOwnerId=0,this.selectedCouponId=null,this.coupons=[],this.usedCoupons=[],this.showRedeemModal=!1,this.redeemCode=""}ngOnInit(){var d=this;return(0,i.A)(function*(){try{const h=yield d.authService.fetchProfileData();d.profile=h,console.log("Profile data:",d.profile),d.petOwnerId=d.profile.id,yield d.fetchCouponUsages(d.petOwnerId),yield d.fetchMembershipCoupons(),d.petInfoService.fetchPets().then(T=>{d.pets=T,d.loadImages(d.pets),console.log("Fetched pets:",d.pets)}).catch(T=>{console.error("Error fetching pets data:",T)}),d.generateQrCode()}catch(h){console.error("Error initializing component:",h)}})()}fetchMembershipCoupons(){var d=this;return(0,i.A)(function*(){if(d.coupons.length>0)console.log("Coupons already fetched:",d.coupons);else try{const h=yield d.couponService.getCouponUsagesByOwnerId(d.petOwnerId).toPromise();console.log("Fetched coupon usages:",h);const T=null==h?void 0:h.map(D=>D.coupon_id);console.log("Used Coupon IDs:",T),d.couponService.getMembershipCoupons().subscribe(D=>{console.log("Fetched membership coupons:",D),d.coupons=D.filter(z=>!(null!=T&&T.includes(z.id))),console.log("Available coupons after removing used ones:",d.coupons)},D=>{console.error("Error fetching membership coupons:",D)})}catch(h){console.error("Error fetching coupon usages:",h)}})()}fetchCouponUsages(d){var h=this;return(0,i.A)(function*(){h.couponService.getCouponUsagesByOwnerId(d).pipe((0,a.n)(T=>{const D=T.map(Y=>Y.coupon_id),V=[...new Set(D)].map(Y=>h.couponService.getCouponById(Y).pipe((0,g.T)($=>{const J=T.find(G=>G.coupon_id===Y);if(J)return J.coupon=$,J})));return(0,u.p)(V).pipe((0,g.T)(Y=>Y.filter($=>void 0!==$)))})).subscribe(T=>{h.usedCoupons=T,console.log("Fetched coupon usages with details:",h.usedCoupons)},T=>{console.error("Error fetching coupon details:",T)})})()}selectPet(d){console.log(d),this.selectedPetId=d,this.selectedPet=this.pets.find(h=>h.id===d),this.generateQrCode()}loadImages(d){var h=this;return(0,i.A)(function*(){for(let T of d)T.image&&(T.imageUrl=yield h.petInfoService.uploadImage(T.image))})()}generateQrCode(){c.dY(`http://localhost:4300/qrcode/${this.selectedPetId}`).then(h=>{this.qrCodeUrl=h}).catch(h=>{console.error("QR Code generation failed:",h)})}openRedeemModal(d){this.selectedCouponId=d,this.showRedeemModal=!0}closeRedeemModal(){this.showRedeemModal=!1,this.selectedCouponId=null}submitRedeemCode(){var d=this;return(0,i.A)(function*(){if(null!==d.selectedCouponId)if(""!==d.redeemCode){console.log("Coupon ID:",d.selectedCouponId),console.log("Redeem Code:",d.redeemCode);try{const h=yield d.couponService.getCouponById(d.selectedCouponId).toPromise();if((null==h?void 0:h.code)===d.redeemCode){console.log("Redeem code is valid.");const T=(new Date).toISOString().split("T")[0];yield d.couponService.addCouponUsage(d.petOwnerId,d.selectedCouponId,T),yield d.couponService.reduceCouponQuantity(d.selectedCouponId),yield d.presentAlert("Success","Coupon redeemed successfully!")}else console.log("Invalid redeem code."),yield d.presentAlert("Error","Invalid redeem code.")}catch(h){console.error("Error fetching coupon or adding coupon usage:",h),yield d.presentAlert("Error","An error occurred while redeeming the coupon.")}finally{d.closeRedeemModal()}}else yield d.presentAlert("Error","Redeem code is empty.");else yield d.presentAlert("Error","Selected coupon ID is null.")})()}presentAlert(d,h){var T=this;return(0,i.A)(function*(){const D=yield T.alertController.create({header:d,message:h,buttons:["OK"]});yield D.present(),yield D.onDidDismiss(),T.coupons=[],T.usedCoupons=[],yield T.fetchMembershipCoupons(),yield T.fetchCouponUsages(T.petOwnerId)})()}}return(f=L).\u0275fac=function(d){return new(d||f)(t.rXU(A.O),t.rXU(C.u),t.rXU(m.d),t.rXU(_.q9),t.rXU(e.W3),t.rXU(e.hG))},f.\u0275cmp=t.VBU({type:f,selectors:[["app-qr-card"]],decls:32,vars:14,consts:[["slot","start",1,"backButton"],[1,"centered-title","titleFont"],[1,"ion-padding"],["backdropDismiss","true",1,"modal-content",3,"ionModalDidDismiss","isOpen","breakpoints","initialBreakpoint"],[1,"MakeItCenter"],[1,"card-content","FlexSpaceInBetween"],["class","MakeItFlexAsAColumnNoCenter",4,"ngIf"],["class","in-card-qr",4,"ngIf"],[1,"selector","bodyFont"],["toggleIcon","assets/icons/expand.svg","interface","popover","placeholder","Select Pet",1,"bodyFont",3,"ngModelChange","ionChange","ngModel"],["class","pfp","slot","start","src","assets/mypet.svg","alt","no pet",4,"ngIf"],["class","pfp","slot","start",3,"src","alt",4,"ngIf"],[3,"value",4,"ngFor","ngForOf"],[1,"segmentContainer"],[3,"ngModelChange","ngModel"],["value","coupons"],[1,"purpleUnderline"],["value","qr-code"],[1,"contentContainer",3,"ngSwitch"],[4,"ngSwitchCase"],["class","MakeItCenter MakeItFlexAsAColumn",4,"ngSwitchCase"],["slot","end"],[3,"click"],["position","floating"],["expand","block",3,"click"],[1,"MakeItFlexAsAColumnNoCenter"],[1,"blackTitleFont"],[1,"bodyFont","boldFont"],[1,"in-card-qr"],["alt","QR Code",3,"src",4,"ngIf"],["alt","QR Code",3,"src"],["slot","start","src","assets/mypet.svg","alt","no pet",1,"pfp"],["slot","start",1,"pfp",3,"src","alt"],[3,"value"],[2,"display","flex","align-items","center"],[1,"button-container"],["expand","full","routerLink","/coupon","fill","clear",1,"Buttons"],["class","coupon",4,"ngFor","ngForOf"],[1,"used"],[1,"coupon"],[1,"ListIcon"],["slot","start"],["alt","Coupon Image",3,"src"],[1,"ListDetails"],[1,"ion-text-wrap"],[1,"bodyFont"],[1,"inOneLine"],[1,"bodyFont","smallFont"],["expand","full","fill","clear",1,"FilledButtons","smallFont",3,"click"],["id","date",1,"textGray","smallFont"],["expand","full","fill","clear",1,"FilledButtons","smallFont"],[1,"MakeItCenter","MakeItFlexAsAColumn"],["id","qr",1,"qr-code-container","MakeItCenter",3,"title"],[1,"blue-paw"],["src","assets/blue-paw.svg"],[1,"yellow-paw"],["src","assets/yellow-paw.svg"],["id","textGray",1,"bodyFont"]],template:function(d,h){1&d&&(t.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",0),t.nrm(3,"ion-back-button"),t.k0s(),t.j41(4,"ion-label",1),t.EFF(5,"Digital card"),t.k0s()()(),t.j41(6,"ion-content",2)(7,"ion-modal",3),t.bIt("ionModalDidDismiss",function(){return h.closeRedeemModal()}),t.DNE(8,j,14,1,"ng-template"),t.k0s(),t.j41(9,"div",4)(10,"div",5),t.DNE(11,R,11,3,"div",6)(12,B,2,1,"div",7),t.k0s()(),t.nrm(13,"br"),t.j41(14,"ion-buttons",8)(15,"ion-select",9),t.mxI("ngModelChange",function(D){return t.DH7(h.selectedPetId,D)||(h.selectedPetId=D),D}),t.bIt("ionChange",function(D){return h.selectPet(D.detail.value)}),t.DNE(16,E,1,0,"img",10)(17,U,1,2,"img",11)(18,x,3,2,"ion-select-option",12),t.k0s()(),t.nrm(19,"br"),t.j41(20,"div",4)(21,"div",13)(22,"ion-segment",14),t.mxI("ngModelChange",function(D){return t.DH7(h.segment,D)||(h.segment=D),D}),t.j41(23,"ion-segment-button",15)(24,"div",16),t.EFF(25,"Coupons"),t.k0s()(),t.j41(26,"ion-segment-button",17),t.EFF(27,"QR Code"),t.k0s()(),t.j41(28,"div",18),t.nrm(29,"br"),t.DNE(30,P,17,2,"div",19)(31,v,10,2,"div",20),t.k0s()()()()),2&d&&(t.R7$(7),t.Y8G("isOpen",h.showRedeemModal)("breakpoints",t.lJ4(13,O))("initialBreakpoint",.5),t.R7$(4),t.Y8G("ngIf",h.selectedPet),t.R7$(),t.Y8G("ngIf",h.selectedPet),t.R7$(3),t.R50("ngModel",h.selectedPetId),t.R7$(),t.Y8G("ngIf",!h.selectedPet),t.R7$(),t.Y8G("ngIf",h.selectedPet),t.R7$(),t.Y8G("ngForOf",h.pets),t.R7$(4),t.R50("ngModel",h.segment),t.R7$(6),t.Y8G("ngSwitch",h.segment),t.R7$(2),t.Y8G("ngSwitchCase","coupons"),t.R7$(),t.Y8G("ngSwitchCase","qr-code"))},dependencies:[r.Sq,r.bT,r.ux,r.e1,n.BC,n.vS,e.Jm,e.QW,e.W9,e.eU,e.$w,e.uz,e.he,e.nf,e.Gp,e.eP,e.Nm,e.Ip,e.Zx,e.BC,e.ai,e.Sb,e.Je,e.Gw,e.el,e.N7,o.Wk],styles:[".centered-title[_ngcontent-%COMP%]{position:fixed;top:30px;left:50%;transform:translate(-50%)}.backButton[_ngcontent-%COMP%]{margin-top:16px}.card-content[_ngcontent-%COMP%]{display:flex;align-items:center;width:100%;max-width:350px;height:206px;padding:40px 10px 10px;border-radius:16px;background:url(/assets/pet-card.jpeg);background-size:cover;background-position:center}.in-card-qr[_ngcontent-%COMP%]{background-color:red;width:100px;height:100px;margin-left:10px}.in-card-qr[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;object-position:center}ion-select[_ngcontent-%COMP%], ion-select-option[_ngcontent-%COMP%]{font-weight:600}  ion-select-popover{--background: white !important}  ion-select-popover ion-list{background-color:#fff!important}  ion-select-popover ion-list ion-item{--background: white !important;--color: black !important}  .select-interface-option{background-color:#fff!important;color:#000!important}.pfp[_ngcontent-%COMP%]{width:33px;height:33px;border-radius:50%}.selector[_ngcontent-%COMP%]{max-width:160px;margin:0 auto}.img[_ngcontent-%COMP%]{width:50px;height:50px;border-radius:50%;object-fit:cover;margin-right:10px}.segmentContainer[_ngcontent-%COMP%]{width:100%;max-width:350px;background-color:var(--White);padding:16px;border-radius:16px;border:1px solid var(--GrayColor)}.contentContainer[_ngcontent-%COMP%]{border-top:1px solid var(--GrayColor)}ion-segment-button.md[_ngcontent-%COMP%]::part(native), ion-segment-button.ios[_ngcontent-%COMP%]::part(native){color:var(--GrayColor);font-family:Montserrat,sans-serif;font-optical-sizing:auto;font-weight:600;font-style:normal;padding:10px}.segment-button-checked.md[_ngcontent-%COMP%]::part(native), .segment-button-checked.ios[_ngcontent-%COMP%]::part(native){background:none;--indicator-box-shadow: none;color:var(--Black);border-bottom:2px solid var(--Main-Two);padding:0;font-family:Montserrat,sans-serif;font-optical-sizing:auto;font-weight:600;font-style:normal}.segment-button-checked.md[_ngcontent-%COMP%]::part(native)   .purpleUnderline[_ngcontent-%COMP%], .segment-button-checked.ios[_ngcontent-%COMP%]::part(native)   .purpleUnderline[_ngcontent-%COMP%]{border-bottom:1px solid var(--Main-Two)}ion-segment-button[_ngcontent-%COMP%]{--indicator-color: none;--indicator-box-shadow: none}",".button-container[_ngcontent-%COMP%]{display:flex;justify-content:end}.Buttons[_ngcontent-%COMP%]{background-color:var(--Main-Two);color:var(--White);width:60%;font-size:.7rem}ion-list[_ngcontent-%COMP%]{background-color:var(--White)}.coupon[_ngcontent-%COMP%]{background-color:var(--background-color);border-radius:16px;padding:10px;margin-bottom:10px;display:flex}.ListIcon[_ngcontent-%COMP%]{display:flex;align-items:center;margin-right:10px;border-right:2px dashed var(--GrayColor)}.ListIcon[_ngcontent-%COMP%]   ion-thumbnail[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:auto}.ListDetails[_ngcontent-%COMP%]{width:100%;margin-right:10px}.ListDetails[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-weight:600}.ListDetails[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-weight:400}.ListDetails[_ngcontent-%COMP%]   .inOneLine[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.ListDetails[_ngcontent-%COMP%]   .inOneLine[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-top:auto}.ListDetails[_ngcontent-%COMP%]   .inOneLine[_ngcontent-%COMP%]   #date[_ngcontent-%COMP%]{text-align:end}.ListDetails[_ngcontent-%COMP%]   .inOneLine[_ngcontent-%COMP%]   .titleFont[_ngcontent-%COMP%]{color:var(--Main-Two)!important;font-weight:600;font-size:2rem!important}.ListDetails[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{height:4vh;width:55%;margin-bottom:0}.used[_ngcontent-%COMP%]{opacity:50%}#qr[_ngcontent-%COMP%]{position:relative}.qr-code-container[_ngcontent-%COMP%]{width:90%;margin-top:20px;border-radius:16px;border:2px solid var(--Main-Two)}.qr-code-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:auto;border-radius:16px}.blue-paw[_ngcontent-%COMP%]{width:50px;height:50px;background:var(--White);position:absolute;top:30px;right:-28px}.blue-paw[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%}.yellow-paw[_ngcontent-%COMP%]{width:50px;height:50px;background:var(--White);position:absolute;bottom:30px;left:-28px}.yellow-paw[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%}#textGray[_ngcontent-%COMP%]{margin-top:10px;color:var(--GrayColor)!important;text-align:center}"]}),L})()}];let S=(()=>{var f;class L{}return(f=L).\u0275fac=function(d){return new(d||f)},f.\u0275mod=t.$C({type:f}),f.\u0275inj=t.G2t({imports:[o.iI.forChild(M),o.iI]}),L})(),F=(()=>{var f;class L{}return(f=L).\u0275fac=function(d){return new(d||f)},f.\u0275mod=t.$C({type:f}),f.\u0275inj=t.G2t({imports:[r.MD,n.YN,e.bv,S]}),L})()},5945:k=>{"use strict";var s={single_source_shortest_paths:function(l,r,n){var e={},o={};o[r]=0;var c,u,a,g,t,C,i=s.PriorityQueue.make();for(i.push(r,0);!i.empty();)for(a in g=(c=i.pop()).cost,t=l[u=c.value]||{})t.hasOwnProperty(a)&&(C=g+t[a],(typeof o[a]>"u"||o[a]>C)&&(o[a]=C,i.push(a,C),e[a]=u));if(typeof n<"u"&&typeof o[n]>"u"){var O=["Could not find a path from ",r," to ",n,"."].join("");throw new Error(O)}return e},extract_shortest_path_from_predecessor_list:function(l,r){for(var n=[],e=r;e;)n.push(e),e=l[e];return n.reverse(),n},find_path:function(l,r,n){var e=s.single_source_shortest_paths(l,r,n);return s.extract_shortest_path_from_predecessor_list(e,n)},PriorityQueue:{make:function(l){var e,r=s.PriorityQueue,n={};for(e in l=l||{},r)r.hasOwnProperty(e)&&(n[e]=r[e]);return n.queue=[],n.sorter=l.sorter||r.default_sorter,n},default_sorter:function(l,r){return l.cost-r.cost},push:function(l,r){this.queue.push({value:l,cost:r}),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return 0===this.queue.length}}};k.exports=s},8184:(k,s,l)=>{const n=l(6982),e=l(2126),o=l(2408),i=l(2813);function c(u,a,g,t,A){const C=[].slice.call(arguments,1),m=C.length,_="function"==typeof C[m-1];if(!_&&!n())throw new Error("Callback required as last argument");if(!_){if(m<1)throw new Error("Too few arguments provided");return 1===m?(g=a,a=t=void 0):2===m&&!a.getContext&&(t=g,g=a,a=void 0),new Promise(function(O,j){try{const R=e.create(g,t);O(u(R,a,t))}catch(R){j(R)}})}if(m<2)throw new Error("Too few arguments provided");2===m?(A=g,g=a,a=t=void 0):3===m&&(a.getContext&&typeof A>"u"?(A=t,t=void 0):(A=t,t=g,g=a,a=void 0));try{const O=e.create(g,t);A(null,u(O,a,t))}catch(O){A(O)}}c.bind(null,o.render),s.dY=c.bind(null,o.renderToDataURL),c.bind(null,function(u,a,g){return i.render(u,g)})},6982:k=>{k.exports=function(){return"function"==typeof Promise&&Promise.prototype&&Promise.prototype.then}},3180:(k,s,l)=>{const r=l(1679).getSymbolSize;s.getRowColCoords=function(e){if(1===e)return[];const o=Math.floor(e/7)+2,i=r(e),c=145===i?26:2*Math.ceil((i-13)/(2*o-2)),u=[i-7];for(let a=1;a<o-1;a++)u[a]=u[a-1]-c;return u.push(6),u.reverse()},s.getPositions=function(e){const o=[],i=s.getRowColCoords(e),c=i.length;for(let u=0;u<c;u++)for(let a=0;a<c;a++)0===u&&0===a||0===u&&a===c-1||u===c-1&&0===a||o.push([i[u],i[a]]);return o}},3168:(k,s,l)=>{const r=l(3503),n=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function e(o){this.mode=r.ALPHANUMERIC,this.data=o}e.getBitsLength=function(i){return 11*Math.floor(i/2)+i%2*6},e.prototype.getLength=function(){return this.data.length},e.prototype.getBitsLength=function(){return e.getBitsLength(this.data.length)},e.prototype.write=function(i){let c;for(c=0;c+2<=this.data.length;c+=2){let u=45*n.indexOf(this.data[c]);u+=n.indexOf(this.data[c+1]),i.put(u,11)}this.data.length%2&&i.put(n.indexOf(this.data[c]),6)},k.exports=e},4715:k=>{function s(){this.buffer=[],this.length=0}s.prototype={get:function(l){const r=Math.floor(l/8);return 1==(this.buffer[r]>>>7-l%8&1)},put:function(l,r){for(let n=0;n<r;n++)this.putBit(1==(l>>>r-n-1&1))},getLengthInBits:function(){return this.length},putBit:function(l){const r=Math.floor(this.length/8);this.buffer.length<=r&&this.buffer.push(0),l&&(this.buffer[r]|=128>>>this.length%8),this.length++}},k.exports=s},5835:k=>{function s(l){if(!l||l<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=l,this.data=new Uint8Array(l*l),this.reservedBit=new Uint8Array(l*l)}s.prototype.set=function(l,r,n,e){const o=l*this.size+r;this.data[o]=n,e&&(this.reservedBit[o]=!0)},s.prototype.get=function(l,r){return this.data[l*this.size+r]},s.prototype.xor=function(l,r,n){this.data[l*this.size+r]^=n},s.prototype.isReserved=function(l,r){return this.reservedBit[l*this.size+r]},k.exports=s},2527:(k,s,l)=>{const r=l(3503);function n(e){this.mode=r.BYTE,this.data="string"==typeof e?(new TextEncoder).encode(e):new Uint8Array(e)}n.getBitsLength=function(o){return 8*o},n.prototype.getLength=function(){return this.data.length},n.prototype.getBitsLength=function(){return n.getBitsLength(this.data.length)},n.prototype.write=function(e){for(let o=0,i=this.data.length;o<i;o++)e.put(this.data[o],8)},k.exports=n},4115:(k,s,l)=>{const r=l(8926),n=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],e=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];s.getBlocksCount=function(i,c){switch(c){case r.L:return n[4*(i-1)+0];case r.M:return n[4*(i-1)+1];case r.Q:return n[4*(i-1)+2];case r.H:return n[4*(i-1)+3];default:return}},s.getTotalCodewordsCount=function(i,c){switch(c){case r.L:return e[4*(i-1)+0];case r.M:return e[4*(i-1)+1];case r.Q:return e[4*(i-1)+2];case r.H:return e[4*(i-1)+3];default:return}}},8926:(k,s)=>{s.L={bit:1},s.M={bit:0},s.Q={bit:3},s.H={bit:2},s.isValid=function(n){return n&&typeof n.bit<"u"&&n.bit>=0&&n.bit<4},s.from=function(n,e){if(s.isValid(n))return n;try{return function l(r){if("string"!=typeof r)throw new Error("Param is not a string");switch(r.toLowerCase()){case"l":case"low":return s.L;case"m":case"medium":return s.M;case"q":case"quartile":return s.Q;case"h":case"high":return s.H;default:throw new Error("Unknown EC Level: "+r)}}(n)}catch{return e}}},6991:(k,s,l)=>{const r=l(1679).getSymbolSize;s.getPositions=function(o){const i=r(o);return[[0,0],[i-7,0],[0,i-7]]}},8816:(k,s,l)=>{const r=l(1679),o=r.getBCHDigit(1335);s.getEncodedBits=function(c,u){const a=c.bit<<3|u;let g=a<<10;for(;r.getBCHDigit(g)-o>=0;)g^=1335<<r.getBCHDigit(g)-o;return 21522^(a<<10|g)}},8532:(k,s)=>{const l=new Uint8Array(512),r=new Uint8Array(256);(function(){let e=1;for(let o=0;o<255;o++)l[o]=e,r[e]=o,e<<=1,256&e&&(e^=285);for(let o=255;o<512;o++)l[o]=l[o-255]})(),s.log=function(e){if(e<1)throw new Error("log("+e+")");return r[e]},s.exp=function(e){return l[e]},s.mul=function(e,o){return 0===e||0===o?0:l[r[e]+r[o]]}},1722:(k,s,l)=>{const r=l(3503),n=l(1679);function e(o){this.mode=r.KANJI,this.data=o}e.getBitsLength=function(i){return 13*i},e.prototype.getLength=function(){return this.data.length},e.prototype.getBitsLength=function(){return e.getBitsLength(this.data.length)},e.prototype.write=function(o){let i;for(i=0;i<this.data.length;i++){let c=n.toSJIS(this.data[i]);if(c>=33088&&c<=40956)c-=33088;else{if(!(c>=57408&&c<=60351))throw new Error("Invalid SJIS character: "+this.data[i]+"\nMake sure your charset is UTF-8");c-=49472}c=192*(c>>>8&255)+(255&c),o.put(c,13)}},k.exports=e},9919:(k,s)=>{s.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};function r(n,e,o){switch(n){case s.Patterns.PATTERN000:return(e+o)%2==0;case s.Patterns.PATTERN001:return e%2==0;case s.Patterns.PATTERN010:return o%3==0;case s.Patterns.PATTERN011:return(e+o)%3==0;case s.Patterns.PATTERN100:return(Math.floor(e/2)+Math.floor(o/3))%2==0;case s.Patterns.PATTERN101:return e*o%2+e*o%3==0;case s.Patterns.PATTERN110:return(e*o%2+e*o%3)%2==0;case s.Patterns.PATTERN111:return(e*o%3+(e+o)%2)%2==0;default:throw new Error("bad maskPattern:"+n)}}s.isValid=function(e){return null!=e&&""!==e&&!isNaN(e)&&e>=0&&e<=7},s.from=function(e){return s.isValid(e)?parseInt(e,10):void 0},s.getPenaltyN1=function(e){const o=e.size;let i=0,c=0,u=0,a=null,g=null;for(let t=0;t<o;t++){c=u=0,a=g=null;for(let A=0;A<o;A++){let C=e.get(t,A);C===a?c++:(c>=5&&(i+=c-5+3),a=C,c=1),C=e.get(A,t),C===g?u++:(u>=5&&(i+=u-5+3),g=C,u=1)}c>=5&&(i+=c-5+3),u>=5&&(i+=u-5+3)}return i},s.getPenaltyN2=function(e){const o=e.size;let i=0;for(let c=0;c<o-1;c++)for(let u=0;u<o-1;u++){const a=e.get(c,u)+e.get(c,u+1)+e.get(c+1,u)+e.get(c+1,u+1);(4===a||0===a)&&i++}return 3*i},s.getPenaltyN3=function(e){const o=e.size;let i=0,c=0,u=0;for(let a=0;a<o;a++){c=u=0;for(let g=0;g<o;g++)c=c<<1&2047|e.get(a,g),g>=10&&(1488===c||93===c)&&i++,u=u<<1&2047|e.get(g,a),g>=10&&(1488===u||93===u)&&i++}return 40*i},s.getPenaltyN4=function(e){let o=0;const i=e.data.length;for(let u=0;u<i;u++)o+=e.data[u];return 10*Math.abs(Math.ceil(100*o/i/5)-10)},s.applyMask=function(e,o){const i=o.size;for(let c=0;c<i;c++)for(let u=0;u<i;u++)o.isReserved(u,c)||o.xor(u,c,r(e,u,c))},s.getBestMask=function(e,o){const i=Object.keys(s.Patterns).length;let c=0,u=1/0;for(let a=0;a<i;a++){o(a),s.applyMask(a,e);const g=s.getPenaltyN1(e)+s.getPenaltyN2(e)+s.getPenaltyN3(e)+s.getPenaltyN4(e);s.applyMask(a,e),g<u&&(u=g,c=a)}return c}},3503:(k,s,l)=>{const r=l(1379),n=l(2945);s.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},s.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},s.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},s.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},s.MIXED={bit:-1},s.getCharCountIndicator=function(i,c){if(!i.ccBits)throw new Error("Invalid mode: "+i);if(!r.isValid(c))throw new Error("Invalid version: "+c);return c>=1&&c<10?i.ccBits[0]:c<27?i.ccBits[1]:i.ccBits[2]},s.getBestModeForData=function(i){return n.testNumeric(i)?s.NUMERIC:n.testAlphanumeric(i)?s.ALPHANUMERIC:n.testKanji(i)?s.KANJI:s.BYTE},s.toString=function(i){if(i&&i.id)return i.id;throw new Error("Invalid mode")},s.isValid=function(i){return i&&i.bit&&i.ccBits},s.from=function(i,c){if(s.isValid(i))return i;try{return function e(o){if("string"!=typeof o)throw new Error("Param is not a string");switch(o.toLowerCase()){case"numeric":return s.NUMERIC;case"alphanumeric":return s.ALPHANUMERIC;case"kanji":return s.KANJI;case"byte":return s.BYTE;default:throw new Error("Unknown mode: "+o)}}(i)}catch{return c}}},2174:(k,s,l)=>{const r=l(3503);function n(e){this.mode=r.NUMERIC,this.data=e.toString()}n.getBitsLength=function(o){return 10*Math.floor(o/3)+(o%3?o%3*3+1:0)},n.prototype.getLength=function(){return this.data.length},n.prototype.getBitsLength=function(){return n.getBitsLength(this.data.length)},n.prototype.write=function(o){let i,c,u;for(i=0;i+3<=this.data.length;i+=3)c=this.data.substr(i,3),u=parseInt(c,10),o.put(u,10);const a=this.data.length-i;a>0&&(c=this.data.substr(i),u=parseInt(c,10),o.put(u,3*a+1))},k.exports=n},762:(k,s,l)=>{const r=l(8532);s.mul=function(e,o){const i=new Uint8Array(e.length+o.length-1);for(let c=0;c<e.length;c++)for(let u=0;u<o.length;u++)i[c+u]^=r.mul(e[c],o[u]);return i},s.mod=function(e,o){let i=new Uint8Array(e);for(;i.length-o.length>=0;){const c=i[0];for(let a=0;a<o.length;a++)i[a]^=r.mul(o[a],c);let u=0;for(;u<i.length&&0===i[u];)u++;i=i.slice(u)}return i},s.generateECPolynomial=function(e){let o=new Uint8Array([1]);for(let i=0;i<e;i++)o=s.mul(o,new Uint8Array([1,r.exp(i)]));return o}},2126:(k,s,l)=>{const r=l(1679),n=l(8926),e=l(4715),o=l(5835),i=l(3180),c=l(6991),u=l(9919),a=l(4115),g=l(887),t=l(3466),A=l(8816),C=l(3503),m=l(2106);function N(y,I,P){const p=y.size,v=A.getEncodedBits(I,P);let b,M;for(b=0;b<15;b++)M=1==(v>>b&1),y.set(b<6?b:b<8?b+1:p-15+b,8,M,!0),y.set(8,b<8?p-b-1:b<9?15-b-1+1:15-b-1,M,!0);y.set(p-8,8,1,!0)}function x(y,I,P,p){let v;if(Array.isArray(y))v=m.fromArray(y);else{if("string"!=typeof y)throw new Error("Invalid data");{let f=I;if(!f){const L=m.rawSplit(y);f=t.getBestVersionForData(L,P)}v=m.fromString(y,f||40)}}const b=t.getBestVersionForData(v,P);if(!b)throw new Error("The amount of data is too big to be stored in a QR Code");if(I){if(I<b)throw new Error("\nThe chosen QR Code version cannot contain this amount of data.\nMinimum version required to store current data is: "+b+".\n")}else I=b;const M=function E(y,I,P){const p=new e;P.forEach(function(F){p.put(F.mode.bit,4),p.put(F.getLength(),C.getCharCountIndicator(F.mode,y)),F.write(p)});const M=8*(r.getSymbolTotalCodewords(y)-a.getTotalCodewordsCount(y,I));for(p.getLengthInBits()+4<=M&&p.put(0,4);p.getLengthInBits()%8!=0;)p.putBit(0);const S=(M-p.getLengthInBits())/8;for(let F=0;F<S;F++)p.put(F%2?17:236,8);return function U(y,I,P){const p=r.getSymbolTotalCodewords(I),b=p-a.getTotalCodewordsCount(I,P),M=a.getBlocksCount(I,P),F=M-p%M,f=Math.floor(p/M),L=Math.floor(b/M),w=L+1,d=f-L,h=new g(d);let T=0;const D=new Array(M),z=new Array(M);let V=0;const Y=new Uint8Array(y.buffer);for(let H=0;H<M;H++){const K=H<F?L:w;D[H]=Y.slice(T,T+K),z[H]=h.encode(D[H]),T+=K,V=Math.max(V,K)}const $=new Uint8Array(p);let G,Q,J=0;for(G=0;G<V;G++)for(Q=0;Q<M;Q++)G<D[Q].length&&($[J++]=D[Q][G]);for(G=0;G<d;G++)for(Q=0;Q<M;Q++)$[J++]=z[Q][G];return $}(p,y,I)}(I,P,v),S=r.getSymbolSize(I),F=new o(S);return function _(y,I){const P=y.size,p=c.getPositions(I);for(let v=0;v<p.length;v++){const b=p[v][0],M=p[v][1];for(let S=-1;S<=7;S++)if(!(b+S<=-1||P<=b+S))for(let F=-1;F<=7;F++)M+F<=-1||P<=M+F||y.set(b+S,M+F,S>=0&&S<=6&&(0===F||6===F)||F>=0&&F<=6&&(0===S||6===S)||S>=2&&S<=4&&F>=2&&F<=4,!0)}}(F,I),function O(y){const I=y.size;for(let P=8;P<I-8;P++){const p=P%2==0;y.set(P,6,p,!0),y.set(6,P,p,!0)}}(F),function j(y,I){const P=i.getPositions(I);for(let p=0;p<P.length;p++){const v=P[p][0],b=P[p][1];for(let M=-2;M<=2;M++)for(let S=-2;S<=2;S++)y.set(v+M,b+S,-2===M||2===M||-2===S||2===S||0===M&&0===S,!0)}}(F,I),N(F,P,0),I>=7&&function R(y,I){const P=y.size,p=t.getEncodedBits(I);let v,b,M;for(let S=0;S<18;S++)v=Math.floor(S/3),b=S%3+P-8-3,M=1==(p>>S&1),y.set(v,b,M,!0),y.set(b,v,M,!0)}(F,I),function B(y,I){const P=y.size;let p=-1,v=P-1,b=7,M=0;for(let S=P-1;S>0;S-=2)for(6===S&&S--;;){for(let F=0;F<2;F++)if(!y.isReserved(v,S-F)){let f=!1;M<I.length&&(f=1==(I[M]>>>b&1)),y.set(v,S-F,f),b--,-1===b&&(M++,b=7)}if(v+=p,v<0||P<=v){v-=p,p=-p;break}}}(F,M),isNaN(p)&&(p=u.getBestMask(F,N.bind(null,F,P))),u.applyMask(p,F),N(F,P,p),{modules:F,version:I,errorCorrectionLevel:P,maskPattern:p,segments:v}}s.create=function(I,P){if(typeof I>"u"||""===I)throw new Error("No input text");let v,b,p=n.M;return typeof P<"u"&&(p=n.from(P.errorCorrectionLevel,n.M),v=t.from(P.version),b=u.from(P.maskPattern),P.toSJISFunc&&r.setToSJISFunction(P.toSJISFunc)),x(I,v,p,b)}},887:(k,s,l)=>{const r=l(762);function n(e){this.genPoly=void 0,this.degree=e,this.degree&&this.initialize(this.degree)}n.prototype.initialize=function(o){this.degree=o,this.genPoly=r.generateECPolynomial(this.degree)},n.prototype.encode=function(o){if(!this.genPoly)throw new Error("Encoder not initialized");const i=new Uint8Array(o.length+this.degree);i.set(o);const c=r.mod(i,this.genPoly),u=this.degree-c.length;if(u>0){const a=new Uint8Array(this.degree);return a.set(c,u),a}return c},k.exports=n},2945:(k,s)=>{const l="[0-9]+";let n="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";n=n.replace(/u/g,"\\u");const e="(?:(?![A-Z0-9 $%*+\\-./:]|"+n+")(?:.|[\r\n]))+";s.KANJI=new RegExp(n,"g"),s.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g"),s.BYTE=new RegExp(e,"g"),s.NUMERIC=new RegExp(l,"g"),s.ALPHANUMERIC=new RegExp("[A-Z $%*+\\-./:]+","g");const o=new RegExp("^"+n+"$"),i=new RegExp("^"+l+"$"),c=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");s.testKanji=function(a){return o.test(a)},s.testNumeric=function(a){return i.test(a)},s.testAlphanumeric=function(a){return c.test(a)}},2106:(k,s,l)=>{const r=l(3503),n=l(2174),e=l(3168),o=l(2527),i=l(1722),c=l(2945),u=l(1679),a=l(5945);function g(R){return unescape(encodeURIComponent(R)).length}function t(R,N,B){const E=[];let U;for(;null!==(U=R.exec(B));)E.push({data:U[0],index:U.index,mode:N,length:U[0].length});return E}function A(R){const N=t(c.NUMERIC,r.NUMERIC,R),B=t(c.ALPHANUMERIC,r.ALPHANUMERIC,R);let E,U;return u.isKanjiModeEnabled()?(E=t(c.BYTE,r.BYTE,R),U=t(c.KANJI,r.KANJI,R)):(E=t(c.BYTE_KANJI,r.BYTE,R),U=[]),N.concat(B,E,U).sort(function(y,I){return y.index-I.index}).map(function(y){return{data:y.data,mode:y.mode,length:y.length}})}function C(R,N){switch(N){case r.NUMERIC:return n.getBitsLength(R);case r.ALPHANUMERIC:return e.getBitsLength(R);case r.KANJI:return i.getBitsLength(R);case r.BYTE:return o.getBitsLength(R)}}function j(R,N){let B;const E=r.getBestModeForData(R);if(B=r.from(N,E),B!==r.BYTE&&B.bit<E.bit)throw new Error('"'+R+'" cannot be encoded with mode '+r.toString(B)+".\n Suggested mode is: "+r.toString(E));switch(B===r.KANJI&&!u.isKanjiModeEnabled()&&(B=r.BYTE),B){case r.NUMERIC:return new n(R);case r.ALPHANUMERIC:return new e(R);case r.KANJI:return new i(R);case r.BYTE:return new o(R)}}s.fromArray=function(N){return N.reduce(function(B,E){return"string"==typeof E?B.push(j(E,null)):E.data&&B.push(j(E.data,E.mode)),B},[])},s.fromString=function(N,B){const U=function _(R){const N=[];for(let B=0;B<R.length;B++){const E=R[B];switch(E.mode){case r.NUMERIC:N.push([E,{data:E.data,mode:r.ALPHANUMERIC,length:E.length},{data:E.data,mode:r.BYTE,length:E.length}]);break;case r.ALPHANUMERIC:N.push([E,{data:E.data,mode:r.BYTE,length:E.length}]);break;case r.KANJI:N.push([E,{data:E.data,mode:r.BYTE,length:g(E.data)}]);break;case r.BYTE:N.push([{data:E.data,mode:r.BYTE,length:g(E.data)}])}}return N}(A(N,u.isKanjiModeEnabled())),x=function O(R,N){const B={},E={start:{}};let U=["start"];for(let x=0;x<R.length;x++){const y=R[x],I=[];for(let P=0;P<y.length;P++){const p=y[P],v=""+x+P;I.push(v),B[v]={node:p,lastCount:0},E[v]={};for(let b=0;b<U.length;b++){const M=U[b];B[M]&&B[M].node.mode===p.mode?(E[M][v]=C(B[M].lastCount+p.length,p.mode)-C(B[M].lastCount,p.mode),B[M].lastCount+=p.length):(B[M]&&(B[M].lastCount=p.length),E[M][v]=C(p.length,p.mode)+4+r.getCharCountIndicator(p.mode,N))}}U=I}for(let x=0;x<U.length;x++)E[U[x]].end=0;return{map:E,table:B}}(U,B),y=a.find_path(x.map,"start","end"),I=[];for(let P=1;P<y.length-1;P++)I.push(x.table[y[P]].node);return s.fromArray(function m(R){return R.reduce(function(N,B){const E=N.length-1>=0?N[N.length-1]:null;return E&&E.mode===B.mode?(N[N.length-1].data+=B.data,N):(N.push(B),N)},[])}(I))},s.rawSplit=function(N){return s.fromArray(A(N,u.isKanjiModeEnabled()))}},1679:(k,s)=>{let l;const r=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];s.getSymbolSize=function(e){if(!e)throw new Error('"version" cannot be null or undefined');if(e<1||e>40)throw new Error('"version" should be in range from 1 to 40');return 4*e+17},s.getSymbolTotalCodewords=function(e){return r[e]},s.getBCHDigit=function(n){let e=0;for(;0!==n;)e++,n>>>=1;return e},s.setToSJISFunction=function(e){if("function"!=typeof e)throw new Error('"toSJISFunc" is not a valid function.');l=e},s.isKanjiModeEnabled=function(){return typeof l<"u"},s.toSJIS=function(e){return l(e)}},1379:(k,s)=>{s.isValid=function(r){return!isNaN(r)&&r>=1&&r<=40}},3466:(k,s,l)=>{const r=l(1679),n=l(4115),e=l(8926),o=l(3503),i=l(1379),u=r.getBCHDigit(7973);function g(C,m){return o.getCharCountIndicator(C,m)+4}function t(C,m){let _=0;return C.forEach(function(O){const j=g(O.mode,m);_+=j+O.getBitsLength()}),_}s.from=function(m,_){return i.isValid(m)?parseInt(m,10):_},s.getCapacity=function(m,_,O){if(!i.isValid(m))throw new Error("Invalid QR Code version");typeof O>"u"&&(O=o.BYTE);const N=8*(r.getSymbolTotalCodewords(m)-n.getTotalCodewordsCount(m,_));if(O===o.MIXED)return N;const B=N-g(O,m);switch(O){case o.NUMERIC:return Math.floor(B/10*3);case o.ALPHANUMERIC:return Math.floor(B/11*2);case o.KANJI:return Math.floor(B/13);default:return Math.floor(B/8)}},s.getBestVersionForData=function(m,_){let O;const j=e.from(_,e.M);if(Array.isArray(m)){if(m.length>1)return function A(C,m){for(let _=1;_<=40;_++)if(t(C,_)<=s.getCapacity(_,m,o.MIXED))return _}(m,j);if(0===m.length)return 1;O=m[0]}else O=m;return function a(C,m,_){for(let O=1;O<=40;O++)if(m<=s.getCapacity(O,_,C))return O}(O.mode,O.getLength(),j)},s.getEncodedBits=function(m){if(!i.isValid(m)||m<7)throw new Error("Invalid QR Code version");let _=m<<12;for(;r.getBCHDigit(_)-u>=0;)_^=7973<<r.getBCHDigit(_)-u;return m<<12|_}},2408:(k,s,l)=>{const r=l(8911);s.render=function(i,c,u){let a=u,g=c;typeof a>"u"&&(!c||!c.getContext)&&(a=c,c=void 0),c||(g=function e(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}()),a=r.getOptions(a);const t=r.getImageWidth(i.modules.size,a),A=g.getContext("2d"),C=A.createImageData(t,t);return r.qrToImageData(C.data,i,a),function n(o,i,c){o.clearRect(0,0,i.width,i.height),i.style||(i.style={}),i.height=c,i.width=c,i.style.height=c+"px",i.style.width=c+"px"}(A,g,t),A.putImageData(C,0,0),g},s.renderToDataURL=function(i,c,u){let a=u;return typeof a>"u"&&(!c||!c.getContext)&&(a=c,c=void 0),a||(a={}),s.render(i,c,a).toDataURL(a.type||"image/png",(a.rendererOpts||{}).quality)}},2813:(k,s,l)=>{const r=l(8911);function n(i,c){const u=i.a/255,a=c+'="'+i.hex+'"';return u<1?a+" "+c+'-opacity="'+u.toFixed(2).slice(1)+'"':a}function e(i,c,u){let a=i+c;return typeof u<"u"&&(a+=" "+u),a}s.render=function(c,u,a){const g=r.getOptions(u),t=c.modules.size,A=c.modules.data,C=t+2*g.margin,m=g.color.light.a?"<path "+n(g.color.light,"fill")+' d="M0 0h'+C+"v"+C+'H0z"/>':"",_="<path "+n(g.color.dark,"stroke")+' d="'+function o(i,c,u){let a="",g=0,t=!1,A=0;for(let C=0;C<i.length;C++){const m=Math.floor(C%c),_=Math.floor(C/c);!m&&!t&&(t=!0),i[C]?(A++,C>0&&m>0&&i[C-1]||(a+=t?e("M",m+u,.5+_+u):e("m",g,0),g=0,t=!1),m+1<c&&i[C+1]||(a+=e("h",A),A=0)):g++}return a}(A,t,g.margin)+'"/>',R='<svg xmlns="http://www.w3.org/2000/svg" '+(g.width?'width="'+g.width+'" height="'+g.width+'" ':"")+'viewBox="0 0 '+C+" "+C+'" shape-rendering="crispEdges">'+m+_+"</svg>\n";return"function"==typeof a&&a(null,R),R}},8911:(k,s)=>{function l(r){if("number"==typeof r&&(r=r.toString()),"string"!=typeof r)throw new Error("Color should be defined as hex string");let n=r.slice().replace("#","").split("");if(n.length<3||5===n.length||n.length>8)throw new Error("Invalid hex color: "+r);(3===n.length||4===n.length)&&(n=Array.prototype.concat.apply([],n.map(function(o){return[o,o]}))),6===n.length&&n.push("F","F");const e=parseInt(n.join(""),16);return{r:e>>24&255,g:e>>16&255,b:e>>8&255,a:255&e,hex:"#"+n.slice(0,6).join("")}}s.getOptions=function(n){n||(n={}),n.color||(n.color={});const o=n.width&&n.width>=21?n.width:void 0;return{width:o,scale:o?4:n.scale||4,margin:typeof n.margin>"u"||null===n.margin||n.margin<0?4:n.margin,color:{dark:l(n.color.dark||"#000000ff"),light:l(n.color.light||"#ffffffff")},type:n.type,rendererOpts:n.rendererOpts||{}}},s.getScale=function(n,e){return e.width&&e.width>=n+2*e.margin?e.width/(n+2*e.margin):e.scale},s.getImageWidth=function(n,e){const o=s.getScale(n,e);return Math.floor((n+2*e.margin)*o)},s.qrToImageData=function(n,e,o){const i=e.modules.size,c=e.modules.data,u=s.getScale(i,o),a=Math.floor((i+2*o.margin)*u),g=o.margin*u,t=[o.color.light,o.color.dark];for(let A=0;A<a;A++)for(let C=0;C<a;C++){let m=4*(A*a+C),_=o.color.light;A>=g&&C>=g&&A<a-g&&C<a-g&&(_=t[c[Math.floor((A-g)/u)*i+Math.floor((C-g)/u)]?1:0]),n[m++]=_.r,n[m++]=_.g,n[m++]=_.b,n[m]=_.a}}}}]);