"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[537],{537:(N,b,c)=>{c.r(b),c.d(b,{ReminderPageModule:()=>Y});var f=c(9351),u=c(7199),s=c(7473),_=c(4170),p=c(5841),e=c(315),P=c(8525),R=c(990),F=c(5110),x=c(5822),k=c(1572);const E=()=>[0,1];function M(i,l){1&i&&e.nrm(0,"img",17)}function O(i,l){if(1&i&&e.nrm(0,"img",18),2&i){const o=e.XpG();e.FS9("alt",o.selectedPet.name),e.Y8G("src",o.selectedPet.image?o.selectedPet.image:"assets/mypet.svg",e.B4B)}}function D(i,l){if(1&i&&(e.j41(0,"ion-select-option",19),e.EFF(1),e.k0s()),2&i){const o=l.$implicit;e.Y8G("value",o.id),e.R7$(),e.SpI(" ",o.name," ")}}function C(i,l){1&i&&(e.j41(0,"div",20)(1,"ion-label",21),e.EFF(2,"No events today"),e.k0s()())}function $(i,l){if(1&i&&(e.j41(0,"div",20)(1,"ion-label",22),e.EFF(2),e.k0s(),e.nrm(3,"br")(4,"br"),e.j41(5,"div",23),e.nrm(6,"img",24),e.j41(7,"ion-label",25),e.EFF(8),e.k0s()()()),2&i){const o=l.$implicit;e.R7$(2),e.JRh(o.title),e.R7$(6),e.Lme("",o.date," | ",o.time,"")}}function j(i,l){if(1&i){const o=e.RV6();e.j41(0,"div",27),e.bIt("click",function(){const t=e.eBV(o).$implicit,r=e.XpG().index,a=e.XpG();return e.Njj(a.pop(r,t.provider_id))}),e.j41(1,"ion-label",22),e.EFF(2),e.k0s(),e.nrm(3,"br")(4,"br"),e.j41(5,"div",23),e.nrm(6,"img",24),e.j41(7,"ion-label",25),e.EFF(8),e.k0s()()()}if(2&i){const o=l.$implicit;e.R7$(2),e.JRh(o.title),e.R7$(6),e.Lme("",o.date," | ",o.time,"")}}function I(i,l){if(1&i&&(e.j41(0,"div"),e.nrm(1,"br"),e.j41(2,"ion-label",12),e.EFF(3),e.k0s(),e.DNE(4,j,9,3,"div",26),e.k0s()),2&i){const o=l.$implicit,n=e.XpG();e.R7$(3),e.JRh(n.formatDate(o.date)),e.R7$(),e.Y8G("ngForOf",o.events)}}function S(i,l){1&i&&e.nrm(0,"ion-icon",42)}function T(i,l){if(1&i){const o=e.RV6();e.j41(0,"ion-list",28)(1,"div")(2,"ion-item")(3,"ion-label",21),e.EFF(4),e.k0s(),e.j41(5,"ion-buttons",31),e.DNE(6,S,1,0,"ion-icon",32),e.j41(7,"ion-button",33),e.bIt("click",function(){const t=e.eBV(o).$implicit,r=e.XpG(2);return e.Njj(r.remove(t.id))}),e.nrm(8,"ion-icon",34),e.k0s()()(),e.j41(9,"ion-item",35)(10,"ion-badge",36),e.nrm(11,"ion-icon",37),e.EFF(12),e.k0s()()(),e.j41(13,"div",38)(14,"ion-item")(15,"ion-list",0)(16,"ion-label"),e.EFF(17,"Date"),e.k0s(),e.nrm(18,"br"),e.j41(19,"ion-text"),e.EFF(20),e.k0s()(),e.nrm(21,"div",39),e.j41(22,"ion-list",31)(23,"ion-label"),e.EFF(24,"Time"),e.k0s(),e.nrm(25,"br"),e.j41(26,"ion-text"),e.EFF(27),e.k0s()()()(),e.j41(28,"div")(29,"ion-card")(30,"ion-card-title"),e.EFF(31,"Veterinarian"),e.k0s(),e.nrm(32,"br"),e.j41(33,"ion-card-content",40)(34,"ion-item")(35,"ion-thumbnail",0),e.nrm(36,"img",41),e.k0s(),e.j41(37,"ion-list")(38,"ion-label"),e.EFF(39),e.k0s()()()()()(),e.j41(40,"div")(41,"ion-item")(42,"ion-list")(43,"ion-label"),e.EFF(44,"Notes"),e.k0s(),e.j41(45,"ion-text"),e.EFF(46),e.k0s()()()()()}if(2&i){const o=l.$implicit,n=e.XpG(2);e.R7$(4),e.JRh(o.title),e.R7$(2),e.Y8G("ngIf","Booking"!==n.tag),e.R7$(6),e.SpI(" ",n.tag," "),e.R7$(8),e.JRh(o.date),e.R7$(7),e.JRh(o.time),e.R7$(9),e.Y8G("src",null==n.provider?null:n.provider.profile_image,e.B4B),e.R7$(3),e.JRh(null==n.provider?null:n.provider.name),e.R7$(7),e.JRh(o.note)}}function w(i,l){if(1&i){const o=e.RV6();e.j41(0,"div",28),e.DNE(1,T,47,8,"ion-list",29),e.j41(2,"ion-button",30),e.bIt("click",function(){e.eBV(o);const t=e.XpG();return e.Njj(t.setOpen(!1))}),e.EFF(3,"Done"),e.k0s()()}if(2&i){const o=e.XpG();e.R7$(),e.Y8G("ngForOf",o.groupedEvents[o.selectedIndex].events)}}const G=[{path:"",component:(()=>{var i;class l{constructor(n,t,r,a,d,m,h,v){this.activatedRoute=n,this.providerService=t,this.reminderService=r,this.navCtrl=a,this.fb=d,this.toastController=m,this.authService=h,this.petInfoService=v,this.tag="Booking",this.pets=[],this.petOwnerId=0,this.selectedIndex=-1,this.selectedMonth="",this.selectedDate="",this.availability=[],this.selectedTime=null,this.minDate=(new Date).toISOString(),this.maxDate=new Date((new Date).setFullYear((new Date).getFullYear()+1)).toISOString(),this.timeSlots=["09:00","09:30","10:00","10:30","11:00","11:30","15:00","15:30","16:00","16:30","17:00","17:30"],this.days=[{name:"M",key:"mon",available:!1},{name:"T",key:"tue",available:!1},{name:"W",key:"wed",available:!1},{name:"T",key:"thu",available:!1},{name:"F",key:"fri",available:!1},{name:"S",key:"sat",available:!1},{name:"S",key:"sun",available:!1}],this.petEvents=[],this.groupedEvents=[],this.todayEvents=[],this.today=(new Date).toISOString().split("T")[0],this.isModalOpen=!1,this.highlightedDates=this.petEvents.map(y=>({date:y.date,textColor:"#800080",backgroundColor:"#ffc0cb"})),console.log("hDates",this.highlightedDates),this.reminderForm=this.fb.group({pet_id:[null]})}remove(n){var t=this;this.reminderService.deleteReminder(n).then((0,p.A)(function*(){var r;t.petEvents=t.petEvents.filter(d=>d.id!==n),t.groupEventsByDate(),t.todayEvents=(null===(r=t.groupedEvents.find(d=>d.date===t.today))||void 0===r?void 0:r.events)||[],(yield t.toastController.create({message:"Reminder deleted successfully",duration:2e3,color:"success"})).present()})).catch(function(){var r=(0,p.A)(function*(a){(yield t.toastController.create({message:"Error deleting reminder",duration:2e3,color:"danger"})).present(),console.error("Error deleting reminder:",a)});return function(a){return r.apply(this,arguments)}}())}pop(n,t){this.selectedIndex=n,this.loadProviderData(t),this.setOpen(!0)}setOpen(n){this.isModalOpen=n}ngOnInit(){var n=this;return(0,p.A)(function*(){n.groupEventsByDate();try{const t=yield n.authService.getProfile();n.petOwnerId=t.id}catch(t){console.error("Error fetching profile data:",t)}n.petInfoService.fetchPets().then(t=>{n.pets=t,console.log("Pets data:",n.pets)}).catch(t=>{console.error("Error fetching pets data:",t)})})()}selectPet(n){console.log(n),this.selectedPetId=n,this.selectedPet=this.pets.find(t=>t.id===n),this.reminderForm.patchValue({pet_id:n}),this.fetchRemindersByPetId(n)}fetchRemindersByPetId(n){var t=this;return(0,p.A)(function*(){try{const r=yield t.reminderService.getRemindersByPetId(n);t.petEvents=r.data,t.groupEventsByDate(),console.log("Grouped Events:",t.petEvents)}catch(r){console.error("Error fetching reminders:",r)}})()}loadProviderData(n){var t=this;return(0,p.A)(function*(){t.providerService.getProviderById(n).then(r=>{var a;Array.isArray(r.data)?t.provider=r.data[0]:(t.provider=r.data,console.log(r.data)),null!==(a=t.provider)&&void 0!==a&&a.availability&&(t.availability=JSON.parse(t.provider.availability),t.updateAvailability())},r=>{console.error("Error fetching provider details:",r)})})()}updateAvailability(){this.days.forEach(n=>{n.available=this.availability.includes(n.key)})}groupEventsByDate(){var n;const t=new Map,r=new Date;this.petEvents.forEach(a=>{const d=new Date(a.date),[m,h,v]=a.time.split(":").map(Number);if(d.setHours(m,h,v),console.log("Processing event:",a,"Event Date and Time:",d,"Current Date and Time:",r),d.toDateString()===r.toDateString())if(d>=r){const g=d.toISOString().split("T")[0];t.has(g)||t.set(g,[]),t.get(g).push(a)}else console.log("Event time has passed, skipping:",a);else if(d>r){const g=d.toISOString().split("T")[0];t.has(g)||t.set(g,[]),t.get(g).push(a)}else console.log("Event date is in the past, skipping:",a)}),this.groupedEvents=Array.from(t,([a,d])=>({date:a,events:d})),console.log("Grouped Events:",this.groupedEvents),this.todayEvents=(null===(n=this.groupedEvents.find(a=>a.date===this.today))||void 0===n?void 0:n.events)||[],console.log("Today's Events:",this.todayEvents)}formatDate(n){const[t,r,a]=n.split("-").map(Number),d=new Date(t,r-1,a);return`${this.getDayWithSuffix(a)} ${d.toLocaleDateString("en-GB",{month:"long",year:"numeric"})}`}getDayWithSuffix(n){if(n>=11&&n<=13)return`${n}th`;switch(n%10){case 1:return`${n}st`;case 2:return`${n}nd`;case 3:return`${n}rd`;default:return`${n}th`}}}return(i=l).\u0275fac=function(n){return new(n||i)(e.rXU(_.nX),e.rXU(P.$),e.rXU(R.s),e.rXU(F.q9),e.rXU(u.ok),e.rXU(s.K_),e.rXU(x.u),e.rXU(k.d))},i.\u0275cmp=e.VBU({type:i,selectors:[["app-reminder"]],decls:25,vars:12,consts:[["slot","start"],[1,"header-margin-Single-Line"],[1,"titleFont"],["slot","end",1,"selector","bodyFont"],["toggleIcon","assets/icons/expand.svg","interface","popover","placeholder","Select Pet",1,"bodyFont",3,"ngModelChange","ionChange","ngModel"],["class","pfp","slot","start","src","assets/mypet.svg","alt","no pet",4,"ngIf"],["class","pfp","slot","start",3,"src","alt",4,"ngIf"],["class","bodyFont",3,"value",4,"ngFor","ngForOf"],[1,"ion-padding"],[1,"MakeItCenter"],[1,"shadow"],["display-format","yyyy-MM-dd","picker-format","DD MMM YYYY","presentation","date",1,"bodyFont","custom-datetime",3,"highlightedDates"],[1,"blackTitleFont"],["class","card",4,"ngIf"],["class","card",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],[1,"bodyFont",3,"willDismiss","isOpen","initialBreakpoint","breakpoints"],["slot","start","src","assets/mypet.svg","alt","no pet",1,"pfp"],["slot","start",1,"pfp",3,"src","alt"],[1,"bodyFont",3,"value"],[1,"card"],[1,"bodyFont"],[1,"bodyFont","boldFont"],[1,"MakeItFlex"],["src","assets/icons/calendar.svg",1,"icon"],[1,"bodyFont","textGray"],["class","card","button","",3,"click",4,"ngFor","ngForOf"],["button","",1,"card",3,"click"],[1,"content-container"],["class","content-container",4,"ngFor","ngForOf"],[1,"done-button",3,"click"],["slot","end"],["src","assets/icons/edit.svg","name","edit","class","icons",4,"ngIf"],[3,"click"],["src","assets/icons/trash.svg",1,"icons"],[1,"syringe-icon"],["color","primary","slot","start"],["src","assets/icons/Syringe.svg"],[1,"date-time"],[1,"separator"],[1,"styled-card-content"],["alt","img",3,"src"],["src","assets/icons/edit.svg","name","edit",1,"icons"]],template:function(n,t){1&n&&(e.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",0),e.nrm(3,"ion-back-button"),e.k0s(),e.j41(4,"div",1)(5,"ion-label",2),e.EFF(6,"Reminders"),e.k0s()(),e.j41(7,"ion-buttons",3)(8,"ion-select",4),e.mxI("ngModelChange",function(a){return e.DH7(t.selectedPetId,a)||(t.selectedPetId=a),a}),e.bIt("ionChange",function(a){return t.selectPet(a.detail.value)}),e.DNE(9,M,1,0,"img",5)(10,O,1,2,"img",6)(11,D,2,2,"ion-select-option",7),e.k0s()()()(),e.j41(12,"ion-content")(13,"div",8)(14,"div",9)(15,"div",10),e.nrm(16,"ion-datetime",11),e.k0s()(),e.nrm(17,"br"),e.j41(18,"ion-label",12),e.EFF(19,"Today"),e.k0s(),e.DNE(20,C,3,0,"div",13)(21,$,9,3,"div",14)(22,I,5,2,"div",15),e.k0s(),e.j41(23,"ion-modal",16),e.bIt("willDismiss",function(){return t.setOpen(!1)}),e.DNE(24,w,4,1,"ng-template"),e.k0s()()),2&n&&(e.R7$(8),e.R50("ngModel",t.selectedPetId),e.R7$(),e.Y8G("ngIf",!t.selectedPet),e.R7$(),e.Y8G("ngIf",t.selectedPet),e.R7$(),e.Y8G("ngForOf",t.pets),e.R7$(5),e.Y8G("highlightedDates",t.highlightedDates),e.R7$(4),e.Y8G("ngIf",0===t.todayEvents.length),e.R7$(),e.Y8G("ngForOf",t.todayEvents),e.R7$(),e.Y8G("ngForOf",t.groupedEvents),e.R7$(),e.Y8G("isOpen",t.isModalOpen)("initialBreakpoint",1)("breakpoints",e.lJ4(11,E)))},dependencies:[f.Sq,f.bT,u.BC,u.vS,s.In,s.Jm,s.QW,s.b_,s.I9,s.tN,s.W9,s.A9,s.eU,s.iq,s.uz,s.he,s.nf,s.Nm,s.Ip,s.IO,s.Zx,s.ai,s.Sb,s.Je,s.el],styles:["ion-buttons[_ngcontent-%COMP%]{margin-top:18px}ion-select[_ngcontent-%COMP%], ion-select-option[_ngcontent-%COMP%]{font-weight:600}  ion-select-popover{--background: white !important}  ion-select-popover ion-list{background-color:#fff!important}  ion-select-popover ion-list ion-item{--background: white !important;--color: black !important}  .select-interface-option{background-color:#fff!important;color:#000!important}.pfp[_ngcontent-%COMP%]{width:33px;height:33px;border-radius:50%}.custom-datetime[_ngcontent-%COMP%]{--background: var(--White);border-radius:16px}.custom-datetime[_ngcontent-%COMP%]::part(active){background-color:var(--Main-Two);color:var(--White);border:1px solid var(--Main-Two)}.ion-picker-column-option[_ngcontent-%COMP%]{--highlight-background:var(--White);--highlight-border-radius:var(--Main-Two)}.shadow[_ngcontent-%COMP%]{max-width:350px;box-shadow:0 4px 8px #0000001a;border-radius:16px;margin-top:10px}.ion-color-primary[_ngcontent-%COMP%]{--ion-color-base: var(--Main-One) !important}.card[_ngcontent-%COMP%]{width:100%;border-radius:16px;padding:16px;background-color:var(--White);margin-top:5px;margin-bottom:10px}.icon[_ngcontent-%COMP%]{width:24px;height:24px;margin-right:10px}#ev[_ngcontent-%COMP%]{display:flex;flex-direction:column}ion-body[_ngcontent-%COMP%]{font-family:Montserrat,sans-serif;font-optical-sizing:auto;font-size:.875rem;font-weight:500;font-style:normal;color:var(--Black)!important}.pet[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:50px;height:50px;border-radius:50%;margin-right:100px}ion-modal[_ngcontent-%COMP%]{--border-radius: 16px 16px 0 0;--max-width: 100%;--width: 100%;--min-width: 100%;--max-height: 90%;--height: auto}ion-content[_ngcontent-%COMP%]{--padding-start: 0;--padding-end: 0}.content-container[_ngcontent-%COMP%]{width:100%;padding:16px;box-sizing:border-box;background:#fff}.done-button[_ngcontent-%COMP%]{display:flex;font-size:15px;padding:16px 32px;--border-radius: 16px;height:80px;width:auto;--background: #ED5F1E}","ion-card[_ngcontent-%COMP%]{background:none}.styled-card-content[_ngcontent-%COMP%]{border:1px solid #ddd;border-radius:16px;padding:13px 16px}.date-time[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-evenly;padding:10px}.date-time[_ngcontent-%COMP%]   io-item[_ngcontent-%COMP%]{display:flex;width:auto;padding:0;margin:0;border:none;justify-content:center}.date-list[_ngcontent-%COMP%], .time-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}.separator[_ngcontent-%COMP%]{width:1px;height:100%;background-color:#ddd;margin:0 16px}.syringe-icon[_ngcontent-%COMP%]   ion-badge[_ngcontent-%COMP%]{background:var(--Main-Two);border-radius:16px;padding:9px}.icons[_ngcontent-%COMP%]{margin-right:8px;width:27px;height:27px}"]}),l})()}];let B=(()=>{var i;class l{}return(i=l).\u0275fac=function(n){return new(n||i)},i.\u0275mod=e.$C({type:i}),i.\u0275inj=e.G2t({imports:[_.iI.forChild(G),_.iI]}),l})(),Y=(()=>{var i;class l{}return(i=l).\u0275fac=function(n){return new(n||i)},i.\u0275mod=e.$C({type:i}),i.\u0275inj=e.G2t({imports:[f.MD,u.YN,s.bv,B]}),l})()}}]);