<app-transfer *ngIf="isTransferVisible" (transfer)="handleTransfer($event)" (closeForm)="closeTransferForm()"></app-transfer>


<!-- container for view pet profile -->
<div class="pet-profile-container">
  <!-- owner detail section -->
  <div class="pet-owner-detail">
      <img src="Image/men.png" alt="">
      <table>
          <tr>
              <td style="width: 400px;">
                  <label for="ownerName">Full Name:</label>
                  <input type="text" [value]="ownerName" disabled>
              </td>
              <td style="width: 200px;">
                  <label for="contactNumber">Contact Number:</label>
                  <input type="text" [value]="ownerPhone" disabled>
              </td>
              <td>
                  <label for="location">Area:</label>
                  <input type="text" [value]="ownerArea" disabled>
              </td>
          </tr>
      </table>
  </div>

  <!-- pet details section -->
  <form [formGroup]="petForm" (ngSubmit)="onSubmit()">
      <div class="pet-detail">
          <div class="space-between">
              <h1>Pet Profile</h1>
              <div class="circle"></div>
          </div>
          <div class="nospace">
              <!-- Pet image: clicking on the image triggers file selection -->
  <img [src]="petImageBase64 || 'Image/cat.png'" alt="" style="cursor:pointer;" (click)="triggerPetFileInput()">
  <!-- Hidden file input -->
  <input type="file" #petFileInput (change)="onPetImageSelect($event)" hidden>
              <div class="pet-inputs">
                  <table>
                      <tr>
                          <td style="width: 500px;">
                              <label for="petName">Name:</label>
                              <input type="text" formControlName="petName">
                          </td>
                          <td>
                              <label for="petType">Type of Pet:</label>
                              <select formControlName="petType">
                                  <option value="dog">Dog</option>
                                  <option value="cat">Cat</option>
                                  <option value="bird">Bird</option>
                                  <option value="rabbit">Rabbit</option>
                                  <option value="other">Other</option>
                              </select>
                          </td>
                          <td>
                              <label for="breed">Breed:</label>
                              <input type="text" formControlName="breed">
                          </td>
                          <td>
                              <label for="gender">Gender:</label>
                              <select formControlName="gender">
                                  <option value="m">Male</option>
                                  <option value="f">Female</option>
                              </select>
                          </td>
                      </tr>
                  </table>
                  <table>
                      <td>
                          <label for="weight">Weight:</label>
                          <input type="text" formControlName="weight">
                      </td>
                      <td>
                          <label for="height">Height:</label>
                          <input type="text" formControlName="height">
                      </td>
                      <td>
                          <label for="age">Age:</label>
                          <input type="number" formControlName="age">
                      </td>
                      <td>
                          <label for="colour">Colour:</label>
                          <input type="text" formControlName="colour">
                      </td>
                      <td>
                          <label>
                              Vaccinated
                              <input type="checkbox" formControlName="vaccinated">
                          </label>
                      </td>
                      <td>
                          <label>
                              Microchipped
                              <input type="checkbox" formControlName="microchipped">
                          </label>
                      </td>
                      <td>
                          <label>
                              Neutered
                              <input type="checkbox" formControlName="neutered">
                          </label>
                      </td>
                      <td>
                          <label for="collarNo">Collar No.</label>
                          <input type="text" formControlName="collarNo">
                      </td>
                  </table>
                  <table style="width: 100%">
                      <tr>
                          <td>
                              <label for="bio">Bio</label>
                              <textarea formControlName="bio" placeholder="about"></textarea>
                          </td>
                      </tr>
                  </table>
              </div>
          </div>
      </div>

      <div class="button-group">
          <button type="submit" class="submit-button">Add Pet</button>
      </div>
  

  <!-- membership discounts -->
  <div class="membership-detail">
      <h1>Membership Discounts</h1>
      <div class="container">
          <div class="membership-inputs">
              <table>
                  <tr>
                    <div>
                      <label for="firstIssue">First Issue</label>
                      <input type="date" id="firstIssue" formControlName="firstIssue">
                    </div>
                      <td>
                        <label for="">Issue Date</label>
                        <input type="date" formControlName="issueDate" (change)="onIssueDateChange($event)">
                      </td>
                      <td>
                        <label for="">Expiry Date</label>
                        <input type="date" formControlName="expiryDate" (change)="onExpiryDateChange($event)">
                      </td>
                      
                  </tr>
              </table>
              <table>
                  <tr>
                    <td style="width: 200px;">
                      <label for="packageType">Package Type</label>
                      <select formControlName="packageType">
                        <option value="">Select a package</option>
                        <option *ngFor="let pkg of packageList" [value]="pkg.id">
                          {{ pkg.title }}
                        </option>
                      </select>
                    </td>
                    
                  
                    <td style="width: 200px;">
                        <label for="status">Status</label>
                        <select id="status" formControlName="status">
                            <option value="active">Active</option>
                            <option value="pending">Pending</option>
                            <option value="renewal">Renewal</option>
                            <option value="expired">Expired</option>
                        </select>
                      </td>
                      
                      <td>
                          <label for="">Period</label>
                          <input type="text">
                      </td>
                      <td style="width: 200px;">
                        <label for="payType">Pay type</label>
                        <select id="payType" formControlName="payType">
                            <option value="option1">Option 1</option>
                            <option value="option2">Option 2</option>
                        </select>
                      </td>
                      <td style="width: 200px;">
                        <label for="delivery">Delivery</label>
                        <select id="delivery" formControlName="delivery">
                            <option value="option1">Option 1</option>
                            <option value="option2">Option 2</option>
                        </select>
                      </td>
                      
                      <td>
                        <label for="totalPrice">Total Price</label>
                        <input type="text" id="totalPrice" formControlName="totalPrice">
                      </td>
                      
                  </tr>
              </table>
          </div>
          <div class="buttons">
              <button style="background-color:orange">Print Card</button>
              <button style="background-color:blue">Print Invoice</button>
          </div>
      </div>
  </div>
</form>

  <!--Pet document section-->
  <div class="pet-document">
      <div class="space-between">
          <h1>Pet document</h1>
          <div class="extra-buttons" style="display: flex; gap: 10px;">
            <button type="button" class="btn-file" (click)="adoptPet()">Adopt pet</button>
            <button type="button" class="btn-file" (click)="matePet()">Mating</button>
            <button type="button" class="btn-file" (click)="lostPet()">Is Lost?</button>
            <button type="button" class="btn-file" (click)="sellPet()">Sell</button>
            <button type="button" class="btn-file" (click)="toggleTransferForm()">Transfer</button>
          </div>
           <button type="button" class="btn-file" (click)="onSubmit()">{{ selectedPet?.id ? 'Update Pet' : 'Add Pet' }}</button>
      </div>
      <div class="file-upload-container">
          <ul>
              <li>
                  <label for="">file Name</label>
                  <input type="text" class="file-input" id="fileName" placeholder="No file chosen" readonly />
                  <button class="btn-file" id="uploadButton">Choose</button>
              </li>
          </ul>
          <div class="btn-action">
              <img src="biin.png" alt="Delete" class="h-5 ml-2 cursor-pointer" />
              <img src="Image/download.png" alt="Download" class="h-6 ml-2 cursor-pointer" />
          </div>
      </div>
  </div>
  <div class="pet-activity">
      <div class="space-between">
          <div>
              <ul class="filter-date">
                  <li>
                      <label for="">From</label>
                      <input type="date">
                  </li>
                  <li>
                      <label for="">to</label>
                   <input type="date">
                  </li>
                  <li>
                      <button class="btn-filter"> Filter</button>
                  </li>
              </ul>
          </div>
          <div class="buttons-line">
              <button style="background-color:orange">Total Paid: 0</button>
              <button style="background-color:blue">Total Saved: 0</button>
          </div>
      </div>
      <table class="discount-table">
          <tr>
              <th>Transaction Date</th>
              <th>Provider Name</th>
              <th>Type of Service</th>
              <th>Price</th>
              <th>Discount Amount</th>
              <th>Paid</th>
          </tr>
          <tr>
              <td> 12 may 2024</td>
              <td> Sama Pet shop</td>
              <td> Grooming</td>
              <td> 22.000 BHD</td>
              <td> 20%</td>
              <td> 18.000 BHD</td>
          </tr>
          <tr>
              <td> 12 may 2024</td>
              <td> Sama Pet shop</td>
              <td> Grooming</td>
              <td> 22.000 BHD</td>
              <td> 20%</td>
              <td> 18.000 BHD</td>
          </tr>
          <tr>
              <td> 12 may 2024</td>
              <td> Sama Pet shop</td>
              <td> Grooming</td>
              <td> 22.000 BHD</td>
              <td> 20%</td>
              <td> 18.000 BHD</td>
          </tr>
      </table>
  </div>
</div>